# Configuration par défaut pour PyCalendar
# =========================================
# Ce fichier contient TOUTES les valeurs par défaut
# Les valeurs ici doivent correspondre exactement aux défauts dans core/config.py
# 
# Pour créer une config personnalisée, copiez ce fichier et ne gardez que les valeurs
# que vous souhaitez modifier. Les autres seront automatiquement héritées des défauts.

# Fichiers d'entrée/sortie
# Configuration par défaut pour PyCalendar

fichiers:
  donnees: "exemple/config_exemple.xlsx"
  sortie: "exemple/calendrier.xlsx"

# Paramètres de planification
planification:
  nb_semaines: 8
  taille_poule_min: 3
  taille_poule_max: 6
  strategie: "cpsat"  # "greedy" ou "cpsat"
  fallback_greedy: true

# Configuration Greedy
greedy:
  nb_essais: 10

# Configuration CP-SAT (OR-Tools)
cpsat:
  temps_max_secondes: 15
  afficher_progression: false  # true = affiche détails du solver, false = silencieux
  niveau_log: 1
  warm_start: true  # Utilise la dernière solution comme point de départ (accélère la résolution)
  warm_start_file: "default"  # Nom du fichier de solution (permet d'avoir des solutions par config)

# Poids des contraintes
contraintes:
  # Contraintes DURES (hard constraints)
  poids_indisponibilite: 1000.0        # Indisponibilité équipes/institutions
  poids_capacite_gymnase: 1500.0        # Capacité des gymnases
  
  # Contraintes SOUPLES (soft constraints)
  poids_equilibrage_charge: 50.0       # Équilibrage de la charge sur semaines/gymnases
  
  # Préférences de gymnase (nouveau système avec bonus par rang)
  nb_preferences_gymnases: 5           # Nombre de colonnes de préférences (1 à N)
  bonus_preferences_gymnases: [10.0, 8.0, 5.0, 2.0, 1.0]  # Bonus par rang de préférence
  
  # Contrainte sophistiquée: Horaires préférés avec tolérance
  # Formule: pénalité = multiplicateur × ((distance) / diviseur)²
  penalite_apres_horaire_min: 1.0           # Multiplicateur si match après horaire préféré (base)
  penalite_avant_horaire_min: 6.0           # Multiplicateur si match avant horaire d'1 équipe
  penalite_avant_horaire_min_deux: 15.0     # Multiplicateur si match avant horaire des 2 équipes
  penalite_horaire_diviseur: 60.0            # Diviseur pour normaliser la distance (60=heures, 90=plus doux)
  penalite_horaire_tolerance: 30.0           # Fenêtre de tolérance en minutes (0=strict, 30=tolérant)
  
  # Limites
  max_matchs_par_equipe_par_semaine: 1
  
  # Espacement entre matchs d'une même équipe
  # Liste de pénalités par nombre de semaines de repos [0 repos, 1 repos, 2 repos, ...]
  # 0 repos = matchs semaines consécutives, 1 repos = 1 semaine d'écart entre matchs
  # Si repos >= longueur de la liste, pénalité = 0 (espacement suffisant)
  penalites_espacement_repos: [8.0, 2.0, 1.0]  # [0 sem repos, 1 sem repos, 2 sem repos]
  
  # Compaction temporelle (contrainte souple)
  compaction_temporelle_actif: true
  compaction_penalites_par_semaine: [0, 0, 5, 10, 10, 15, 20, 35]  # Pénalité par semaine (indice 0 = semaine 1)
  
  # Overlaps institution (contrainte souple)
  overlap_institution_actif: true
  overlap_institution_poids: 10.0     # Pénalité pour matchs simultanés de même institution
  
  # Ententes (matchs entre institutions spécifiques - pénalité réduite si non planifiés)
  entente_actif: true
  entente_penalite_non_planif: 20.0  # Pénalité par défaut si match entente non planifié
  
  # Contraintes temporelles (matchs à planifier avant/après une semaine - ex: CFE)
  contrainte_temporelle_actif: true
  contrainte_temporelle_penalite: 100.0  # Pénalité si contrainte violée (mode souple)
  contrainte_temporelle_dure: false  # true = bloquant (impossible de violer), false = souple (pénalité)
  
  # Espacement aller-retour (pour poules de type Aller-Retour uniquement)
  # Cette contrainte force un espacement minimum entre les matchs aller et retour
  aller_retour_espacement_actif: true  # Activer/désactiver la contrainte
  aller_retour_min_semaines: 2  # Espacement minimum souhaité en semaines
  aller_retour_penalite_meme_semaine: 5000.0  # Pénalité si aller et retour dans même semaine (très élevé)
  aller_retour_penalite_consecutives: 2000.0  # Pénalité si aller et retour dans semaines consécutives

# Paramètres avancés
extra:
  afficher_progression: true
  niveau_log: 1
