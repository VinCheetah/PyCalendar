<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyCalendar - Calendrier Sportif</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
/* PyCalendar Pro - Styles Modulaires */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Palette Tricolore Française Moderne */
    /* Bleus - Inspirés du drapeau */
    --primary: #0055A4;              /* Bleu France classique */
    --primary-hover: #1E3A8A;        /* Bleu Marine Royal */
    --primary-light: rgba(0, 85, 164, 0.08);
    --primary-lighter: #EFF6FF;      /* Bleu très clair pour fonds */
    
    /* Rouges - Élégants et modernes (palette étendue) */
    --danger: #EF4444;               /* Rouge Marianne vif */
    --danger-dark: #DC2626;          /* Rouge Bordeaux */
    --danger-darker: #B91C1C;        /* Rouge sombre intense */
    --danger-deepest: #991B1B;       /* Rouge très profond */
    --danger-light: rgba(239, 68, 68, 0.1);
    --danger-glow: rgba(239, 68, 68, 0.3); /* Pour effets de lueur */
    
    /* Couleurs complémentaires */
    --secondary: #10B981;            /* Vert Émeraude pour succès */
    --secondary-light: rgba(16, 185, 129, 0.1);
    --warning: #F59E0B;              /* Or pour importance */
    --warning-light: rgba(245, 158, 11, 0.1);
    
    /* Violets - Modernité et élégance */
    --accent: #8B5CF6;               /* Violet Royal */
    --accent-light: rgba(139, 92, 246, 0.1);
    
    /* Gris sophistiqués */
    --dark: #1E293B;                 /* Gris ardoise foncé */
    --gray: #64748B;                 /* Gris ardoise moyen */
    --gray-light: #94A3B8;           /* Gris ardoise clair */
    --light: #F8FAFC;                /* Blanc cassé doux */
    --border: #E2E8F0;               /* Bordure douce */
    
    /* Blancs */
    --white: #FFFFFF;
    --off-white: #F1F5F9;
    
    /* Conflits - Couleurs d'alerte */
    --conflict-critical: #DC2626;    /* Rouge critique */
    --conflict-warning: #F59E0B;     /* Orange avertissement */
    --conflict-border: 3px;          /* Épaisseur bordure conflit */
    --conflict-glow: 0 0 12px rgba(220, 38, 38, 0.4);
    
    /* Couleurs Genre - Palette française */
    --male: #3B82F6;                 /* Bleu ciel vif */
    --male-dark: #2563EB;
    --male-light: rgba(59, 130, 246, 0.12);
    --female: #EC4899;               /* Rose Marianne */
    --female-dark: #DB2777;
    --female-light: rgba(236, 72, 153, 0.12);
    
    /* Couleurs Catégories - Harmonieuses */
    --cat-a1: #8B5CF6;               /* Violet Royal */
    --cat-a2: #6366F1;               /* Indigo */
    --cat-a3: #3B82F6;               /* Bleu ciel */
    --cat-a4: #14B8A6;               /* Turquoise */
    
    /* Ombres */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
    
    /* Système de colonnes pour les cartes de match */
    --cards-columns: 3;
    --card-scale: 1;
    --card-padding: calc(1.25rem * var(--card-scale));
    --card-gap: calc(1.25rem * var(--card-scale));
    --font-scale: 1;
}

/* ==================== MODES COLONNES (2 à 8) ==================== */

/* Mode 2 colonnes - Large et aéré */
.view-2 .matches-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 1.5rem !important;
}

.view-2 .match-card {
    font-size: 1.3em !important;
    padding: 1.1rem 1.35rem !important;
    height: 270px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.view-2 .match-header {
    margin-bottom: 0 !important;
    padding-bottom: 0.7rem;
    flex-shrink: 0;
}

.view-2 .match-teams-container {
    margin: 0 !important;
    padding: 0 !important;
    flex-grow: 1;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: center;
    justify-items: center;
}

.view-2 .match-footer {
    margin-top: 0 !important;
    padding-top: 0.7rem;
    flex-shrink: 0;
}

.view-2 .team-name {
    font-size: 1.18em;
    line-height: 1.4;
}

.view-2 .match-time {
    font-size: 1.05em;
    padding: 0.45rem 0.8rem !important;
}

.view-2 .match-venue {
    font-size: 1.05em;
    padding: 0.6rem 1rem !important;
}

.view-2 .venue-icon {
    font-size: 1.15rem !important;
}

.view-2 .vs-circle {
    width: 42px !important;
    height: 42px !important;
    min-width: 42px !important;
    min-height: 42px !important;
}

.view-2 .vs-text {
    font-size: 0.88rem !important;
}

/* Mode 3 colonnes (par défaut) - Équilibré */
.view-3 .matches-grid,
.view-compact .matches-grid {
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 1.25rem !important;
}

.view-3 .match-card,
.view-compact .match-card {
    font-size: 1.15em !important;
    padding: 0.95rem 1.1rem !important;
    height: 240px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.view-3 .match-header {
    margin-bottom: 0 !important;
    padding-bottom: 0.65rem;
    flex-shrink: 0;
}

.view-3 .match-teams-container {
    margin: 0 !important;
    padding: 0 !important;
    flex-grow: 1;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: center;
    justify-items: center;
}

.view-3 .match-footer {
    margin-top: 0 !important;
    padding-top: 0.65rem;
    flex-shrink: 0;
}

.view-3 .team-name {
    font-size: 1.08em;
    line-height: 1.35;
}

.view-3 .match-time {
    font-size: 0.98em;
    padding: 0.38rem 0.7rem !important;
}

.view-3 .match-venue {
    font-size: 0.98em;
    padding: 0.55rem 0.9rem !important;
}

.view-3 .venue-icon {
    font-size: 1.05rem !important;
}

.view-3 .vs-circle {
    width: 38px !important;
    height: 38px !important;
    min-width: 38px !important;
    min-height: 38px !important;
}

.view-3 .vs-text {
    font-size: 0.8rem !important;
}

/* Mode 4 colonnes - Compact */
.view-4 .matches-grid,
.view-normal .matches-grid {
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 1rem !important;
}

.view-4 .match-card,
.view-normal .match-card {
    font-size: 1.02em !important;
    padding: 0.75rem 0.85rem !important;
    height: 200px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.view-4 .match-header {
    margin-bottom: 0 !important;
    padding-bottom: 0.55rem;
    flex-shrink: 0;
}

.view-4 .match-teams-container {
    margin: 0 !important;
    padding: 0 !important;
    flex-grow: 1;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: center;
    justify-items: center;
}

.view-4 .match-footer {
    margin-top: 0 !important;
    padding-top: 0.55rem;
    flex-shrink: 0;
}

.view-4 .team-name {
    font-size: 1.02em;
    line-height: 1.28;
}

.view-4 .match-card .badge,
.view-normal .match-card .badge {
    font-size: 0.72rem;
    padding: 0.22rem 0.5rem;
}

.view-4 .teams-container,
.view-normal .teams-container {
    gap: 0.5rem;
}

.view-4 .match-time {
    font-size: 0.9em;
    padding: 0.34rem 0.62rem !important;
}

.view-4 .match-venue {
    font-size: 0.9em;
    padding: 0.48rem 0.78rem !important;
}

.view-4 .venue-icon {
    font-size: 0.95rem !important;
}

.view-4 .vs-circle {
    width: 34px !important;
    height: 34px !important;
    min-width: 34px !important;
    min-height: 34px !important;
}

.view-4 .vs-text {
    font-size: 0.72rem !important;
}

/* Mode 5 colonnes - Très compact */
.view-5 .matches-grid,
.view-large .matches-grid {
    grid-template-columns: repeat(5, 1fr) !important;
    gap: 0.85rem !important;
}

.view-5 .match-card,
.view-large .match-card {
    font-size: 0.88em !important;
    padding: 0.65rem 0.73rem !important;
    height: 175px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.view-5 .match-header {
    margin-bottom: 0 !important;
    padding-bottom: 0.48rem;
    flex-shrink: 0;
}

.view-5 .match-teams-container {
    margin: 0 !important;
    padding: 0 !important;
    flex-grow: 1;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: center;
    justify-items: center;
}

.view-5 .match-footer {
    margin-top: 0 !important;
    padding-top: 0.48rem;
    flex-shrink: 0;
}

.view-5 .team-name {
    font-size: 0.96em;
    line-height: 1.22;
}

.view-5 .match-card .badge,
.view-large .match-card .badge {
    font-size: 0.66rem;
    padding: 0.18rem 0.42rem;
}

.view-5 .teams-container,
.view-large .teams-container {
    gap: 0.4rem;
}

.view-5 .match-time {
    font-size: 0.85em;
    padding: 0.29rem 0.56rem !important;
}

.view-5 .match-venue,
.view-large .match-card .match-venue {
    font-size: 0.85em;
    padding: 0.42rem 0.68rem !important;
}

.view-5 .venue-icon {
    font-size: 0.88rem !important;
}

.view-5 .vs-circle {
    width: 30px !important;
    height: 30px !important;
    min-width: 30px !important;
    min-height: 30px !important;
}

.view-5 .vs-text {
    font-size: 0.64rem !important;
}

/* Mode 6 colonnes - Dense */
.view-6 .matches-grid {
    grid-template-columns: repeat(6, 1fr) !important;
    gap: 0.7rem !important;
}

.view-6 .match-card {
    font-size: 0.79em !important;
    padding: 0.56rem 0.62rem !important;
    height: 155px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.view-6 .match-header {
    margin-bottom: 0 !important;
    padding-bottom: 0.4rem;
    flex-shrink: 0;
}

.view-6 .match-teams-container {
    margin: 0 !important;
    padding: 0 !important;
    flex-grow: 1;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: center;
    justify-items: center;
}

.view-6 .match-footer {
    margin-top: 0 !important;
    padding-top: 0.4rem;
    flex-shrink: 0;
}

.view-6 .team-name {
    font-size: 0.92em;
    line-height: 1.17;
}

.view-6 .match-card .badge {
    font-size: 0.6rem;
    padding: 0.15rem 0.35rem;
    letter-spacing: 0.15px;
}

.view-6 .teams-container {
    gap: 0.32rem;
}

.view-6 .match-time {
    font-size: 0.79em;
    padding: 0.25rem 0.49rem !important;
}

.view-6 .match-venue {
    font-size: 0.79em;
    padding: 0.36rem 0.59rem !important;
}

.view-6 .venue-icon {
    font-size: 0.82rem !important;
}

.view-6 .vs-circle {
    width: 28px !important;
    height: 28px !important;
    min-width: 28px !important;
    min-height: 28px !important;
}

.view-6 .vs-text {
    font-size: 0.58rem !important;
}

/* Mode 7 colonnes - Très dense */
.view-7 .matches-grid {
    grid-template-columns: repeat(7, 1fr) !important;
    gap: 0.55rem !important;
}

.view-7 .match-card {
    font-size: 0.72em !important;
    padding: 0.5rem 0.56rem !important;
    height: 140px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.view-7 .match-header {
    margin-bottom: 0 !important;
    padding-bottom: 0.35rem;
    flex-shrink: 0;
}

.view-7 .match-teams-container {
    margin: 0 !important;
    padding: 0 !important;
    flex-grow: 1;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: center;
    justify-items: center;
}

.view-7 .match-footer {
    margin-top: 0 !important;
    padding-top: 0.35rem;
    flex-shrink: 0;
}

.view-7 .team-name {
    font-size: 0.88em;
    line-height: 1.12;
}

.view-7 .match-card .badge {
    font-size: 0.56rem;
    padding: 0.13rem 0.31rem;
    letter-spacing: 0.1px;
}

.view-7 .teams-container {
    gap: 0.28rem;
}

.view-7 .match-time {
    font-size: 0.75em;
    padding: 0.23rem 0.44rem !important;
}

.view-7 .match-venue {
    font-size: 0.75em;
    padding: 0.31rem 0.52rem !important;
}

.view-7 .venue-icon {
    font-size: 0.76rem !important;
}

.view-7 .vs-circle {
    width: 26px !important;
    height: 26px !important;
    min-width: 26px !important;
    min-height: 26px !important;
}

.view-7 .vs-text {
    font-size: 0.54rem !important;
}

/* Mode 8 colonnes - Maximum densité */
.view-8 .matches-grid {
    grid-template-columns: repeat(8, 1fr) !important;
    gap: 0.45rem !important;
}

.view-8 .match-card {
    font-size: 0.67em !important;
    padding: 0.46rem 0.52rem !important;
    height: 128px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
}

.view-8 .match-header {
    margin-bottom: 0 !important;
    padding-bottom: 0.32rem;
    flex-shrink: 0;
}

.view-8 .match-teams-container {
    margin: 0 !important;
    padding: 0 !important;
    flex-grow: 1;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: center;
    justify-items: center;
}

.view-8 .match-footer {
    margin-top: 0 !important;
    padding-top: 0.32rem;
    flex-shrink: 0;
}

.view-8 .team-name {
    font-size: 0.84em;
    line-height: 1.07;
}

.view-8 .match-card .badge {
    font-size: 0.53rem;
    padding: 0.11rem 0.27rem;
    letter-spacing: 0.05px;
}

.view-8 .teams-container {
    gap: 0.23rem;
}

.view-8 .match-time {
    font-size: 0.71em;
    padding: 0.21rem 0.39rem !important;
}

.view-8 .match-venue {
    font-size: 0.71em;
    padding: 0.29rem 0.46rem !important;
}

.view-8 .venue-icon {
    font-size: 0.7rem !important;
}

.view-8 .vs-circle {
    width: 24px !important;
    height: 24px !important;
    min-width: 24px !important;
    min-height: 24px !important;
}

.view-8 .vs-text {
    font-size: 0.5rem !important;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    /* Gradient tricolore sophistiqué avec dominance rouge élégante */
    background: 
        /* Couche 1: Pattern géométrique subtil */
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 35px,
            rgba(239, 68, 68, 0.03) 35px,
            rgba(239, 68, 68, 0.03) 70px
        ),
        repeating-linear-gradient(
            -45deg,
            transparent,
            transparent 35px,
            rgba(0, 85, 164, 0.02) 35px,
            rgba(0, 85, 164, 0.02) 70px
        ),
        /* Couche 2: Gradient radial rouge central */
        radial-gradient(
            ellipse at 30% 20%,
            rgba(239, 68, 68, 0.25) 0%,
            transparent 50%
        ),
        radial-gradient(
            ellipse at 70% 80%,
            rgba(220, 38, 38, 0.2) 0%,
            transparent 50%
        ),
        /* Couche 3: Touches de lumière bleue */
        radial-gradient(
            circle at 85% 15%,
            rgba(59, 130, 246, 0.15) 0%,
            transparent 40%
        ),
        radial-gradient(
            circle at 15% 85%,
            rgba(0, 85, 164, 0.12) 0%,
            transparent 45%
        ),
        /* Couche 4: Gradient de base sophistiqué */
        linear-gradient(
            135deg, 
            #DC2626 0%,           /* Rouge Bordeaux intense */
            #EF4444 15%,          /* Rouge vif */
            #1E3A8A 35%,          /* Bleu marine */
            #0055A4 50%,          /* Bleu France */
            #EF4444 70%,          /* Retour rouge */
            #DC2626 85%,          /* Rouge profond */
            #991B1B 100%          /* Rouge sombre final */
        );
    background-attachment: fixed;
    background-size: 70px 70px, 70px 70px, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%;
    min-height: 100vh;
    padding: 2rem;
    color: var(--dark);
    line-height: 1.6;
    position: relative;
    /* Animation subtile de respiration */
    animation: backgroundPulse 20s ease-in-out infinite;
}

/* Animation douce du background */
@keyframes backgroundPulse {
    0%, 100% {
        filter: brightness(1) contrast(1);
    }
    50% {
        filter: brightness(1.05) contrast(1.02);
    }
}

/* Particules lumineuses flottantes - effet sophistiqué */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    background-image: 
        /* Particules rouges grandes */
        radial-gradient(circle at 15% 25%, var(--danger-glow) 0%, transparent 2%),
        radial-gradient(circle at 85% 15%, var(--danger-glow) 0%, transparent 1.5%),
        radial-gradient(circle at 45% 85%, var(--danger-glow) 0%, transparent 2.5%),
        radial-gradient(circle at 92% 75%, rgba(220, 38, 38, 0.25) 0%, transparent 1.8%),
        /* Particules bleues petites */
        radial-gradient(circle at 25% 65%, rgba(0, 85, 164, 0.2) 0%, transparent 1.2%),
        radial-gradient(circle at 70% 45%, rgba(59, 130, 246, 0.18) 0%, transparent 1%),
        radial-gradient(circle at 55% 20%, rgba(0, 85, 164, 0.15) 0%, transparent 1.5%),
        /* Particules rouges moyennes */
        radial-gradient(circle at 35% 50%, var(--danger-glow) 0%, transparent 1.3%),
        radial-gradient(circle at 80% 90%, rgba(239, 68, 68, 0.22) 0%, transparent 1.7%);
    animation: particlesFloat 40s ease-in-out infinite;
    opacity: 0.6;
}

/* Deuxième couche de particules plus petites */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    background-image: 
        /* Micro-particules rouges scintillantes */
        radial-gradient(circle at 12% 18%, var(--danger-glow) 0%, transparent 0.8%),
        radial-gradient(circle at 88% 22%, rgba(220, 38, 38, 0.3) 0%, transparent 0.6%),
        radial-gradient(circle at 42% 78%, var(--danger-glow) 0%, transparent 0.7%),
        radial-gradient(circle at 68% 35%, rgba(239, 68, 68, 0.25) 0%, transparent 0.9%),
        radial-gradient(circle at 30% 92%, var(--danger-glow) 0%, transparent 0.8%),
        radial-gradient(circle at 75% 65%, rgba(220, 38, 38, 0.28) 0%, transparent 0.6%),
        radial-gradient(circle at 50% 50%, rgba(239, 68, 68, 0.2) 0%, transparent 0.5%);
    animation: particlesFloat 25s ease-in-out infinite reverse;
    opacity: 0.5;
}

@keyframes particlesFloat {
    0%, 100% {
        transform: translateY(0) scale(1);
        opacity: 0.6;
    }
    25% {
        transform: translateY(-20px) scale(1.1);
        opacity: 0.7;
    }
    50% {
        transform: translateY(-10px) scale(1.05);
        opacity: 0.5;
    }
    75% {
        transform: translateY(-30px) scale(0.95);
        opacity: 0.8;
    }
}

.app-container {
    max-width: 1600px;
    margin: 0 auto;
    background: var(--white);
    border-radius: 24px;
    box-shadow: 
        /* Ombre principale profonde */
        0 25px 50px -12px rgba(220, 38, 38, 0.4),
        0 35px 60px -15px rgba(0, 0, 0, 0.3),
        /* Bordure lumineuse rouge */
        0 0 0 1px rgba(239, 68, 68, 0.2),
        /* Halo rouge subtil */
        0 0 40px rgba(239, 68, 68, 0.15),
        /* Ombre interne pour profondeur */
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
    overflow: hidden;
    position: relative;
    z-index: 10; /* Au-dessus des particules */
}

/* ==================== HEADER ==================== */

.header {
    /* Gradient tricolore élégant avec dominance rouge */
    background: 
        /* Pattern en losange */
        repeating-conic-gradient(
            from 45deg at 10% 50%,
            rgba(239, 68, 68, 0.05) 0deg 90deg,
            transparent 90deg 180deg
        ),
        repeating-conic-gradient(
            from -45deg at 90% 50%,
            rgba(0, 85, 164, 0.03) 0deg 90deg,
            transparent 90deg 180deg
        ),
        /* Gradient principal avec rouge dominant */
        linear-gradient(135deg, 
            #DC2626 0%,              /* Rouge Bordeaux */
            #EF4444 20%,             /* Rouge vif */
            var(--primary-hover) 45%, 
            var(--primary) 55%, 
            #EF4444 75%,             /* Retour rouge */
            #B91C1C 100%             /* Rouge sombre */
        );
    color: var(--white);
    padding: 2.5rem;
    position: relative;
    overflow: hidden;
}

/* Effet de texture sophistiquée avec animation */
.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        /* Lignes diagonales */
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 10px,
            rgba(255, 255, 255, 0.04) 10px,
            rgba(255, 255, 255, 0.04) 20px
        ),
        /* Points lumineux */
        radial-gradient(
            circle at 20% 30%,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 3%
        ),
        radial-gradient(
            circle at 80% 70%,
            rgba(239, 68, 68, 0.15) 0%,
            transparent 5%
        );
    pointer-events: none;
    animation: headerShimmer 15s linear infinite;
}

/* Effet de vague rouge animée */
.header::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    right: -50%;
    bottom: -50%;
    background: radial-gradient(
        circle at center,
        rgba(239, 68, 68, 0.15) 0%,
        transparent 50%
    );
    animation: waveRotate 30s linear infinite;
    pointer-events: none;
}

@keyframes headerShimmer {
    0% {
        transform: translateX(-50px);
    }
    100% {
        transform: translateX(50px);
    }
}

@keyframes waveRotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.header-title {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 0.5rem;
    position: relative;
    z-index: 1;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
    letter-spacing: -0.5px;
}

.header-subtitle {
    font-size: 1.125rem;
    opacity: 0.95;
    position: relative;
    z-index: 1;
    font-weight: 400;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin-top: 2rem;
}

.stat-card {
    background: rgba(255, 255, 255, 0.18);
    backdrop-filter: blur(12px);
    border: 1.5px solid rgba(255, 255, 255, 0.25);
    border-radius: 16px;
    padding: 1.25rem;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    z-index: 1;
    /* Ombre rouge subtile */
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.1);
}

.stat-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    padding: 1.5px;
    background: linear-gradient(135deg, 
        rgba(255,255,255,0.4), 
        rgba(239, 68, 68, 0.2),
        rgba(255,255,255,0.1));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, 
                  linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask: linear-gradient(#fff 0 0) content-box, 
          linear-gradient(#fff 0 0);
    mask-composite: exclude;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.35s;
}

.stat-card:hover {
    background: rgba(255, 255, 255, 0.28);
    transform: translateY(-3px) scale(1.02);
    /* Ombre rouge plus intense au survol */
    box-shadow: 
        0 8px 24px rgba(0, 0, 0, 0.2),
        0 0 20px rgba(239, 68, 68, 0.3),
        0 0 40px rgba(239, 68, 68, 0.15);
}

.stat-card:hover::before {
    opacity: 1;
}

.stat-value {
    font-size: 2.25rem;
    font-weight: 800;
    line-height: 1;
}

.stat-label {
    font-size: 0.875rem;
    opacity: 0.9;
    margin-top: 0.5rem;
    font-weight: 500;
}

.legend-section {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
}

.legend-group {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.legend-title {
    font-weight: 600;
    font-size: 0.875rem;
}

.legend-items {
    display: flex;
    gap: 0.75rem;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.legend-badge {
    width: 20px;
    height: 20px;
    border-radius: 4px;
    border: 2px solid rgba(255, 255, 255, 0.5);
}

/* ==================== CONTROLS ==================== */

.controls-section {
    padding: 1.25rem 2rem;
    background: linear-gradient(to bottom, var(--light) 0%, var(--off-white) 100%);
    border-bottom: 2px solid var(--border);
    display: grid;
    grid-template-columns: 2fr auto 1fr;
    gap: 1.5rem;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
    transition: padding 0.3s ease;
}

/* Réduire encore plus l'espace quand les deux conteneurs sont repliés */
.controls-section:has(.control-group:first-child .collapsible-content.collapsed):has(.control-group:last-child .collapsible-content.collapsed) {
    padding: 0.75rem 2rem;
}

.controls-separator {
    width: 1px;
    background: linear-gradient(
        to bottom,
        transparent 0%,
        rgba(0, 85, 164, 0.12) 10%,
        rgba(0, 85, 164, 0.15) 50%,
        rgba(0, 85, 164, 0.12) 90%,
        transparent 100%
    );
    align-self: stretch;
}

.control-group {
    background: var(--white);
    border-radius: 16px;
    padding: 1rem 1.25rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 
                0 0 0 1px rgba(0, 85, 164, 0.05);
    transition: all 0.3s;
}

.control-group:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 
                0 0 0 1px rgba(0, 85, 164, 0.08);
}

/* Quand le contenu est replié, réduire encore plus le padding */
.control-group:has(.collapsible-content.collapsed) {
    padding: 0.75rem 1rem;
}

.control-group-title {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--dark);
    margin: 0;
    padding-bottom: 0;
    border-bottom: none;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.75rem;
}

/* Quand le contenu n'est pas replié, ajouter bordure en bas */
.control-group:not(:has(.collapsible-content.collapsed)) .control-group-title {
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--border);
}

/* Bouton de collapse */
.collapse-btn {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 6px rgba(0, 85, 164, 0.25);
}

.collapse-btn:hover {
    background: linear-gradient(135deg, var(--primary-hover) 0%, var(--primary) 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 85, 164, 0.35);
}

.collapse-btn:active {
    transform: translateY(0);
}

.collapse-icon {
    color: white;
    font-size: 0.75rem;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-block;
}

.collapse-btn.collapsed .collapse-icon {
    transform: rotate(-90deg);
}

/* Contenu collapsible */
.collapsible-content {
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.3s ease,
                margin-top 0.3s ease,
                padding-top 0.3s ease;
    max-height: 2000px;
    opacity: 1;
    margin-top: 1rem;
    padding-top: 0;
}

.collapsible-content.collapsed {
    max-height: 0 !important;
    opacity: 0;
    margin-top: 0 !important;
    padding-top: 0 !important;
}

.controls-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.25rem;
    align-items: end;
}

.filter-actions {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: center;
}

.display-options {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
}

.view-controls {
    display: flex;
    align-items: flex-end;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.view-controls .control-item {
    transition: opacity 0.3s ease, max-height 0.3s ease;
}

.view-controls .control-item[style*="display: none"] {
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    padding: 0;
    margin: 0;
}

.control-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    min-width: 0;
}

.control-item.full-width {
    grid-column: 1 / -1;
}

.control-label {
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--dark);
}

select {
    padding: 0.625rem 1rem;
    border: 2px solid var(--border);
    border-radius: 10px;
    font-size: 0.9375rem;
    font-weight: 500;
    background: var(--white);
    color: var(--dark);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

select:hover {
    border-color: var(--primary);
    box-shadow: 0 2px 8px rgba(0, 85, 164, 0.12);
    transform: translateY(-1px);
}

select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(0, 85, 164, 0.12), 
                0 2px 8px rgba(0, 85, 164, 0.15);
    transform: translateY(-1px);
}

.btn {
    padding: 0.625rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.9375rem;
    cursor: pointer;
    transition: all 0.3s;
    align-self: flex-end;
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    color: var(--white);
    box-shadow: 
        0 4px 12px rgba(0, 85, 164, 0.25),
        0 0 15px rgba(239, 68, 68, 0.1);
    position: relative;
    overflow: hidden;
}

.btn-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(239, 68, 68, 0.3),
        rgba(255, 255, 255, 0.3), 
        transparent);
    transition: left 0.5s;
}

.btn-primary:hover::before {
    left: 100%;
}

.btn-primary:hover {
    background: linear-gradient(135deg, var(--primary-hover) 0%, #1E3A8A 100%);
    transform: translateY(-2px);
    box-shadow: 
        0 6px 20px rgba(0, 85, 164, 0.35),
        0 0 25px rgba(239, 68, 68, 0.3),
        0 0 50px rgba(239, 68, 68, 0.1);
}

.btn-primary:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0, 85, 164, 0.3);
}

.btn-reset {
    font-size: 0.9375rem;
    padding: 0.75rem 1.5rem;
    white-space: nowrap;
}

/* Bouton Reset compact dans le titre */
.btn-reset-compact {
    width: 32px;
    height: 32px;
    padding: 0;
    font-size: 1rem;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    flex-shrink: 0;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    border: none;
    box-shadow: 0 2px 6px rgba(239, 68, 68, 0.25);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-reset-compact:hover {
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    transform: translateY(-2px) rotate(180deg);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.35);
}

.btn-reset-compact:active {
    transform: translateY(0) rotate(180deg);
}

.btn-secondary {
    background: white;
    color: var(--primary);
    border: 2px solid var(--primary);
}

.btn-secondary:hover {
    background: var(--primary);
    color: white;
}

/* Genre Filter */
.gender-filter {
    display: flex;
    gap: 0.5rem;
    width: 100%;
}

.gender-btn {
    flex: 1;
    padding: 0.625rem 0.75rem;
    background: white;
    color: var(--gray);
    border: 2px solid var(--border);
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.8125rem;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
    white-space: nowrap;
    min-width: 0;
}

.gender-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
}

.gender-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
}

.gender-btn.male.active {
    background: var(--male);
    border-color: var(--male);
}

.gender-btn.female.active {
    background: var(--female);
    border-color: var(--female);
}

/* Toggle Switch */
.toggle-container {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 1rem;
    background: white;
    border: 2px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    overflow: hidden;
}

.toggle-container[style*="display: none"] {
    opacity: 0;
    max-height: 0;
    padding: 0;
    margin: 0;
    border-width: 0;
}

.toggle-container:hover {
    border-color: var(--primary);
    box-shadow: 0 2px 8px rgba(79, 70, 229, 0.15);
}

.toggle-switch {
    position: relative;
    width: 44px;
    height: 24px;
    background: var(--border);
    border-radius: 12px;
    transition: background 0.3s;
}

.toggle-switch::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: white;
    top: 2px;
    left: 2px;
    transition: transform 0.3s;
}

.toggle-container.active .toggle-switch {
    background: linear-gradient(135deg, var(--primary) 0%, var(--male) 100%);
    box-shadow: 0 0 12px rgba(0, 85, 164, 0.4);
}

.toggle-container.active .toggle-switch::after {
    transform: translateX(20px);
}

.toggle-label {
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--dark);
    user-select: none;
}

/* Sélecteur de mode de couleur */
.color-mode-selector {
    display: block;
    padding: 1rem;
    background: white;
    border: 2px solid var(--border);
    border-radius: 12px;
    margin-top: 1rem;
}

.color-mode-selector .control-label {
    display: block;
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--dark);
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.color-mode-select {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--dark);
    background: var(--light);
    border: 2px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231E293B' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    padding-right: 3rem;
}

.color-mode-select:hover {
    border-color: var(--primary);
    background-color: var(--primary-lighter);
}

.color-mode-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(0, 85, 164, 0.1);
}

/* Zoom Control */
.zoom-control {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 1rem;
    background: white;
    border: 2px solid var(--border);
    border-radius: 8px;
}

.zoom-btn {
    background: var(--light);
    border: none;
    border-radius: 6px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 700;
    color: var(--dark);
}

.zoom-btn:hover {
    background: var(--primary);
    color: white;
}

.zoom-value {
    min-width: 60px;
    text-align: center;
    font-weight: 600;
    font-size: 0.875rem;
}

/* Compact Controls */
.compact-controls {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--border);
}

.compact-control {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.375rem 0;
}

.compact-btn {
    background: var(--light);
    border: 1px solid var(--border);
    border-radius: 4px;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.15s;
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--gray);
}

.compact-btn:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.compact-btn:active {
    transform: scale(0.95);
}

.compact-value {
    min-width: 70px;
    text-align: center;
    font-weight: 500;
    font-size: 0.75rem;
    color: var(--gray);
}

/* ==================== TABS ==================== */

.tabs-nav {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
    border-bottom: 2px solid var(--border);
    padding-bottom: 0;
    overflow-x: auto;
}

.tab-btn {
    padding: 1rem 1.5rem;
    background: transparent;
    border: none;
    color: var(--gray);
    font-weight: 600;
    font-size: 0.9375rem;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;
    margin-bottom: -2px;
    position: relative;
}

.tab-btn::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%) scaleX(0);
    width: 80%;
    height: 3px;
    background: linear-gradient(90deg, 
        var(--primary) 0%, 
        var(--male) 50%, 
        var(--secondary) 100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 3px 3px 0 0;
}

.tab-btn:hover {
    color: var(--primary);
    background: linear-gradient(to bottom, 
        transparent 0%, 
        var(--primary-lighter) 100%);
}

.tab-btn.active {
    color: var(--primary);
}

.tab-btn.active::before {
    transform: translateX(-50%) scaleX(1);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==================== CONTENT ==================== */

.content-section {
    padding: 2.5rem;
}

/* ==================== MATCH CARDS (Vue Cartes) ==================== */

.week-section {
    margin-bottom: 2.5rem;
}

.week-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.25rem 1.5rem;
    background: linear-gradient(135deg, 
        var(--primary) 0%, 
        var(--primary-hover) 100%);
    color: var(--white);
    border-radius: 12px 12px 0 0;
    font-weight: 700;
    box-shadow: 0 2px 8px rgba(0, 85, 164, 0.2);
    position: relative;
}

.week-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        var(--danger) 0%, 
        var(--warning) 50%, 
        var(--secondary) 100%);
    opacity: 0.6;
}

.week-title {
    font-size: calc(1.375rem * var(--font-scale));
}

.week-count {
    font-size: calc(0.9375rem * var(--font-scale));
    opacity: 0.9;
}

.matches-grid {
    display: grid;
    grid-template-columns: repeat(var(--cards-columns), 1fr);
    gap: var(--card-gap);
    padding: 1.5rem;
    background: var(--light);
    border-radius: 0 0 12px 12px;
}

.match-card {
    background: var(--white);
    border-radius: calc(16px * var(--card-scale));
    padding: var(--card-padding);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1), 
                0 0 0 1px rgba(0, 85, 164, 0.08);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-left: calc(6px * var(--card-scale)) solid var(--primary);
    position: relative;
    overflow: hidden;
}

/* ==================== MODE DE COLORATION: GENRE (défaut) ==================== */

/* Fonds colorés selon le genre - Design amélioré */
.color-genre .match-card.male {
    background: linear-gradient(135deg, 
        rgba(59, 130, 246, 0.15) 0%, 
        rgba(96, 165, 250, 0.08) 50%,
        rgba(147, 197, 253, 0.05) 100%);
    border-left-color: #2563EB;
}

.color-genre .match-card.female {
    background: linear-gradient(135deg, 
        rgba(236, 72, 153, 0.15) 0%, 
        rgba(244, 114, 182, 0.08) 50%,
        rgba(251, 182, 206, 0.05) 100%);
    border-left-color: #DB2777;
}

.color-genre .match-card.male::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        #3B82F6 0%, 
        #60A5FA 50%, 
        #93C5FD 100%);
    opacity: 0.8;
}

.color-genre .match-card.female::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        #EC4899 0%, 
        #F472B6 50%, 
        #FBB6CE 100%);
    opacity: 0.8;
}

/* ==================== MODE DE COLORATION: NIVEAU ==================== */

.color-level .match-card[data-category="a1"] {
    background: linear-gradient(135deg, 
        rgba(139, 92, 246, 0.15) 0%, 
        rgba(167, 139, 250, 0.08) 50%,
        rgba(196, 181, 253, 0.05) 100%);
    border-left-color: #7C3AED;
}

.color-level .match-card[data-category="a2"] {
    background: linear-gradient(135deg, 
        rgba(99, 102, 241, 0.15) 0%, 
        rgba(129, 140, 248, 0.08) 50%,
        rgba(165, 180, 252, 0.05) 100%);
    border-left-color: #4F46E5;
}

.color-level .match-card[data-category="a3"] {
    background: linear-gradient(135deg, 
        rgba(59, 130, 246, 0.15) 0%, 
        rgba(96, 165, 250, 0.08) 50%,
        rgba(147, 197, 253, 0.05) 100%);
    border-left-color: #2563EB;
}

.color-level .match-card[data-category="a4"] {
    background: linear-gradient(135deg, 
        rgba(20, 184, 166, 0.15) 0%, 
        rgba(45, 212, 191, 0.08) 50%,
        rgba(94, 234, 212, 0.05) 100%);
    border-left-color: #0D9488;
}

/* ==================== MODE DE COLORATION: LES DEUX (GENRE + NIVEAU) ==================== */

/* A1 */
.color-both .match-card.male[data-category="a1"] {
    background: linear-gradient(135deg, 
        rgba(109, 40, 217, 0.15) 0%, 
        rgba(124, 58, 237, 0.08) 50%,
        rgba(139, 92, 246, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #6D28D9 0%, #3B82F6 100%) 1;
}

.color-both .match-card.female[data-category="a1"] {
    background: linear-gradient(135deg, 
        rgba(157, 23, 77, 0.15) 0%, 
        rgba(190, 24, 93, 0.08) 50%,
        rgba(219, 39, 119, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #9D174D 0%, #EC4899 100%) 1;
}

/* A2 */
.color-both .match-card.male[data-category="a2"] {
    background: linear-gradient(135deg, 
        rgba(67, 56, 202, 0.15) 0%, 
        rgba(79, 70, 229, 0.08) 50%,
        rgba(99, 102, 241, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #4338CA 0%, #3B82F6 100%) 1;
}

.color-both .match-card.female[data-category="a2"] {
    background: linear-gradient(135deg, 
        rgba(190, 24, 93, 0.15) 0%, 
        rgba(219, 39, 119, 0.08) 50%,
        rgba(236, 72, 153, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #BE185D 0%, #F472B6 100%) 1;
}

/* A3 */
.color-both .match-card.male[data-category="a3"] {
    background: linear-gradient(135deg, 
        rgba(29, 78, 216, 0.15) 0%, 
        rgba(37, 99, 235, 0.08) 50%,
        rgba(59, 130, 246, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #1D4ED8 0%, #60A5FA 100%) 1;
}

.color-both .match-card.female[data-category="a3"] {
    background: linear-gradient(135deg, 
        rgba(219, 39, 119, 0.15) 0%, 
        rgba(236, 72, 153, 0.08) 50%,
        rgba(244, 114, 182, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #DB2777 0%, #FBB6CE 100%) 1;
}

/* A4 */
.color-both .match-card.male[data-category="a4"] {
    background: linear-gradient(135deg, 
        rgba(13, 148, 136, 0.15) 0%, 
        rgba(15, 118, 110, 0.08) 50%,
        rgba(20, 184, 166, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #0F766E 0%, #2DD4BF 100%) 1;
}

.color-both .match-card.female[data-category="a4"] {
    background: linear-gradient(135deg, 
        rgba(244, 114, 182, 0.15) 0%, 
        rgba(249, 168, 212, 0.08) 50%,
        rgba(251, 207, 232, 0.05) 100%);
    border-left: 6px solid;
    border-image: linear-gradient(180deg, #F472B6 0%, #FBCFE8 100%) 1;
}

/* ==================== MODE DE COLORATION: PAR POULE ==================== */

.color-pool .match-card {
    /* Générer des couleurs basées sur un hash de la poule */
    border-left-width: 6px;
}

.color-pool .match-card[data-pool*="A1"] {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(196, 181, 253, 0.05) 100%);
    border-left-color: #8B5CF6;
}

.color-pool .match-card[data-pool*="A2"] {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.12) 0%, rgba(165, 180, 252, 0.05) 100%);
    border-left-color: #6366F1;
}

.color-pool .match-card[data-pool*="A3"] {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(147, 197, 253, 0.05) 100%);
    border-left-color: #3B82F6;
}

.color-pool .match-card[data-pool*="A4"] {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.12) 0%, rgba(94, 234, 212, 0.05) 100%);
    border-left-color: #14B8A6;
}

/* ==================== MODE DE COLORATION: PAR INSTITUTION ==================== */

.color-institution .match-card {
    border-left-width: 6px;
}

/* On va utiliser une palette de couleurs pour les institutions principales */
.color-institution .match-card[data-institution1="LYON 1"],
.color-institution .match-card[data-institution2="LYON 1"] {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.12) 0%, rgba(252, 165, 165, 0.05) 100%);
    border-left-color: #DC2626;
}

.color-institution .match-card[data-institution1="LYON 2"],
.color-institution .match-card[data-institution2="LYON 2"] {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.12) 0%, rgba(251, 191, 36, 0.05) 100%);
    border-left-color: #D97706;
}

.color-institution .match-card[data-institution1="LYON 3"],
.color-institution .match-card[data-institution2="LYON 3"] {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(110, 231, 183, 0.05) 100%);
    border-left-color: #059669;
}

.color-institution .match-card[data-institution1="INSA"],
.color-institution .match-card[data-institution2="INSA"] {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(147, 197, 253, 0.05) 100%);
    border-left-color: #2563EB;
}

.color-institution .match-card[data-institution1="ECL"],
.color-institution .match-card[data-institution2="ECL"] {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(196, 181, 253, 0.05) 100%);
    border-left-color: #7C3AED;
}

.color-institution .match-card[data-institution1="ENTPE"],
.color-institution .match-card[data-institution2="ENTPE"] {
    background: linear-gradient(135deg, rgba(236, 72, 153, 0.12) 0%, rgba(251, 182, 206, 0.05) 100%);
    border-left-color: #DB2777;
}

.color-institution .match-card[data-institution1="ENS"],
.color-institution .match-card[data-institution2="ENS"] {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.12) 0%, rgba(165, 180, 252, 0.05) 100%);
    border-left-color: #4F46E5;
}

.color-institution .match-card[data-institution1="EML"],
.color-institution .match-card[data-institution2="EML"] {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.12) 0%, rgba(94, 234, 212, 0.05) 100%);
    border-left-color: #0D9488;
}

/* ==================== AMÉLIORATION HOVER POUR TOUS LES MODES ==================== */

.match-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 16px 32px rgba(0, 0, 0, 0.18), 
                0 0 0 2px rgba(0, 85, 164, 0.15);
}

.match-card.male {
    border-left-color: var(--male);
}

.match-card.female {
    border-left-color: var(--female);
}

.match-card.unscheduled {
    border-left-color: var(--danger);
    opacity: 0.85;
}

/* ==================== DRAG AND DROP STYLES ==================== */

/* Draggable match cards */
.match-card[draggable="true"] {
    cursor: grab;
}

.match-card[draggable="true"]:active {
    cursor: grabbing;
}

.match-card.dragging {
    opacity: 0.4;
    cursor: grabbing !important;
    transform: rotate(2deg) scale(0.98);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

/* Drag styles for calendar grid view */
.calendar-match-block[draggable="true"] {
    cursor: grab;
}

.calendar-match-block[draggable="true"]:active {
    cursor: grabbing;
}

.calendar-match-block.dragging {
    opacity: 0.5;
    cursor: grabbing !important;
    transform: scale(0.95);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    z-index: 1000;
}

/* Swap target highlighting */
.calendar-match-block.swap-target {
    cursor: copy;
}

.calendar-match-block.swap-highlight {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 8px 24px rgba(255, 193, 7, 0.4),
                0 0 0 3px rgba(255, 193, 7, 0.3);
    border-color: #FFC107 !important;
    z-index: 100;
    animation: pulse-swap 0.6s ease-in-out infinite;
}

@keyframes pulse-swap {
    0%, 100% {
        box-shadow: 0 8px 24px rgba(255, 193, 7, 0.4),
                    0 0 0 3px rgba(255, 193, 7, 0.3);
    }
    50% {
        box-shadow: 0 10px 32px rgba(255, 193, 7, 0.6),
                    0 0 0 4px rgba(255, 193, 7, 0.5);
    }
}

/* Drop zones */
.drop-zone {
    transition: background-color 0.2s ease, border 0.2s ease, box-shadow 0.2s ease;
}

.drop-zone-active {
    background-color: rgba(76, 175, 80, 0.08);
    border: 2px dashed #4CAF50 !important;
    box-shadow: inset 0 0 20px rgba(76, 175, 80, 0.15);
}

.drop-zone-invalid {
    background-color: rgba(244, 67, 54, 0.08);
    border: 2px dashed #f44336 !important;
    box-shadow: inset 0 0 20px rgba(244, 67, 54, 0.15);
    cursor: not-allowed;
}

/* Drop feedback animation */
@keyframes fadeInOut {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
    15% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    85% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
}

.drop-feedback {
    animation: fadeInOut 2s ease;
}

/* Drag ghost image effect */
.match-card[draggable="true"]::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(0, 85, 164, 0.05) 0%, rgba(16, 185, 129, 0.05) 100%);
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
}

.match-card[draggable="true"]:hover::after {
    opacity: 1;
}

/* ==================== END DRAG AND DROP STYLES ==================== */

.match-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: calc(1rem * var(--card-scale));
    padding-bottom: calc(0.75rem * var(--card-scale));
    border-bottom: 1px solid var(--border);
}

.match-badges {
    display: flex;
    gap: calc(0.5rem * var(--card-scale));
    flex-wrap: wrap;
}

.badge {
    padding: calc(0.25rem * var(--font-scale)) calc(0.75rem * var(--font-scale));
    border-radius: calc(12px * var(--card-scale));
    font-size: calc(0.75rem * var(--font-scale));
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: calc(0.5px * var(--card-scale));
}

.badge-poule {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    color: var(--white);
    box-shadow: 0 2px 8px rgba(0, 85, 164, 0.25);
}

.badge-gender-male {
    background: linear-gradient(135deg, #1E3A8A 0%, #0C1E4A 100%);
    color: #FFFFFF;
    font-weight: 800;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
    border: 2px solid #3B82F6;
}

.badge-gender-female {
    background: linear-gradient(135deg, #BE185D 0%, #831843 100%);
    color: #FFFFFF;
    font-weight: 800;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
    border: 2px solid #EC4899;
}

.badge-cat-a1 { background: var(--cat-a1); color: white; }
.badge-cat-a2 { background: var(--cat-a2); color: white; }
.badge-cat-a3 { background: var(--cat-a3); color: white; }
.badge-cat-a4 { background: var(--cat-a4); color: white; }

.badge-week {
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.25);
}

.badge-unscheduled {
    background: var(--danger);
    color: white;
}

.badge-no-score {
    background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.25);
}

.match-time {
    display: flex;
    align-items: center;
    gap: calc(0.375rem * var(--card-scale));
    color: var(--dark);
    font-size: calc(0.875rem * var(--font-scale));
    font-weight: 700;
    background: var(--primary-lighter);
    padding: calc(0.375rem * var(--card-scale)) calc(0.75rem * var(--card-scale));
    border-radius: calc(8px * var(--card-scale));
}

.time-icon {
    font-size: calc(1rem * var(--font-scale));
}

.time-value {
    font-family: 'Inter', monospace;
    letter-spacing: 0.5px;
}

/* Container des équipes - Design symétrique */
.match-teams-container {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: calc(1rem * var(--card-scale));
    align-items: center;
    justify-items: center;
    margin: calc(1.25rem * var(--card-scale)) 0;
    padding: calc(1rem * var(--card-scale)) 0;
}

.team-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: calc(0.5rem * var(--card-scale));
    width: 100%;
}

.team-block.team-1 {
    text-align: center;
}

.team-block.team-2 {
    text-align: center;
}

.team-name {
    font-size: calc(1.0625rem * var(--font-scale));
    font-weight: 600;
    color: var(--dark);
    line-height: 1.3;
    display: block;
    text-align: center;
    width: 100%;
}

.team-institution {
    font-size: calc(0.75rem * var(--font-scale));
    color: var(--gray);
    font-weight: 500;
    text-align: center;
    width: 100%;
}

/* Séparateur VS central - Design circulaire */
.vs-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    height: 100%;
}

.vs-circle {
    width: calc(48px * var(--card-scale));
    height: calc(48px * var(--card-scale));
    min-width: calc(48px * var(--card-scale));
    min-height: calc(48px * var(--card-scale));
    border-radius: 50%;
    background: linear-gradient(135deg, 
        var(--primary) 0%, 
        var(--primary-hover) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 85, 164, 0.3),
                inset 0 -2px 8px rgba(0, 0, 0, 0.1);
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
}

.vs-circle::before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 50%;
    border: 2px solid var(--primary);
    opacity: 0.3;
}

.match-card:hover .vs-circle {
    transform: scale(1.1) rotate(360deg);
    box-shadow: 0 6px 16px rgba(0, 85, 164, 0.4),
                inset 0 -2px 8px rgba(0, 0, 0, 0.15);
}

.vs-text {
    color: var(--white);
    font-weight: 800;
    font-size: calc(0.875rem * var(--font-scale));
    letter-spacing: 1px;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    text-align: center;
    display: block;
    width: 100%;
}

.score-text {
    color: var(--secondary);
    font-weight: 900;
    font-size: calc(1rem * var(--font-scale));
    letter-spacing: 0.5px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    text-align: center;
    display: block;
    width: 100%;
    background: linear-gradient(135deg, var(--secondary), var(--secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.score-display {
    background: linear-gradient(135deg, var(--success-light), rgba(16, 185, 129, 0.1));
    border: 2px solid var(--secondary);
    border-radius: 8px;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
    min-width: calc(60px * var(--card-scale));
    min-height: calc(32px * var(--card-scale));
}

/* Ancien style pour compatibilité */
.match-teams {
    font-size: calc(1.125rem * var(--font-scale));
    margin: calc(1rem * var(--card-scale)) 0;
    text-align: center;
    line-height: 1.8;
}

.team {
    font-weight: 600;
    color: var(--dark);
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
}

.team.highlighted {
    color: var(--primary);
    background: var(--primary-light);
    padding: calc(0.375rem * var(--card-scale)) calc(0.75rem * var(--card-scale));
    border-radius: calc(6px * var(--card-scale));
    font-weight: 700;
}

.vs {
    color: var(--primary);
    font-weight: 800;
    margin: 0 calc(0.75rem * var(--card-scale));
    font-size: calc(0.875rem * var(--font-scale));
}

/* Pied de carte */
.match-footer {
    margin-top: calc(1rem * var(--card-scale));
    padding-top: calc(1rem * var(--card-scale));
    border-top: 2px solid var(--border);
}

.match-venue {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(0.5rem * var(--card-scale));
    color: var(--gray);
    font-size: calc(0.875rem * var(--font-scale));
    font-weight: 600;
    background: var(--off-white);
    padding: calc(0.625rem * var(--card-scale)) calc(1rem * var(--card-scale));
    border-radius: calc(8px * var(--card-scale));
    transition: all 0.3s;
}

.match-card:hover .match-venue {
    background: linear-gradient(135deg, 
        var(--primary-lighter) 0%, 
        var(--off-white) 100%);
    color: var(--primary);
}

.venue-icon {
    font-size: calc(1.125rem * var(--font-scale));
}

.venue-name {
    font-weight: 700;
}

.match-footer.unscheduled {
    border-top-color: var(--danger-light);
}

.unscheduled-alert {
    background: linear-gradient(135deg, 
        var(--danger) 0%, 
        var(--danger-dark) 100%);
    color: var(--white);
    padding: calc(0.75rem * var(--card-scale)) calc(1rem * var(--card-scale));
    border-radius: calc(10px * var(--card-scale));
    font-weight: 700;
    font-size: calc(0.875rem * var(--font-scale));
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(0.5rem * var(--card-scale));
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.alert-icon {
    font-size: calc(1.125rem * var(--font-scale));
}

.match-institutions {
    text-align: center;
    color: var(--gray-light);
    font-size: calc(0.75rem * var(--font-scale));
    margin-top: calc(0.5rem * var(--card-scale));
}

.hide-institutions .match-institutions,
.hide-institutions .team-institution {
    display: none;
}

/* Horaires préférés */
.horaires-preferes {
    display: inline-block;
    padding: calc(0.125rem * var(--card-scale)) calc(0.5rem * var(--card-scale));
    background: var(--primary-light);
    color: var(--primary);
    border-radius: calc(4px * var(--card-scale));
    font-size: calc(0.75rem * var(--font-scale));
    font-weight: 500;
    opacity: 0;
    transition: opacity 0.3s;
    white-space: nowrap;
    text-align: center;
}

.team:first-of-type .horaires-preferes {
    margin: 0 auto;
}

.team:last-of-type .horaires-preferes {
    margin: 0 auto;
}

.show-preferences .horaires-preferes {
    opacity: 1;
}

.horaires-preferes.no-preferences {
    background: rgba(107, 114, 128, 0.08);
    color: var(--gray);
    font-style: italic;
}

/* Genre badge */
.genre-badge {
    display: inline-block;
    margin-left: 0.375rem;
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
    font-size: calc(0.625rem * var(--font-scale));
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.genre-badge.male {
    background: rgba(59, 130, 246, 0.15);
    color: var(--male);
}

.genre-badge.female {
    background: rgba(236, 72, 153, 0.15);
    color: var(--female);
}

/* Masquer badges genre si désactivé */
.hide-genre-badges .badge-gender-male,
.hide-genre-badges .badge-gender-female {
    display: none;
}

/* Masquer badge semaine si désactivé */
.hide-week-badges .badge-week {
    display: none;
}

/* Masquer badge poule si désactivé */
.hide-pool-badges .badge-poule {
    display: none;
}

/* ==================== EMPTY & SUCCESS STATES ==================== */

.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--gray);
}

.empty-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
}

.empty-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: var(--dark);
}

.empty-text {
    font-size: 1rem;
}

/* Message d'information dans le calendrier */
.calendar-empty-notice {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.04));
    border-left: 4px solid var(--primary);
    border-radius: 8px;
    margin: 1rem;
    padding: 0.75rem 1rem;
}

.empty-notice-content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.empty-notice-icon {
    font-size: 1.25rem;
    flex-shrink: 0;
}

.empty-notice-text {
    color: var(--dark);
    font-size: 0.9rem;
    line-height: 1.4;
}

.success-state {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--secondary);
}

.success-icon {
    font-size: 5rem;
    margin-bottom: 1.5rem;
}

.success-title {
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 0.75rem;
}

.success-text {
    font-size: 1.125rem;
    opacity: 0.9;
}

/* ==================== FILTER INFO ==================== */

.filter-info {
    margin: 2rem 2.5rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    color: white;
    border-radius: 12px;
    display: none;
}

.filter-info.active {
    display: block;
}

.filter-info-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.filter-info-subtitle {
    opacity: 0.9;
    margin-bottom: 1rem;
}

.filter-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 1rem;
}

.filter-stat {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
}

.filter-stat-value {
    font-size: 1.75rem;
    font-weight: 800;
}

.filter-stat-label {
    font-size: 0.75rem;
    opacity: 0.9;
    margin-top: 0.25rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* ==================== RESPONSIVE ==================== */

@media (max-width: 768px) {
    body {
        padding: 1rem;
    }
    
    .header {
        padding: 1.5rem;
    }
    
    .header-title {
        font-size: 1.75rem;
    }
    
    .controls-section {
        padding: 1rem;
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .controls-separator {
        display: none;
    }
    
    .content-section {
        padding: 1.5rem;
    }
    
    .matches-grid {
        grid-template-columns: 1fr;
    }
    
    :root {
        --card-min-width: 100%;
    }
}

/* ==================== TOOLTIPS ==================== */

[data-tooltip] {
    position: relative;
    cursor: help;
}

[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--dark);
    color: white;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    font-size: 0.75rem;
    white-space: nowrap;
    z-index: 100;
    margin-bottom: 0.5rem;
    animation: tooltipFadeIn 0.2s;
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(5px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* ==================== CALENDAR GRID VIEW (Google Calendar style) ==================== */

.calendar-grid-container {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    overflow: hidden;
}

/* Barre de navigation */
.calendar-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, 
        var(--primary-hover) 0%, 
        var(--primary) 50%, 
        #2563EB 100%);
    color: var(--white);
    gap: 1rem;
    flex-wrap: wrap;
    box-shadow: 0 4px 12px rgba(0, 85, 164, 0.2);
    position: relative;
}

.calendar-nav::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, 
        var(--danger) 0%, 
        var(--warning) 50%, 
        var(--secondary) 100%);
    opacity: 0.7;
}

.calendar-nav-left,
.calendar-nav-right {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.calendar-nav-center {
    flex: 1;
    text-align: center;
}

.calendar-title {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
}

.calendar-time-range {
    font-size: 0.85rem;
    opacity: 0.9;
    margin-top: 4px;
    font-weight: 400;
}

.btn-nav {
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.btn-nav:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-1px);
}

.btn-nav:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.view-mode-group {
    display: flex;
    gap: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    overflow: hidden;
}

.btn-view {
    padding: 0.5rem 1rem;
    background: transparent;
    border: none;
    color: white;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.btn-view.active {
    background: rgba(255, 255, 255, 0.3);
    font-weight: 600;
}

.btn-view:hover:not(.active) {
    background: rgba(255, 255, 255, 0.15);
}

.zoom-select {
    padding: 0.5rem;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
}

.zoom-select option {
    background: var(--primary);
    color: white;
}

/* Grille calendrier */
.calendar-grid-wrapper {
    display: flex;
    overflow-x: auto;
    overflow-y: hidden;
    /* Hauteur dynamique calculée automatiquement par JS */
}

/* Colonne des heures (fixe à gauche) */
.calendar-time-column {
    position: sticky;
    left: 0;
    z-index: 10;
    background: #f8f9fa;
    border-right: 2px solid #dee2e6;
    min-width: 80px;
    flex-shrink: 0;
}

.calendar-time-header {
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    background: #e9ecef;
    border-bottom: 2px solid #dee2e6;
    position: sticky;
    top: 0;
    z-index: 11;
}

.calendar-time-slot {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    color: #495057;
    border-bottom: 1px solid #e9ecef;
    font-weight: 500;
}

/* Container des colonnes gymnases */
.calendar-venues-container {
    display: flex;
    flex: 1;
    min-width: 0;
}

/* Colonne d'un gymnase */
.calendar-venue-column {
    min-width: 250px;
    flex: 1;
    border-right: 2px solid #dee2e6;
}

.calendar-venue-column:last-child {
    border-right: none;
}

/* En-tête gymnase */
.calendar-venue-header {
    height: 60px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, 
        var(--primary-hover) 0%, 
        var(--primary) 50%, 
        var(--male) 100%);
    color: var(--white);
    border-bottom: 3px solid var(--primary);
    position: sticky;
    top: 0;
    z-index: 9;
    box-shadow: 0 2px 12px rgba(0, 85, 164, 0.2);
}

.venue-name {
    font-weight: 600;
    font-size: 0.95rem;
}

.venue-count {
    font-size: 0.75rem;
    opacity: 0.9;
    margin-top: 2px;
}

/* Grille horaire d'un gymnase */
.calendar-venue-grid {
    position: relative;
    background: white;
}

/* Lignes horaires de fond */
.calendar-grid-line {
    border-bottom: 1px solid #f1f3f5;
    box-sizing: border-box;
}

.calendar-grid-line.hour-mark {
    border-bottom: 2px solid #dee2e6;
}

/* Blocs de créneaux disponibles */
.calendar-available-block {
    position: absolute;
    left: 4px;
    right: 4px;
    background: repeating-linear-gradient(
        45deg,
        rgba(16, 185, 129, 0.08),
        rgba(16, 185, 129, 0.08) 10px,
        rgba(16, 185, 129, 0.15) 10px,
        rgba(16, 185, 129, 0.15) 20px
    );
    border: 2px solid var(--secondary);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15);
}

.calendar-available-block:hover {
    background: linear-gradient(135deg, 
        rgba(16, 185, 129, 0.15) 0%, 
        rgba(16, 185, 129, 0.25) 100%);
    border-width: 3px;
    transform: scale(1.02);
    box-shadow: 0 4px 16px rgba(16, 185, 129, 0.25);
}

/* Styles pour créneaux disponibles pendant le drag */
.calendar-available-block.drag-active {
    display: flex !important;
    opacity: 1 !important;
    animation: pulse-green 1.5s ease-in-out infinite;
    z-index: 5;
}

.calendar-available-block.highlight-drop {
    background: linear-gradient(135deg, 
        rgba(16, 185, 129, 0.35) 0%, 
        rgba(16, 185, 129, 0.5) 100%);
    border: 3px solid #10B981;
    border-style: solid;
    transform: scale(1.05);
    box-shadow: 0 6px 24px rgba(16, 185, 129, 0.4), 
                0 0 0 4px rgba(16, 185, 129, 0.2);
    animation: none;
}

@keyframes pulse-green {
    0%, 100% {
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15);
    }
    50% {
        box-shadow: 0 4px 16px rgba(16, 185, 129, 0.35);
    }
}

.available-label {
    font-size: 0.75rem;
    color: var(--secondary);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Blocs de matchs dans la vue grille */
.calendar-match-block {
    position: absolute;
    left: 3px;
    right: 3px;
    padding: 6px;
    border-radius: 8px;
    border: 2px solid;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12), 
                0 1px 3px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    z-index: 2;
}

.calendar-match-block::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.4), 
        transparent);
    transition: left 0.5s;
}

.calendar-match-block:hover::before {
    left: 100%;
}

.calendar-match-block:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: 0 8px 20px rgba(0,0,0,0.18), 
                0 3px 8px rgba(0,0,0,0.12);
    z-index: 10;
}

/* Styles pour les matchs auto-programmés dans la vue grille */
.calendar-match-block.auto-scheduled {
    border-style: dashed !important;
    border-width: 2px !important;
    animation: auto-scheduled-pulse 3s ease-in-out infinite;
}

.calendar-match-block.auto-scheduled:hover {
    animation-play-state: paused;
}

@keyframes auto-scheduled-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* Indicateur robot pour les matchs auto-programmés */
.auto-indicator {
    font-size: 0.8em;
    margin-left: 4px;
    opacity: 0.8;
    vertical-align: middle;
}

/* ==================== MODE DE COLORATION: GENRE (défaut) - VUE GRILLE ==================== */

.color-genre .calendar-match-male {
    background: linear-gradient(135deg, 
        rgba(59, 130, 246, 0.85) 0%, 
        rgba(96, 165, 250, 0.75) 100%);
    border-color: #1D4ED8;
}

.color-genre .calendar-match-male:hover {
    background: linear-gradient(135deg, 
        rgba(37, 99, 235, 0.95) 0%, 
        rgba(59, 130, 246, 0.85) 100%);
    border-color: #1E40AF;
}

.color-genre .calendar-match-female {
    background: linear-gradient(135deg, 
        rgba(236, 72, 153, 0.85) 0%, 
        rgba(244, 114, 182, 0.75) 100%);
    border-color: #BE185D;
}

.color-genre .calendar-match-female:hover {
    background: linear-gradient(135deg, 
        rgba(219, 39, 119, 0.95) 0%, 
        rgba(236, 72, 153, 0.85) 100%);
    border-color: #9D174D;
}

/* ==================== MODE DE COLORATION: NIVEAU - VUE GRILLE ==================== */

.color-level .calendar-match-block[data-category="a1"] {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.85) 0%, rgba(167, 139, 250, 0.75) 100%);
    border-color: #6D28D9;
}

.color-level .calendar-match-block[data-category="a2"] {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.85) 0%, rgba(129, 140, 248, 0.75) 100%);
    border-color: #4338CA;
}

.color-level .calendar-match-block[data-category="a3"] {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.85) 0%, rgba(96, 165, 250, 0.75) 100%);
    border-color: #1D4ED8;
}

.color-level .calendar-match-block[data-category="a4"] {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.85) 0%, rgba(45, 212, 191, 0.75) 100%);
    border-color: #0F766E;
}

/* ==================== MODE DE COLORATION: LES DEUX - VUE GRILLE ==================== */

/* A1 */
.color-both .calendar-match-male[data-category="a1"] {
    background: linear-gradient(135deg, rgba(109, 40, 217, 0.85) 0%, rgba(124, 58, 237, 0.75) 100%);
    border-color: #5B21B6;
}

.color-both .calendar-match-female[data-category="a1"] {
    background: linear-gradient(135deg, rgba(157, 23, 77, 0.85) 0%, rgba(190, 24, 93, 0.75) 100%);
    border-color: #831843;
}

/* A2 */
.color-both .calendar-match-male[data-category="a2"] {
    background: linear-gradient(135deg, rgba(67, 56, 202, 0.85) 0%, rgba(79, 70, 229, 0.75) 100%);
    border-color: #3730A3;
}

.color-both .calendar-match-female[data-category="a2"] {
    background: linear-gradient(135deg, rgba(190, 24, 93, 0.85) 0%, rgba(219, 39, 119, 0.75) 100%);
    border-color: #9D174D;
}

/* A3 */
.color-both .calendar-match-male[data-category="a3"] {
    background: linear-gradient(135deg, rgba(29, 78, 216, 0.85) 0%, rgba(37, 99, 235, 0.75) 100%);
    border-color: #1E3A8A;
}

.color-both .calendar-match-female[data-category="a3"] {
    background: linear-gradient(135deg, rgba(219, 39, 119, 0.85) 0%, rgba(236, 72, 153, 0.75) 100%);
    border-color: #BE185D;
}

/* A4 */
.color-both .calendar-match-male[data-category="a4"] {
    background: linear-gradient(135deg, rgba(13, 148, 136, 0.85) 0%, rgba(15, 118, 110, 0.75) 100%);
    border-color: #115E59;
}

.color-both .calendar-match-female[data-category="a4"] {
    background: linear-gradient(135deg, rgba(244, 114, 182, 0.85) 0%, rgba(249, 168, 212, 0.75) 100%);
    border-color: #DB2777;
}

/* ==================== MODE DE COLORATION: PAR POULE - VUE GRILLE ==================== */

.color-pool .calendar-match-block[data-pool*="A1"] {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.85) 0%, rgba(167, 139, 250, 0.75) 100%);
    border-color: #6D28D9;
}

.color-pool .calendar-match-block[data-pool*="A2"] {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.85) 0%, rgba(129, 140, 248, 0.75) 100%);
    border-color: #4338CA;
}

.color-pool .calendar-match-block[data-pool*="A3"] {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.85) 0%, rgba(96, 165, 250, 0.75) 100%);
    border-color: #1D4ED8;
}

.color-pool .calendar-match-block[data-pool*="A4"] {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.85) 0%, rgba(45, 212, 191, 0.75) 100%);
    border-color: #0F766E;
}

/* ==================== MODE DE COLORATION: PAR INSTITUTION - VUE GRILLE ==================== */

.color-institution .calendar-match-block[data-institution1="LYON 1"],
.color-institution .calendar-match-block[data-institution2="LYON 1"] {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.85) 0%, rgba(248, 113, 113, 0.75) 100%);
    border-color: #B91C1C;
}

.color-institution .calendar-match-block[data-institution1="LYON 2"],
.color-institution .calendar-match-block[data-institution2="LYON 2"] {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.85) 0%, rgba(251, 191, 36, 0.75) 100%);
    border-color: #B45309;
}

.color-institution .calendar-match-block[data-institution1="LYON 3"],
.color-institution .calendar-match-block[data-institution2="LYON 3"] {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.85) 0%, rgba(52, 211, 153, 0.75) 100%);
    border-color: #047857;
}

.color-institution .calendar-match-block[data-institution1="INSA"],
.color-institution .calendar-match-block[data-institution2="INSA"] {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.85) 0%, rgba(96, 165, 250, 0.75) 100%);
    border-color: #1D4ED8;
}

.color-institution .calendar-match-block[data-institution1="ECL"],
.color-institution .calendar-match-block[data-institution2="ECL"] {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.85) 0%, rgba(167, 139, 250, 0.75) 100%);
    border-color: #6D28D9;
}

.color-institution .calendar-match-block[data-institution1="ENTPE"],
.color-institution .calendar-match-block[data-institution2="ENTPE"] {
    background: linear-gradient(135deg, rgba(236, 72, 153, 0.85) 0%, rgba(244, 114, 182, 0.75) 100%);
    border-color: #BE185D;
}

.color-institution .calendar-match-block[data-institution1="ENS"],
.color-institution .calendar-match-block[data-institution2="ENS"] {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.85) 0%, rgba(129, 140, 248, 0.75) 100%);
    border-color: #4338CA;
}

.color-institution .calendar-match-block[data-institution1="EML"],
.color-institution .calendar-match-block[data-institution2="EML"] {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.85) 0%, rgba(45, 212, 191, 0.75) 100%);
    border-color: #0F766E;
}

.calendar-match-mixed {
    background: linear-gradient(135deg, 
        rgba(192, 132, 252, 0.85) 0%,
        rgba(168, 85, 247, 0.75) 100%);
    border-color: #7C3AED;
    color: #ffffff;
}

.calendar-match-mixed:hover {
    background: linear-gradient(135deg, 
        rgba(168, 85, 247, 0.95) 0%, 
        rgba(147, 51, 234, 0.85) 100%);
    border-color: #6B21A8;
}

/* === STYLES POUR BLOCS DE MATCH DANS VUE GRILLE === */
/* Système adaptatif selon la granularité horaire */
/* Genre TOUJOURS affiché, Institutions JAMAIS affichées */
/* Design ultra-compact et moderne - Inspiration Google Calendar */

/* ========================================= */
/* NIVEAU MINIMAL - Créneaux courts (<80px) */
/* Granularité 30 minutes - Design ultra-compact */
/* ========================================= */

.calendar-match-block.detail-minimal {
    padding: 6px 8px;
    border-radius: 8px;
    border-width: 2px;
    border-style: solid;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 4px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
}

/* Ligne 1 : ⏰ Horaire + 👤 Genre - Layout symétrique */
.grid-minimal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    padding: 0;
}

.grid-minimal-time {
    font-size: 0.8125rem;
    font-weight: 900;
    font-family: 'Inter', sans-serif;
    letter-spacing: 0.5px;
    line-height: 1;
    color: #FFFFFF;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

.grid-minimal-time::before {
    content: "⏰ ";
    opacity: 0.9;
}

.grid-minimal-gender {
    font-size: 1rem;
    line-height: 1;
    filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.8));
}

/* Ligne 2 : Équipes - Séparation claire */
.grid-minimal-teams {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
    font-weight: 800;
    line-height: 1.3;
    padding: 4px 0 0 0;
    border-top: 1.5px solid rgba(255, 255, 255, 0.4);
}

.grid-minimal-team {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: center;
    color: #FFFFFF;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    font-size: 0.6875rem;
}

.grid-minimal-vs {
    font-size: 0.625rem;
    font-weight: 900;
    opacity: 0.8;
    flex-shrink: 0;
    padding: 0 2px;
    color: #FFD700;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
}

/* ========================================= */
/* NIVEAU COMPACT - Créneaux moyens (70-150px) */
/* Granularité 60 minutes - Design simple et lisible */
/* ========================================= */

.calendar-match-block.detail-compact {
    padding: 8px 10px;
    border-radius: 8px;
    border-width: 2px;
    border-style: solid;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 6px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(6px);
}

/* En-tête : ⏰ Horaire + 👤 Genre - Symétrique */
.grid-compact-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding-bottom: 5px;
    border-bottom: 2px solid rgba(255, 255, 255, 0.5);
}

.grid-compact-time {
    font-size: 0.9375rem;
    font-weight: 900;
    font-family: 'Inter', sans-serif;
    letter-spacing: 0.8px;
    line-height: 1;
    color: #FFFFFF;
    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.8);
}

.grid-compact-time::before {
    content: "⏰ ";
    opacity: 0.9;
}

.grid-compact-gender {
    font-size: 1.25rem;
    line-height: 1;
    filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.8));
}

/* Équipes empilées verticalement - Lisibilité max */
.grid-compact-teams {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.grid-compact-team {
    font-size: 0.875rem;
    font-weight: 800;
    line-height: 1.3;
    padding: 5px 8px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 5px;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: all 0.2s ease;
    border: 1.5px solid rgba(255, 255, 255, 0.3);
    color: #FFFFFF;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

.calendar-match-block.detail-compact:hover .grid-compact-team {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.6);
    transform: scale(1.02);
}

.grid-compact-vs {
    font-size: 0.75rem;
    font-weight: 900;
    text-align: center;
    letter-spacing: 1px;
    padding: 2px 0;
    color: #FFD700;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

/* ========================================= */
/* NIVEAU COMPLET - Créneaux larges (> 150px) */
/* Granularité 30 minutes - Design complet et aéré */
/* ========================================= */

.calendar-match-block.detail-full {
    padding: 12px 14px;
    border-radius: 10px;
    border-width: 2.5px;
    border-style: solid;
    display: flex;
    flex-direction: column;
    gap: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
}

/* En-tête : ⏰ Horaire + 👤 Badge Genre - Symétrique */
.grid-header-full {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    padding: 0 0 6px 0;
    border-bottom: 2.5px solid rgba(255, 255, 255, 0.6);
}

.grid-time-full {
    font-size: 1.0625rem;
    font-weight: 900;
    font-family: 'Inter', sans-serif;
    letter-spacing: 1px;
    line-height: 1;
    color: #FFFFFF;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);
}

.grid-time-full::before {
    content: "⏰ ";
    opacity: 0.95;
}

/* Équipes avec cartes individuelles symétriques */
.grid-teams-full {
    display: flex;
    flex-direction: column;
    gap: 7px;
}

.grid-team-full {
    font-size: 1rem;
    font-weight: 800;
    line-height: 1.4;
    padding: 7px 12px;
    background: rgba(255, 255, 255, 0.18);
    border-radius: 6px;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: all 0.2s ease;
    border: 2px solid rgba(255, 255, 255, 0.35);
    color: #FFFFFF;
    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.8);
}

.calendar-match-block.detail-full:hover .grid-team-full {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.7);
    transform: scale(1.03);
}

.grid-vs-full {
    font-size: 0.875rem;
    font-weight: 900;
    text-align: center;
    letter-spacing: 1.5px;
    padding: 3px 0;
    color: #FFD700;
    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.8);
}

/* Info contextuelle 📍 (poule/gymnase) - Avec émoji */
.grid-context-info {
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 700;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    border-top: 2px solid rgba(255, 255, 255, 0.35);
    color: #FFFFFF;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

.calendar-match-block.detail-full:hover .grid-context-info {
    background: rgba(255, 255, 255, 0.5);
}

/* Ancien style pour compatibilité */
.match-institutions {
    display: flex;
    align-items: center;
    gap: 4px;
    margin: 6px 0;
    font-size: 0.7rem;
    flex-wrap: wrap;
}

.institution-badge {
    background: rgba(255, 255, 255, 0.7);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 600;
    white-space: nowrap;
    font-size: 0.65rem;
    border: 1px solid rgba(0, 0, 0, 0.1);
}

.institution-separator {
    opacity: 0.5;
    font-weight: 400;
    font-size: 0.65rem;
}

/* Badge de genre dans l'en-tête - Vue grille UNIQUEMENT (ultra-compact) */
.calendar-match-block .badge-gender {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    font-size: 0.75rem;
    font-weight: 800;
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.calendar-match-block .badge-gender-male {
    color: var(--primary);
    border: 1.5px solid var(--primary);
}

.calendar-match-block .badge-gender-female {
    color: var(--danger);
    border: 1.5px solid var(--danger);
}

.calendar-match-block .badge-gender-mixed {
    color: var(--accent);
    border: 1.5px solid var(--accent);
}

.calendar-match-block:hover .badge-gender {
    transform: scale(1.08);
    box-shadow: 0 2px 6px rgba(0,0,0,0.18);
}

/* Catégorie et localisation */
.match-category,
.match-location {
    font-size: 0.7rem;
    opacity: 0.85;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 500;
    margin-top: 4px;
    padding: 3px 6px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 4px;
    display: inline-block;
}

.match-location {
    font-weight: 600;
    background: rgba(255, 255, 255, 0.6);
}

/* Responsive */
@media (max-width: 768px) {
    .calendar-nav {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .calendar-nav-left,
    .calendar-nav-right {
        width: 100%;
        justify-content: center;
    }
    
    .calendar-venue-column {
        min-width: 200px;
    }
}

/* ==================== INDICATION POUR LES MATCHS SANS SCORE ==================== */

.calendar-match-block.no-score {
    border-style: dashed !important;
    border-width: 3px !important;
    opacity: 0.8;
}

.calendar-match-block.no-score::after {
    content: '⏳';
    position: absolute;
    top: 4px;
    right: 4px;
    font-size: 12px;
    opacity: 0.7;
}

.match-card.no-score {
    border-style: dashed !important;
    border-width: 3px !important;
    opacity: 0.9;
}

/* ==================== LOADING STATE ==================== */

.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4rem;
}

.spinner {
    width: 60px;
    height: 60px;
    border: 5px solid var(--light);
    border-top-color: var(--primary);
    border-right-color: var(--male);
    border-bottom-color: var(--danger);
    border-radius: 50%;
    animation: spin 1s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
    box-shadow: 0 4px 12px rgba(0, 85, 164, 0.2);
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* ==================== ANIMATIONS & MICRO-INTERACTIONS ==================== */

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(-30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.02);
    }
}

@keyframes shimmer {
    0% {
        background-position: -1000px 0;
    }
    100% {
        background-position: 1000px 0;
    }
}

/* Appliquer les animations aux cartes */
.match-card {
    animation: slideInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) backwards;
}

.match-card:nth-child(1) { animation-delay: 0.05s; }
.match-card:nth-child(2) { animation-delay: 0.1s; }
.match-card:nth-child(3) { animation-delay: 0.15s; }
.match-card:nth-child(4) { animation-delay: 0.2s; }
.match-card:nth-child(5) { animation-delay: 0.25s; }
.match-card:nth-child(6) { animation-delay: 0.3s; }

/* ==================== SCROLLBAR STYLING ==================== */

::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

::-webkit-scrollbar-track {
    background: var(--light);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--primary) 0%, var(--male) 100%);
    border-radius: 10px;
    border: 2px solid var(--light);
    transition: background 0.3s;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--primary-hover) 0%, var(--primary) 100%);
}

/* ==================== ACCESSIBILITY & FOCUS STYLES ==================== */

*:focus-visible {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
    border-radius: 4px;
}

button:focus-visible,
select:focus-visible {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
}

/* ==================== PENALTIES VIEW ==================== */

.penalties-header {
    background: linear-gradient(135deg, var(--primary-lighter) 0%, var(--off-white) 100%);
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    border: 1px solid var(--border);
}

.penalties-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.penalty-stat {
    background: white;
    padding: 1.25rem;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border);
}

.penalty-stat .stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.5rem;
}

.penalty-stat .stat-label {
    font-size: 0.875rem;
    color: var(--gray);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.penalties-description {
    background: white;
    padding: 1rem;
    border-radius: 8px;
    color: var(--gray);
    font-size: 0.9rem;
    line-height: 1.5;
    border-left: 4px solid var(--warning);
}

.penalties-list {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.penalty-level-section {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid var(--border);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.penalty-level-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    background: linear-gradient(135deg, var(--off-white) 0%, white 100%);
    border-bottom: 1px solid var(--border);
}

.penalty-level-icon {
    font-size: 1.5rem;
}

.penalty-level-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--dark);
    flex: 1;
}

.penalty-level-count {
    background: var(--primary-light);
    color: var(--primary);
    padding: 0.375rem 0.875rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
}

.penalty-badge {
    margin: -0.5rem -0.5rem 0.5rem -0.5rem;
    text-align: center;
    font-weight: 700;
    font-size: 0.8rem;
    padding: 0.5rem;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Animations pour les pénalités */
.penalty-level-section {
    animation: fadeInUp 0.4s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==================== PRINT STYLES ==================== */

@media print {
    body {
        background: white;
        padding: 0;
    }
    
    .app-container {
        box-shadow: none;
        border-radius: 0;
    }
    
    .controls-section,
    .calendar-nav,
    button,
    select {
        display: none !important;
    }
    
    .match-card,
    .calendar-match-block {
        break-inside: avoid;
    }
}


/* ==================== NOUVEAU DESIGN CALENDAR GRID - SOUS-COLONNES ==================== */

/* Ajustement du positionnement de base pour supporter les sous-colonnes */
.calendar-match-block {
    /* Le left et width sont maintenant définis inline via JavaScript */
    position: absolute;
    padding: 6px 4px;
    border-radius: 6px;
    border: 1.5px solid;
    box-shadow: 0 2px 8px rgba(0,0,0,0.12), 
                0 1px 3px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    z-index: 2;
    backdrop-filter: blur(4px);
}

/* Couleurs genre - Palette Bleu France cohérente */
.calendar-match-male {
    background: linear-gradient(135deg, 
        rgba(0, 85, 164, 0.95) 0%, 
        rgba(30, 58, 138, 0.90) 100%);
    border-color: #60A5FA;
}

.calendar-match-male:hover {
    background: linear-gradient(135deg, 
        rgba(0, 85, 164, 1) 0%, 
        rgba(30, 58, 138, 0.95) 100%);
    border-color: #93C5FD;
    box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.4), 
                0 6px 20px rgba(59, 130, 246, 0.3);
}

.calendar-match-female {
    background: linear-gradient(135deg, 
        rgba(236, 72, 153, 0.95) 0%, 
        rgba(219, 39, 119, 0.90) 100%);
    border-color: #F9A8D4;
}

.calendar-match-female:hover {
    background: linear-gradient(135deg, 
        rgba(236, 72, 153, 1) 0%, 
        rgba(219, 39, 119, 0.95) 100%);
    border-color: #FBCFE8;
    box-shadow: 0 0 0 2px rgba(249, 168, 212, 0.4), 
                0 6px 20px rgba(236, 72, 153, 0.3);
}

.calendar-match-mixed {
    background: linear-gradient(135deg, 
        rgba(139, 92, 246, 0.95) 0%, 
        rgba(109, 40, 217, 0.90) 100%);
    border-color: #C4B5FD;
}

.calendar-match-mixed:hover {
    background: linear-gradient(135deg, 
        rgba(139, 92, 246, 1) 0%, 
        rgba(109, 40, 217, 0.95) 100%);
    border-color: #DDD6FE;
    box-shadow: 0 0 0 2px rgba(196, 181, 253, 0.4), 
                0 6px 20px rgba(139, 92, 246, 0.3);
}

/* ========== NIVEAU MINIMAL ========== */
.match-content-minimal {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
    color: white;
}

.match-teams-minimal {
    display: flex;
    flex-direction: column;
    gap: 2px;
    font-size: 0.7rem;
    line-height: 1.2;
}

.team-name-minimal {
    font-weight: 600;
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.match-vs-minimal {
    text-align: center;
    font-size: 0.6rem;
    opacity: 0.8;
    font-weight: 500;
}

/* ========== NIVEAU COMPACT ========== */
.match-content-compact {
    display: flex;
    flex-direction: column;
    height: 100%;
    color: white;
}

.match-header-compact {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
    padding-bottom: 3px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.context-badge {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    padding: 2px 5px;
    border-radius: 3px;
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.gender-badge-compact {
    font-size: 0.9rem;
    opacity: 0.9;
}

.match-teams-compact {
    display: flex;
    flex-direction: column;
    gap: 3px;
    flex: 1;
    justify-content: center;
}

.team-name-compact {
    font-weight: 600;
    font-size: 0.75rem;
    line-height: 1.2;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.match-vs-compact {
    text-align: center;
    font-size: 0.65rem;
    opacity: 0.7;
    font-weight: 500;
    margin: 1px 0;
}

/* ========== NIVEAU FULL ========== */
.match-content-full {
    display: flex;
    flex-direction: column;
    height: 100%;
    color: white;
}

.match-header-full {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
    padding-bottom: 4px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.25);
}

.horaire-badge {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    padding: 3px 7px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 0.3px;
}

.gender-badge-full {
    font-size: 1.1rem;
    opacity: 0.95;
}

.match-teams-full {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
}

.team-name-full {
    font-weight: 700;
    font-size: 0.8rem;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.match-vs-full {
    text-align: center;
    font-size: 0.7rem;
    opacity: 0.75;
    font-weight: 600;
    margin: 2px 0;
}

.context-line {
    font-size: 0.7rem;
    opacity: 0.85;
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid rgba(255, 255, 255, 0.15);
}

.pool-line {
    display: flex;
    gap: 4px;
    align-items: center;
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid rgba(255, 255, 255, 0.15);
}

.category-badge {
    background: rgba(255, 255, 255, 0.25);
    color: white;
    padding: 2px 5px;
    border-radius: 3px;
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
}

.level-badge {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    padding: 2px 4px;
    border-radius: 3px;
    font-size: 0.6rem;
    font-weight: 600;
}

.pool-badge {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    padding: 2px 4px;
    border-radius: 3px;
    font-size: 0.6rem;
    font-weight: 500;
}

.pref-line {
    font-size: 0.7rem;
    text-align: center;
    margin-top: 3px;
    opacity: 0.9;
}

/* Animations et transitions */
.calendar-match-block:hover {
    transform: scale(1.03);
    z-index: 10;
}

.calendar-match-block:active {
    transform: scale(0.98);
}

/* Responsive - adapter pour petites sous-colonnes */
@media (max-width: 1400px) {
    .team-name-full,
    .team-name-compact {
        font-size: 0.7rem;
    }
    
    .horaire-badge,
    .context-badge {
        font-size: 0.6rem;
        padding: 2px 4px;
    }
}

/* ============================================
   EDIT MODAL - Phase 2 Interactive Editing
   ============================================ */

/* Modal Container */
.edit-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10000;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    pointer-events: none;  /* Allow clicks through to background */
}

.edit-modal-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.3);  /* Lighter backdrop - less intrusive */
    backdrop-filter: blur(2px);  /* Minimal blur */
    pointer-events: auto;  /* Backdrop captures clicks */
    cursor: pointer;
}

.edit-modal-content {
    position: relative;
    background: var(--white);
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    max-width: 450px;
    width: 90%;
    max-height: 80vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: modalSlideIn 0.3s ease-out;
    pointer-events: auto;  /* Modal content captures clicks */
    /* Dynamic positioning will be set via JavaScript */
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes modalSlideOut {
    from {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    to {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
    }
}

/* Closing animation */
.edit-modal.closing .edit-modal-content {
    animation: modalSlideOut 0.2s ease-in forwards;
}

/* Modal Header */
.edit-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;  /* Reduced from 1.5rem */
    border-bottom: 2px solid var(--border);
    background: linear-gradient(135deg, var(--primary-light), var(--white));
}

.edit-modal-header h3 {
    font-size: 1.2rem;  /* Reduced from 1.4rem */
    color: var(--primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.edit-modal-close {
    background: none;
    border: none;
    font-size: 2rem;
    color: var(--gray);
    cursor: pointer;
    padding: 0;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    transition: all 0.2s;
}

.edit-modal-close:hover {
    background: var(--danger-light);
    color: var(--danger);
    transform: rotate(90deg);
}

/* Modal Body */
.edit-modal-body {
    padding: 1rem 1.25rem;  /* Reduced from 1.5rem */
    overflow-y: auto;
    flex: 1;
}

.match-info {
    background: var(--primary-lighter);
    border-left: 4px solid var(--primary);
    padding: 0.75rem 1rem;  /* Reduced vertical padding */
    border-radius: 8px;
    margin-bottom: 1rem;  /* Reduced from 1.5rem */
}

.match-teams {
    font-size: 1rem;  /* Reduced from 1.1rem */
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 0.25rem;  /* Reduced from 0.5rem */
}

.match-pool {
    font-size: 0.85rem;  /* Reduced from 0.9rem */
    color: var(--gray);
}

/* Edit Form */
.edit-form {
    display: flex;
    flex-direction: column;
    gap: 0.9rem;  /* Reduced from 1.25rem */
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;  /* Reduced from 0.5rem */
}

.form-group label {
    font-weight: 600;
    color: var(--dark);
    font-size: 0.85rem;  /* Reduced from 0.9rem */
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.form-control {
    padding: 0.6rem;  /* Reduced from 0.75rem */
    border: 2px solid var(--border);
    border-radius: 8px;
    font-size: 0.95rem;  /* Reduced from 1rem */
    transition: all 0.2s;
    background: var(--white);
}

.form-control:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
}

/* ============================================
   SMART FILTERING - Availability Indicators
   ============================================ */

/* Availability status classes for dropdown options */
option.slot-available {
    background-color: rgba(16, 185, 129, 0.1);
    color: var(--secondary);
    font-weight: 600;
}

option.slot-taken {
    background-color: rgba(245, 158, 11, 0.1);
    color: var(--warning);
    font-weight: 500;
}

option.slot-unavailable {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--danger);
    opacity: 0.6;
}

/* Status indicators (emoji/text before option text) */
.status-indicator-available::before {
    content: "✅ ";
}

.status-indicator-taken::before {
    content: "⚠️ ";
}

.status-indicator-unavailable::before {
    content: "❌ ";
}

/* Enhanced select styling for better visibility */
.form-control option {
    padding: 0.5rem;
    line-height: 1.5;
}

/* Conflict actions panel */
.conflict-actions {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(239, 68, 68, 0.1));
    border: 2px solid var(--warning);
    border-radius: 8px;
    padding: 0.75rem;
    margin-top: 0.75rem;
    display: none; /* Hidden by default, shown when conflict detected */
}

.conflict-actions.active {
    display: block;
    animation: slideInUp 0.3s ease-out;
}

.conflict-warning {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--danger);
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 0.75rem;
}

.conflict-warning-icon {
    font-size: 1.25rem;
}

.conflict-match-info {
    background: white;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    margin-bottom: 0.75rem;
    font-size: 0.85rem;
}

.conflict-buttons {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.btn-conflict {
    flex: 1;
    min-width: 120px;
    padding: 0.5rem 0.75rem;
    border: none;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.375rem;
}

.btn-force-replace {
    background: linear-gradient(135deg, var(--danger), var(--danger-dark));
    color: white;
}

.btn-force-replace:hover {
    background: linear-gradient(135deg, var(--danger-dark), var(--danger-darker));
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

.btn-swap {
    background: linear-gradient(135deg, var(--warning), #d97706);
    color: white;
}

.btn-swap:hover {
    background: linear-gradient(135deg, #d97706, #b45309);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
}

.original-values {
    background: var(--light);
    padding: 0.75rem;  /* Reduced from 1rem */
    border-radius: 8px;
    margin-top: 0.5rem;
}

.original-values strong {
    color: var(--gray);
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: block;
    margin-bottom: 0.5rem;
}

.original-values div {
    font-size: 0.9rem;
    color: var(--dark);
    margin: 0.25rem 0;
}

/* Modal Footer */
.edit-modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;  /* Reduced from 1rem */
    padding: 1rem 1.25rem;  /* Reduced from 1.5rem */
    border-top: 2px solid var(--border);
    background: var(--light);
}

.btn {
    padding: 0.6rem 1.2rem;  /* Reduced from 0.75rem 1.5rem */
    border: none;
    border-radius: 8px;
    font-size: 0.95rem;  /* Reduced from 1rem */
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-primary {
    background: var(--primary);
    color: var(--white);
}

.btn-primary:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 85, 164, 0.3);
}

.btn-secondary {
    background: var(--white);
    color: var(--gray);
    border: 2px solid var(--border);
}

.btn-secondary:hover {
    background: var(--light);
    border-color: var(--gray);
}

.btn-danger-outline {
    background: transparent;
    color: var(--danger);
    border: 2px solid var(--danger);
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-danger-outline:hover {
    background: var(--danger);
    color: var(--white);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

/* Edit Modal Footer avec bouton de déplanification */
.edit-modal-footer {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.5rem;
    border-top: 1px solid var(--border);
    background: var(--off-white);
}

/* Modified Match Indicator */
.match-modified {
    position: relative;
    border: 2px solid var(--warning) !important;
    background: var(--warning-light) !important;
}

.match-modified::after {
    content: '✏️';
    position: absolute;
    top: 4px;
    right: 4px;
    font-size: 0.8rem;
    opacity: 0.8;
}

/* Edit Button on Match Cards */
.match-edit-btn {
    position: absolute;
    top: 4px;
    right: 4px;
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 0.8rem;
    cursor: pointer;
    opacity: 0;
    transition: all 0.2s;
    z-index: 11; /* Au-dessus du badge de conflit */
}

/* Décalage du bouton d'édition quand il y a un badge de conflit */
.has-conflict-critical .match-edit-btn,
.has-conflict-warning .match-edit-btn {
    right: 32px; /* Décalé vers la gauche pour laisser place au badge */
}

.calendar-match-block:hover .match-edit-btn,
.match-card:hover .match-edit-btn {
    opacity: 1;
}

.match-edit-btn:hover {
    background: var(--primary);
    color: var(--white);
    transform: scale(1.1);
}

/* Modification Counter Badge */
.modification-counter {
    position: fixed;
    bottom: 100px;
    right: 30px;
    background: var(--warning);
    color: var(--white);
    padding: 1rem 1.5rem;
    border-radius: 50px;
    box-shadow: 0 4px 20px rgba(245, 158, 11, 0.4);
    font-weight: 600;
    z-index: 9999;
    display: none;
    animation: bounceIn 0.4s ease-out;
}

@keyframes bounceIn {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.modification-counter .badge {
    font-size: 1rem;
}

/* Edit Controls Panel */
.edit-controls {
    position: fixed;
    bottom: 30px;
    right: 30px;
    display: flex;
    gap: 1rem;
    z-index: 9998;
}

.edit-control-btn {
    padding: 1rem 1.5rem;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1rem;
}

.export-btn {
    background: var(--secondary);
    color: var(--white);
}

.export-btn:hover {
    background: #059669;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
}

.discard-btn {
    background: var(--danger);
    color: var(--white);
}

.discard-btn:hover {
    background: var(--danger-dark);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
}

/* Notification Toast */
.edit-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--dark);
    color: var(--white);
    padding: 1rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    z-index: 10001;
    opacity: 0;
    transform: translateX(400px);
    transition: all 0.3s ease-out;
}

.edit-notification.show {
    opacity: 1;
    transform: translateX(0);
}

/* Responsive */
@media (max-width: 768px) {
    .edit-modal-content {
        width: 95%;
        max-height: 95vh;
    }
    
    .edit-controls {
        bottom: 20px;
        right: 20px;
        flex-direction: column;
    }
    
    .conflict-panel,
    .history-panel,
    .resolver-panel {
        width: 95%;
    }
}

/* ===============================================
   CONFLICT DETECTION STYLES
   =============================================== */

/* Match cards avec conflits */
.match-card.has-conflict-critical {
    border: var(--conflict-border) solid var(--conflict-critical) !important;
    box-shadow: var(--conflict-glow);
    animation: pulse-conflict 2s ease-in-out infinite;
}

.match-card.has-conflict-warning {
    border: var(--conflict-border) solid var(--conflict-warning) !important;
    box-shadow: 0 0 10px rgba(245, 158, 11, 0.3);
}

@keyframes pulse-conflict {
    0%, 100% { 
        box-shadow: var(--conflict-glow);
    }
    50% { 
        box-shadow: 0 0 20px rgba(220, 38, 38, 0.6);
    }
}

/* Badge de conflit sur la carte */
.conflict-badge {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    z-index: 10;
    cursor: help;
}

.conflict-badge.critical {
    background: var(--conflict-critical);
    color: white;
}

.conflict-badge.warning {
    background: var(--conflict-warning);
    color: white;
}

/* Tooltip de conflit amélioré */
.conflict-tooltip {
    position: fixed;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    color: var(--white);
    padding: 0;
    border-radius: 12px;
    font-size: 13px;
    line-height: 1.5;
    max-width: 320px;
    z-index: 10000;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
    transform: translateY(-5px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.conflict-tooltip.show {
    opacity: 1;
    transform: translateY(0);
}

.conflict-tooltip-title {
    font-weight: 700;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px 12px 0 0;
}

.conflict-tooltip-title .conflict-icon {
    font-size: 18px;
}

.conflict-tooltip-list {
    padding: 8px;
    max-height: 300px;
    overflow-y: auto;
}

.conflict-tooltip-item {
    padding: 10px 12px;
    margin: 4px 0;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.05);
    border-left: 3px solid transparent;
}

.conflict-tooltip-item.critical {
    border-left-color: var(--conflict-critical);
    background: rgba(220, 38, 38, 0.1);
}

.conflict-tooltip-item.warning {
    border-left-color: var(--conflict-warning);
    background: rgba(245, 158, 11, 0.1);
}

.conflict-tooltip-item .conflict-type {
    font-weight: 600;
    margin-bottom: 4px;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.conflict-tooltip-item .conflict-message {
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 4px;
}

.conflict-tooltip-item .conflict-suggestion {
    color: rgba(255, 255, 255, 0.7);
    font-size: 12px;
    font-style: italic;
    margin-top: 6px;
    padding: 6px;
    background: rgba(139, 92, 246, 0.1);
    border-radius: 4px;
}

/* Scrollbar du tooltip */
.conflict-tooltip-list::-webkit-scrollbar {
    width: 6px;
}

.conflict-tooltip-list::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 3px;
}

.conflict-tooltip-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
}

.conflict-tooltip-list::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

.conflict-tooltip-item::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--conflict-critical);
}

/* Informations de conflit intégrées dans les cartes */
.conflict-info {
    margin-top: 8px;
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 6px;
    border-left: 3px solid var(--conflict-warning);
    font-size: 12px;
    line-height: 1.4;
}

.conflict-info.critical {
    border-left-color: var(--conflict-critical);
    background: rgba(239, 68, 68, 0.05);
}

.conflict-info-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 6px;
    font-weight: 600;
    font-size: 13px;
}

.conflict-info-icon {
    font-size: 14px;
}

.conflict-info-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.conflict-info-item {
    padding: 4px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.conflict-info-item:last-child {
    border-bottom: none;
}

.conflict-info-item.critical {
    color: var(--conflict-critical);
}

.conflict-info-item.warning {
    color: var(--conflict-warning);
}

.conflict-info-type {
    font-weight: 600;
    font-size: 11px;
    margin-bottom: 2px;
}

.conflict-info-message {
    font-size: 11px;
    opacity: 0.9;
}

/* Panel des conflits */
.conflict-panel {
    position: fixed;
    right: 20px;
    top: 80px;
    width: 400px;
    max-height: 600px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    display: none;
    flex-direction: column;
}

.conflict-panel.show {
    display: flex;
}

.conflict-panel-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.conflict-panel-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 8px;
}

.conflict-stats {
    display: flex;
    gap: 12px;
    font-size: 12px;
}

.conflict-stat {
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 600;
}

.conflict-stat.critical {
    background: rgba(220, 38, 38, 0.1);
    color: var(--conflict-critical);
}

.conflict-stat.warning {
    background: rgba(245, 158, 11, 0.1);
    color: var(--conflict-warning);
}

.conflict-panel-body {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.conflict-item {
    background: var(--light);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.conflict-item:hover {
    background: var(--border);
    transform: translateX(-4px);
}

.conflict-item.critical {
    border-left: 4px solid var(--conflict-critical);
}

.conflict-item.warning {
    border-left: 4px solid var(--conflict-warning);
}

.conflict-item-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 8px;
}

.conflict-item-type {
    font-weight: 600;
    color: var(--dark);
    font-size: 14px;
}

.conflict-item-severity {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 600;
    text-transform: uppercase;
}

.conflict-item-severity.critical {
    background: var(--conflict-critical);
    color: white;
}

.conflict-item-severity.warning {
    background: var(--conflict-warning);
    color: white;
}

.conflict-item-message {
    color: var(--gray);
    font-size: 13px;
    line-height: 1.4;
}

.conflict-panel-close {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--gray);
    transition: color 0.2s;
}

.conflict-panel-close:hover {
    color: var(--dark);
}

/* ===============================================
   AUTO-RESOLVER STYLES
   =============================================== */

.resolver-panel {
    position: fixed;
    right: 20px;
    bottom: 20px;
    width: 450px;
    max-height: 500px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    display: none;
    flex-direction: column;
}

.resolver-panel.show {
    display: flex;
}

.resolver-panel-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.resolver-panel-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 8px;
}

.resolver-panel-body {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.suggestion-item {
    background: var(--light);
    border-radius: 8px;
    padding: 14px;
    margin-bottom: 12px;
    border-left: 4px solid var(--primary);
}

.suggestion-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 10px;
}

.suggestion-type {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
}

.suggestion-type.move {
    background: rgba(59, 130, 246, 0.1);
    color: var(--primary);
}

.suggestion-type.swap {
    background: rgba(139, 92, 246, 0.1);
    color: var(--accent);
}

.suggestion-priority {
    font-size: 12px;
    color: var(--gray);
    font-weight: 600;
}

.suggestion-priority.high {
    color: var(--secondary);
}

.suggestion-description {
    color: var(--dark);
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 12px;
}

.suggestion-actions {
    display: flex;
    gap: 8px;
}

.suggestion-btn {
    flex: 1;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.suggestion-btn.apply {
    background: var(--primary);
    color: white;
}

.suggestion-btn.apply:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

.suggestion-btn.preview {
    background: var(--light);
    color: var(--dark);
    border: 1px solid var(--border);
}

.suggestion-btn.preview:hover {
    background: var(--border);
}

.resolver-empty {
    text-align: center;
    padding: 40px 20px;
    color: var(--gray);
}

.resolver-empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

/* ===============================================
   HISTORY MANAGER STYLES
   =============================================== */

.history-panel {
    position: fixed;
    left: 20px;
    top: 80px;
    width: 380px;
    max-height: 600px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    display: none;
    flex-direction: column;
}

.history-panel.show {
    display: flex;
}

.history-panel-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.history-panel-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 8px;
}

.history-controls {
    display: flex;
    gap: 8px;
}

.history-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 4px;
}

.history-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.history-btn.undo {
    background: var(--light);
    color: var(--dark);
}

.history-btn.undo:hover:not(:disabled) {
    background: var(--border);
}

.history-btn.redo {
    background: var(--primary-light);
    color: var(--primary);
}

.history-btn.redo:hover:not(:disabled) {
    background: var(--primary);
    color: white;
}

.history-panel-body {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.history-item {
    background: var(--light);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: all 0.2s;
    border-left: 3px solid var(--primary);
}

.history-item:hover {
    background: var(--border);
    transform: translateX(4px);
}

.history-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
}

.history-item-time {
    font-size: 12px;
    color: var(--gray);
    font-weight: 500;
}

.history-item-type {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 10px;
    background: var(--primary-light);
    color: var(--primary);
    font-weight: 600;
}

.history-item-description {
    color: var(--dark);
    font-size: 14px;
    line-height: 1.4;
}

.history-empty {
    text-align: center;
    padding: 40px 20px;
    color: var(--gray);
}

.history-empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

/* Bouton toggle pour afficher les panels */
.panel-toggle {
    position: fixed;
    top: 20px;
    padding: 10px 16px;
    background: white;
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    color: var(--dark);
    transition: all 0.2s;
    z-index: 999;
    display: flex;
    align-items: center;
    gap: 8px;
}

.panel-toggle:hover {
    background: var(--light);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.panel-toggle.conflicts {
    right: 440px;
}

.panel-toggle.resolver {
    right: 20px;
}

.panel-toggle.history {
    left: 20px;
}

.panel-toggle .badge {
    background: var(--conflict-critical);
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 12px;
}

    .modification-counter {
        bottom: 80px;
        right: 20px;
    }

/* ==================== INDICATEURS DE SCORE ==================== */

/* Matchs sans score - Indicateur visuel */
.calendar-match-block.no-score {
    border: 2px dashed var(--warning) !important;
    background: linear-gradient(135deg, 
        rgba(245, 158, 11, 0.05) 0%, 
        rgba(245, 158, 11, 0.02) 100%) !important;
    position: relative;
}

.calendar-match-block.no-score::before {
    content: "⏳";
    position: absolute;
    top: 4px;
    right: 4px;
    background: var(--warning);
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    z-index: 10;
}

.calendar-match-block.no-score:hover::before {
    background: var(--warning-dark);
    transform: scale(1.1);
}

/* Tooltip pour les matchs sans score */
.calendar-match-block.no-score[title] {
    cursor: help;
}

/* Animation subtile pour attirer l'attention */
.calendar-match-block.no-score {
    animation: pulse-score-warning 3s ease-in-out infinite;
}

@keyframes pulse-score-warning {
    0%, 100% {
        border-color: var(--warning);
        box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.3);
    }
    50% {
        border-color: var(--warning-dark);
        box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.1);
    }
}

/* Matchs planifiés automatiquement - Style avec pointillés */
.match-card.auto-scheduled {
    border-style: dashed !important;
    border-width: 2px !important;
    background: linear-gradient(135deg, 
        rgba(0, 0, 0, 0.02) 0%, 
        rgba(0, 0, 0, 0.01) 100%);
    position: relative;
}

.match-card.auto-scheduled::after {
    content: "🤖";
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(139, 92, 246, 0.9);
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    z-index: 5;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.match-card.auto-scheduled:hover::after {
    background: rgba(139, 92, 246, 1);
    transform: scale(1.1);
}

/* Animation subtile pour les matchs auto-planifiés */
.match-card.auto-scheduled {
    animation: subtle-dash-pulse 4s ease-in-out infinite;
}

/* Matchs planifiés automatiquement dans la vue grille */
.calendar-match-block.auto-scheduled {
    border-style: dashed !important;
    border-width: 2px !important;
    background: linear-gradient(135deg, 
        rgba(0, 0, 0, 0.1) 0%, 
        rgba(0, 0, 0, 0.05) 100%) !important;
    position: relative;
}

.calendar-match-block.auto-scheduled::after {
    content: "🤖";
    position: absolute;
    top: 2px;
    right: 2px;
    background: rgba(139, 92, 246, 0.9);
    color: white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    z-index: 10;
    border: 1px solid rgba(255, 255, 255, 0.5);
}

.calendar-match-block.auto-scheduled:hover::after {
    background: rgba(139, 92, 246, 1);
    transform: scale(1.1);
}

/* Animation subtile pour les blocs auto-planifiés */
.calendar-match-block.auto-scheduled {
    animation: subtle-dash-pulse-grid 4s ease-in-out infinite;
}

@keyframes subtle-dash-pulse-grid {
    0%, 100% {
        border-color: rgba(255, 255, 255, 0.7) !important;
    }
    50% {
        border-color: rgba(139, 92, 246, 0.6) !important;
    }
}

</style>
</head>
<body>
    <div class="app-container">
        <!-- ==================== HEADER ==================== -->
        <header class="header">
            <h1 class="header-title">📅 PyCalendar</h1>
            <p class="header-subtitle">Système de création de calendriers sportifs</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalMatches">0</div>
                    <div class="stat-label">Matchs planifiés</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalUnscheduled">0</div>
                    <div class="stat-label">Non planifiés</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalWeeks">0</div>
                    <div class="stat-label">Semaines</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalPools">0</div>
                    <div class="stat-label">Poules</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalVenues">0</div>
                    <div class="stat-label">Gymnases</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalAvailableSlots">0</div>
                    <div class="stat-label">Créneaux libres</div>
                </div>
            </div>
        </header>
        
        <!-- ==================== CONTROLS ==================== -->
        <section class="controls-section">
            <!-- Filtres de données -->
            <div class="control-group">
                <h3 class="control-group-title">
                    <span>🔍 Filtres</span>
                    <button class="btn btn-primary btn-reset btn-reset-compact">🔄</button>
                    <button class="collapse-btn" id="collapseFilters" title="Replier/Déplier">
                        <span class="collapse-icon">▼</span>
                    </button>
                </h3>
                <div class="controls-grid collapsible-content" id="filtersContent">
                    <!-- Genre -->
                    <div class="control-item">
                        <label class="control-label">⚧️ Genre</label>
                        <div class="gender-filter">
                            <button class="gender-btn active" data-gender="">Tous</button>
                            <button class="gender-btn male" data-gender="M">♂ Masculin</button>
                            <button class="gender-btn female" data-gender="F">♀ Féminin</button>
                        </div>
                    </div>
                    
                    <!-- Semaine -->
                    <div class="control-item">
                        <label class="control-label" for="filterWeek">📅 Semaine</label>
                        <select id="filterWeek">
                            <option value="">Toutes les semaines</option>
                        </select>
                    </div>
                    
                    <!-- Gymnase -->
                    <div class="control-item">
                        <label class="control-label" for="filterVenue">🏢 Gymnase</label>
                        <select id="filterVenue">
                            <option value="">Tous les gymnases</option>
                        </select>
                    </div>
                    
                    <!-- Poule -->
                    <div class="control-item">
                        <label class="control-label" for="filterPool">🎯 Poule</label>
                        <select id="filterPool">
                            <option value="">Toutes les poules</option>
                        </select>
                    </div>
                    
                    <!-- Institution -->
                    <div class="control-item">
                        <label class="control-label" for="filterInstitution">🏛️ Institution</label>
                        <select id="filterInstitution">
                            <option value="">Toutes les institutions</option>
                        </select>
                    </div>
                    
                    <!-- Équipe -->
                    <div class="control-item">
                        <label class="control-label" for="filterTeam">👥 Équipe</label>
                        <select id="filterTeam">
                            <option value="">Toutes les équipes</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Séparateur -->
            <div class="controls-separator"></div>
            
            <!-- Options d'affichage -->
            <div class="control-group">
                <h3 class="control-group-title">
                    <span>⚙️ Affichage</span>
                    <button class="btn btn-primary btn-reset btn-reset-compact" id="btnResetDisplay">🔄</button>
                    <button class="collapse-btn" id="collapseOptions" title="Replier/Déplier">
                        <span class="collapse-icon">▼</span>
                    </button>
                </h3>
                <div class="collapsible-content" id="optionsContent">
                <div class="display-options">
                    <div class="toggle-container" id="togglePreferences" data-visible-tabs="calendar,pools,venues,unscheduled">
                        <div class="toggle-switch"></div>
                        <span class="toggle-label">⏰ Horaires préférés</span>
                    </div>
                    <div class="toggle-container" id="toggleInstitutions" data-visible-tabs="calendar,pools,venues,unscheduled">
                        <div class="toggle-switch"></div>
                        <span class="toggle-label">🏛️ Institutions</span>
                    </div>
                    <div class="toggle-container" id="toggleGenreBadges" data-visible-tabs="calendar,pools,venues,unscheduled">
                        <div class="toggle-switch"></div>
                        <span class="toggle-label">⚧️ Badges genre</span>
                    </div>
                    <div class="toggle-container" id="toggleWeekBadges" data-visible-tabs="pools,venues,penalized">
                        <div class="toggle-switch"></div>
                        <span class="toggle-label">📅 Badge semaine</span>
                    </div>
                    <div class="toggle-container" id="togglePoolBadges" data-visible-tabs="calendar,venues">
                        <div class="toggle-switch"></div>
                        <span class="toggle-label">🎯 Badge poule</span>
                    </div>
                    <div class="toggle-container" id="toggleAvailableSlots" data-visible-tabs="grid">
                        <div class="toggle-switch"></div>
                        <span class="toggle-label">📅 Créneaux libres</span>
                    </div>
                    
                    <!-- Sélecteur de mode de couleur -->
                    <div class="color-mode-selector" data-visible-tabs="calendar,pools,venues,unscheduled,penalized">
                        <label class="control-label">🎨 Coloration des cartes</label>
                        <select id="colorModeSelect" class="color-mode-select">
                            <option value="genre">Genre (♂/♀)</option>
                            <option value="level">Niveau (A1/A2/A3/A4)</option>
                            <option value="both">Genre + Niveau</option>
                            <option value="pool">Par poule</option>
                            <option value="institution">Par institution</option>
                        </select>
                    </div>
                </div>
                
                <!-- Contrôles compacts -->
                <div class="compact-controls">
                    <!-- Colonnes pour les vues en liste -->
                    <div class="compact-control" id="zoomCardControl" data-visible-tabs="calendar,pools,venues,unscheduled">
                        <button class="compact-btn" id="zoomCardOut" title="Moins de colonnes">−</button>
                        <span class="compact-value" id="zoomCardValue">3 colonnes</span>
                        <button class="compact-btn" id="zoomCardIn" title="Plus de colonnes">+</button>
                    </div>
                    
                    <!-- Granularité pour la vue grille -->
                    <div class="compact-control" id="zoomGridControl" data-visible-tabs="grid">
                        <button class="compact-btn" id="zoomGridOut" title="Moins détaillé">−</button>
                        <span class="compact-value" id="zoomGridValue">60min</span>
                        <button class="compact-btn" id="zoomGridIn" title="Plus détaillé">+</button>
                    </div>
                </div>
                </div>
            </div>
        </section>
        
        <!-- ==================== FILTER INFO ==================== -->
        <div id="filterInfo" class="filter-info"></div>
        
        <!-- ==================== CONTENT ==================== -->
        <main class="content-section">
            <!-- TABS -->
            <nav class="tabs-nav">
                <button class="tab-btn active" data-tab="grid">&#x1F4CA; Calendrier</button>
                <button class="tab-btn" data-tab="calendar">&#x1F4C5; Par semaines</button>
                <button class="tab-btn" data-tab="pools">&#x1F3AF; Par Poule</button>
                <button class="tab-btn" data-tab="venues">&#x1F3E2; Par Gymnase</button>
                <button class="tab-btn" data-tab="penalized">&#x1F4B0; Matchs Pénalisés</button>
                <button class="tab-btn" data-tab="unscheduled" id="unscheduledTab">&#x26A0;&#xFE0F; Non Planifiés</button>
            </nav>
            
            <!-- TAB CONTENTS -->
            <div id="gridContent" class="tab-content active"></div>
            <div id="calendarContent" class="tab-content"></div>
            <div id="poolsContent" class="tab-content"></div>
            <div id="venuesContent" class="tab-content"></div>
            <div id="penalizedContent" class="tab-content"></div>
            <div id="unscheduledContent" class="tab-content"></div>
        </main>
        
        <!-- ==================== PANEL TOGGLES ==================== -->
        <button class="panel-toggle history" onclick="window.historyPanel?.toggle()">
            📜 Historique
        </button>
        <button class="panel-toggle conflicts" onclick="window.conflictPanel?.toggle()">
            ⚠️ Conflits <span class="badge" id="conflictBadge">0</span>
        </button>
        <button class="panel-toggle resolver" onclick="window.resolverPanel?.toggle()">
            🤖 Auto-Résolution
        </button>
    </div>
    
    <!-- ==================== EDIT CONTROLS (Phase 2) ==================== -->
    <div class="modification-counter" id="modificationCounter" style="display: none;">
        <span class="badge">0 modifications</span>
    </div>
    
    <div class="edit-controls">
        <button class="edit-control-btn export-btn" onclick="editModal.exportModifications()">
            📥 Exporter Modifications
        </button>
        <button class="edit-control-btn discard-btn" onclick="editModal.discardAll()">
            🗑️ Annuler Tout
        </button>
    </div>
    
    <!-- SCRIPTS -->
    <script>
/**
 * PyCalendar Pro - Utilitaires
 * Fonctions helper pour manipulation de données, calculs, formatage
 */

const Utils = {
    /**
     * Détermine le genre basé sur un match ou le nom d'une poule
     */
    getGender(matchOrPoolName) {
        // Si c'est un objet match, extraire la catégorie ou la poule
        let poolName = matchOrPoolName;
        if (typeof matchOrPoolName === 'object' && matchOrPoolName !== null) {
            poolName = matchOrPoolName.categorie || matchOrPoolName.poule || '';
        }
        
        // Vérifier que c'est bien une chaîne
        if (typeof poolName !== 'string') {
            console.warn('getGender: poolName n\'est pas une chaîne:', poolName);
            return 'mixed';
        }
        
        // Gérer les catégories mixtes (vérifier en premier)
        if (poolName.includes('X') || poolName.toLowerCase().includes('mixte')) {
            return 'mixed';
        }
        
        // Féminin si contient 'HBF' (vérifier AVANT 'F' seul pour éviter confusion)
        // Ex: HBFA1PA = féminin, HBMA1PA = masculin
        if (poolName.includes('FA')) {
            return 'female';
        }
        
        // Masculin si contient 'HBM'
        if (poolName.includes('MA')) {
            return 'male';
        }
        
        // Cas génériques : vérifier 'F' ou 'M' en début ou après espace
        // Pour éviter confusion avec lettres dans le milieu du mot
        const upperPool = poolName.toUpperCase();
        if (upperPool.match(/^F[A-Z0-9]|[^A-Z]F[A-Z0-9]/)) {
            return 'female';
        }
        if (upperPool.match(/^M[A-Z0-9]|[^A-Z]M[A-Z0-9]/)) {
            return 'male';
        }
        
        // Par défaut, considérer comme mixte
        return 'mixed';
    },

    /**
     * Détermine la catégorie basée sur un match ou le nom d'une poule
     */
    getCategory(matchOrPoolName) {
        // Si c'est un objet match, extraire la catégorie ou la poule
        let poolName = matchOrPoolName;
        if (typeof matchOrPoolName === 'object' && matchOrPoolName !== null) {
            poolName = matchOrPoolName.categorie || matchOrPoolName.poule || '';
        }
        
        // Vérifier que c'est bien une chaîne
        if (typeof poolName !== 'string') {
            console.warn('getCategory: poolName n\'est pas une chaîne:', poolName);
            return 'a1';
        }
        
        if (poolName.includes('A1') || poolName.includes('1P')) return 'a1';
        if (poolName.includes('A2') || poolName.includes('2P')) return 'a2';
        if (poolName.includes('A3') || poolName.includes('3P')) return 'a3';
        if (poolName.includes('A4') || poolName.includes('4P')) return 'a4';
        return 'a1';
    },

    /**
     * Détermine si une équipe doit être mise en surbrillance
     */
    shouldHighlight(team, institution, filters) {
        if (filters.team && team === filters.team) return true;
        if (filters.institution && !filters.team && institution === filters.institution) return true;
        return false;
    },

    /**
     * Calcule les statistiques globales
     */
    calculateStats(matches) {
        const stats = {
            weeks: new Set(),
            pools: new Set(),
            venues: new Set(),
            institutions: new Set(),
            teams: new Set(),
            timeSlots: new Set()
        };
        
        matches.forEach(m => {
            if (m.semaine) stats.weeks.add(m.semaine);
            if (m.poule) stats.pools.add(m.poule);
            if (m.gymnase) stats.venues.add(m.gymnase);
            if (m.institution1) stats.institutions.add(m.institution1);
            if (m.institution2) stats.institutions.add(m.institution2);
            if (m.equipe1) stats.teams.add(m.equipe1);
            if (m.equipe2) stats.teams.add(m.equipe2);
            if (m.horaire) stats.timeSlots.add(m.horaire);
        });
        
        return {
            totalMatches: matches.length,
            totalWeeks: stats.weeks.size,
            totalPools: stats.pools.size,
            totalVenues: stats.venues.size,
            weeks: Array.from(stats.weeks).sort((a, b) => a - b),
            pools: Array.from(stats.pools).sort(),
            venues: Array.from(stats.venues).sort(),
            institutions: Array.from(stats.institutions).sort(),
            teams: Array.from(stats.teams).sort(),
            timeSlots: Array.from(stats.timeSlots).sort((a, b) => {
                return Utils.parseTime(a) - Utils.parseTime(b);
            })
        };
    },

    /**
     * Parse une heure au format "HH:MM" en minutes depuis minuit
     */
    parseTime(timeStr) {
        // Vérifier si timeStr est null, undefined ou vide
        if (!timeStr || typeof timeStr !== 'string') {
            return 0; // Retourner 0 pour minuit par défaut
        }
        
        const [hours, minutes] = timeStr.split(':').map(Number);
        return hours * 60 + (minutes || 0);
    },

    /**
     * Formate une heure
     */
    formatTime(timeStr) {
        return timeStr;
    },

    /**
     * Groupe les matchs par clé
     */
    groupBy(matches, keyFn) {
        const grouped = {};
        matches.forEach(m => {
            const key = keyFn(m);
            if (!grouped[key]) grouped[key] = [];
            grouped[key].push(m);
        });
        return grouped;
    },

    /**
     * Filtre les matchs selon les critères
     */
    filterMatches(matches, filters) {
        return matches.filter(m => {
            if (filters.gender && m.equipe1_genre !== filters.gender && m.equipe2_genre !== filters.gender) {
                return false;
            }
            if (filters.institution && m.institution1 !== filters.institution && m.institution2 !== filters.institution) {
                return false;
            }
            if (filters.team && m.equipe1 !== filters.team && m.equipe2 !== filters.team) {
                return false;
            }
            if (filters.pool && m.poule !== filters.pool) {
                return false;
            }
            if (filters.venue && m.gymnase !== filters.venue) {
                return false;
            }
            if (filters.week && m.semaine != filters.week) {
                return false;
            }
            return true;
        });
    },

    /**
     * Filtre les matchs non planifiés
     */
    filterUnscheduled(matches, filters) {
        return matches.filter(m => {
            if (filters.gender && m.equipe1_genre !== filters.gender && m.equipe2_genre !== filters.gender) {
                return false;
            }
            if (filters.institution && m.institution1 !== filters.institution && m.institution2 !== filters.institution) {
                return false;
            }
            if (filters.team && m.equipe1 !== filters.team && m.equipe2 !== filters.team) {
                return false;
            }
            if (filters.pool && m.poule !== filters.pool) {
                return false;
            }
            return true;
        });
    },

    /**
     * Formate les horaires préférés (gauche)
     */
    formatHorairesLeft(horaires) {
        if (!horaires || horaires.length === 0) {
            return `<span class="horaires-preferes no-preferences" title="Aucun horaire préféré défini">⏰ −</span>`;
        }
        const horaireStr = horaires[0];
        return `<span class="horaires-preferes" title="Horaire préféré: ${horaireStr}">⏰ ${horaireStr}</span>`;
    },

    /**
     * Formate les horaires préférés (droite) - maintenant centré comme gauche
     */
    formatHorairesRight(horaires) {
        if (!horaires || horaires.length === 0) {
            return `<span class="horaires-preferes no-preferences" title="Aucun horaire préféré défini">⏰ −</span>`;
        }
        const horaireStr = horaires[0];
        return `<span class="horaires-preferes" title="Horaire préféré: ${horaireStr}">⏰ ${horaireStr}</span>`;
    },

    /**
     * Sauvegarde les préférences dans localStorage
     */
    savePreferences(prefs) {
        try {
            localStorage.setItem('pycalendar_preferences', JSON.stringify(prefs));
        } catch (e) {
            console.warn('Impossible de sauvegarder les préférences:', e);
        }
    },

    /**
     * Charge les préférences depuis localStorage
     */
    loadPreferences() {
        try {
            const stored = localStorage.getItem('pycalendar_preferences');
            return stored ? JSON.parse(stored) : null;
        } catch (e) {
            console.warn('Impossible de charger les préférences:', e);
            return null;
        }
    },

    /**
     * Échappe le HTML
     */
    escapeHtml(text) {
        if (text == null) {
            return '';
        }
        const map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
    },

    /**
     * Débounce une fonction
     */
    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    },

    /**
     * Calcule la position verticale d'un match dans la grille (en px)
     */
    getMatchPosition(horaire, startTime, slotHeight) {
        const matchMinutes = this.parseTime(horaire);
        const startMinutes = this.parseTime(startTime);
        const offsetMinutes = matchMinutes - startMinutes;
        return (offsetMinutes / 60) * slotHeight;
    },

    /**
     * Calcule la hauteur d'un match dans la grille (assume 1h par défaut)
     */
    getMatchHeight(slotHeight, duration = 60) {
        return (duration / 60) * slotHeight;
    },

    /**
     * Génère une échelle de temps
     */
    generateTimeScale(startHour, endHour, intervalMinutes = 60) {
        const times = [];
        for (let hour = startHour; hour <= endHour; hour++) {
            for (let minute = 0; minute < 60; minute += intervalMinutes) {
                if (hour === endHour && minute > 0) break;
                const timeStr = `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
                times.push(timeStr);
            }
        }
        return times;
    },

    /**
     * Détecte les heures min et max des matchs
     */
    getTimeRange(matches) {
        if (matches.length === 0) return { min: '08:00', max: '20:00' };
        
        const times = matches.map(m => this.parseTime(m.horaire));
        const minMinutes = Math.min(...times);
        const maxMinutes = Math.max(...times);
        
        // Arrondir à l'heure inférieure/supérieure
        const minHour = Math.floor(minMinutes / 60);
        const maxHour = Math.ceil((maxMinutes + 60) / 60); // +60 pour la durée du match
        
        return {
            min: `${String(minHour).padStart(2, '0')}:00`,
            max: `${String(maxHour).padStart(2, '0')}:00`
        };
    },

    /**
     * Crée une structure de créneaux pour la grille
     */
    createSlotStructure(venues, timeSlots, week, matches, availableSlots) {
        const structure = {};
        
        venues.forEach(venue => {
            structure[venue] = {};
            timeSlots.forEach(time => {
                const key = `${venue}_${week}_${time}`;
                const match = matches.find(m => 
                    m.gymnase === venue && 
                    m.semaine === week && 
                    m.horaire === time
                );
                
                const isAvailable = availableSlots.some(slot => 
                    slot.gymnase === venue && 
                    slot.semaine === week && 
                    slot.horaire === time
                );
                
                structure[venue][time] = {
                    match: match || null,
                    available: isAvailable && !match
                };
            });
        });
        
        return structure;
    }
};

// Export pour utilisation
if (typeof module !== 'undefined' && module.exports) {
    module.exports = Utils;
}

</script>
<script>
/**
 * DataManager - Source de vérité unique pour toutes les données du calendrier
 * 
 * RESPONSABILITÉS:
 * - Stocker les données originales (immuables)
 * - Gérer les modifications (localStorage)
 * - Calculer l'état actuel des matchs (original + modifications)
 * - Synchroniser avec SlotManager
 * - Notifier les observateurs des changements
 * 
 * PRINCIPES:
 * 1. Une seule source de vérité
 * 2. Immutabilité des données originales
 * 3. État calculé = Original + Modifications
 * 4. Synchronisation automatique
 */

class DataManager {
    constructor(originalMatches, originalSlots, unscheduledMatches) {
        // ============ DONNÉES ORIGINALES (IMMUABLES) ============
        this.originalMatches = this._deepFreeze(originalMatches);
        this.originalSlots = this._deepFreeze(originalSlots);
        this.unscheduledMatches = unscheduledMatches;
        
        // ============ ÉTAT ACTUEL (CALCULÉ) ============
        this.currentMatches = [];
        this.modifications = this._loadModifications();
        
        // ============ OBSERVATEURS ============
        this.observers = new Set();
        
        // ============ INITIALISATION ============
        this._recalculateCurrentState();
        
        console.log('📊 DataManager initialized:', {
            originalMatches: this.originalMatches.length,
            modifications: Object.keys(this.modifications).length,
            currentMatches: this.currentMatches.length
        });
    }
    
    /**
     * Deep freeze pour garantir l'immutabilité
     */
    _deepFreeze(data) {
        const frozen = JSON.parse(JSON.stringify(data));
        Object.freeze(frozen);
        return frozen;
    }
    
    /**
     * Charger les modifications depuis localStorage
     */
    _loadModifications() {
        try {
            const saved = localStorage.getItem('matchModifications');
            return saved ? JSON.parse(saved) : {};
        } catch (e) {
            console.error('❌ Error loading modifications:', e);
            return {};
        }
    }
    
    /**
     * Sauvegarder les modifications dans localStorage
     */
    _saveModifications() {
        try {
            localStorage.setItem('matchModifications', JSON.stringify(this.modifications));
            console.log('💾 Modifications saved:', Object.keys(this.modifications).length);
        } catch (e) {
            console.error('❌ Error saving modifications:', e);
        }
    }
    
    /**
     * MÉTHODE CENTRALE: Recalculer l'état actuel
     * État actuel = Données originales + Modifications appliquées
     */
    _recalculateCurrentState() {
        console.log('🔄 Recalculating current state...');
        
        // Step 1: Clone original data
        this.currentMatches = JSON.parse(JSON.stringify(this.originalMatches));
        
        // Step 2: Apply all modifications
        Object.entries(this.modifications).forEach(([matchId, mod]) => {
            const match = this.currentMatches.find(m => m.match_id === matchId);
            if (match) {
                match.semaine = mod.new.week;
                match.horaire = mod.new.time;
                match.gymnase = mod.new.venue;
                console.log(`  ✏️ Applied: ${matchId} → ${mod.new.week}/${mod.new.time}/${mod.new.venue}`);
            } else {
                console.warn(`  ⚠️ Match ${matchId} not found`);
            }
        });
        
        console.log('✅ Current state recalculated:', this.currentMatches.length, 'matches');
    }
    
    /**
     * LECTURE: Obtenir l'état actuel des matchs
     */
    getCurrentMatches() {
        return [...this.currentMatches]; // Return copy to prevent external mutation
    }
    
    /**
     * LECTURE: Obtenir les données originales
     */
    getOriginalMatches() {
        return this.originalMatches; // Already frozen, safe to return
    }
    
    /**
     * LECTURE: Obtenir les slots originaux
     */
    getOriginalSlots() {
        return this.originalSlots; // Already frozen, safe to return
    }
    
    /**
     * LECTURE: Obtenir les modifications
     */
    getModifications() {
        return {...this.modifications}; // Return copy
    }
    
    /**
     * LECTURE: Vérifier si un match a été modifié
     */
    isModified(matchId) {
        return matchId in this.modifications;
    }
    
    /**
     * ÉCRITURE: Enregistrer une modification
     */
    saveModification(modification) {
        const { match_id, original, new: newValues } = modification;
        
        console.log('📝 Saving modification:', match_id);
        
        // Check if modification actually changes something
        const hasChange = 
            original.week !== newValues.week ||
            original.time !== newValues.time ||
            original.venue !== newValues.venue;
        
        if (!hasChange) {
            console.log('  ℹ️ No actual change, ignoring');
            return false;
        }
        
        // Save modification
        this.modifications[match_id] = {
            original: {...original},
            new: {...newValues},
            timestamp: new Date().toISOString()
        };
        
        // Persist to localStorage
        this._saveModifications();
        
        // Recalculate current state
        this._recalculateCurrentState();
        
        // Notify observers
        this._notifyObservers({
            type: 'MODIFICATION_SAVED',
            matchId: match_id,
            modification: this.modifications[match_id]
        });
        
        return true;
    }
    
    /**
     * ÉCRITURE: Annuler une modification
     */
    undoModification(matchId) {
        if (!(matchId in this.modifications)) {
            console.warn('⚠️ No modification to undo for', matchId);
            return false;
        }
        
        console.log('↩️ Undoing modification:', matchId);
        
        delete this.modifications[matchId];
        this._saveModifications();
        this._recalculateCurrentState();
        
        this._notifyObservers({
            type: 'MODIFICATION_UNDONE',
            matchId: matchId
        });
        
        return true;
    }
    
    /**
     * ÉCRITURE: Annuler toutes les modifications
     */
    resetAllModifications() {
        console.log('🔄 Resetting all modifications');
        
        const count = Object.keys(this.modifications).length;
        this.modifications = {};
        
        this._saveModifications();
        this._recalculateCurrentState();
        
        this._notifyObservers({
            type: 'ALL_MODIFICATIONS_RESET',
            count: count
        });
        
        return count;
    }
    
    /**
     * OBSERVATEUR: S'abonner aux changements
     */
    subscribe(callback) {
        this.observers.add(callback);
        console.log('👀 Observer subscribed, total:', this.observers.size);
        
        // Return unsubscribe function
        return () => {
            this.observers.delete(callback);
            console.log('👋 Observer unsubscribed, total:', this.observers.size);
        };
    }
    
    /**
     * OBSERVATEUR: Notifier tous les observateurs
     */
    _notifyObservers(event) {
        console.log('📢 Notifying observers:', event.type);
        this.observers.forEach(callback => {
            try {
                callback(event);
            } catch (e) {
                console.error('❌ Observer callback error:', e);
            }
        });
    }
    
    /**
     * UTILITAIRE: Obtenir un match par ID (état actuel)
     */
    getMatchById(matchId) {
        return this.currentMatches.find(m => m.match_id === matchId);
    }
    
    /**
     * UTILITAIRE: Obtenir un match original par ID
     */
    getOriginalMatchById(matchId) {
        return this.originalMatches.find(m => m.match_id === matchId);
    }
    
    /**
     * UTILITAIRE: Statistiques
     */
    getStats() {
        return {
            totalMatches: this.originalMatches.length,
            modifiedMatches: Object.keys(this.modifications).length,
            unscheduledMatches: this.unscheduledMatches.length,
            modificationRate: (Object.keys(this.modifications).length / this.originalMatches.length * 100).toFixed(1) + '%'
        };
    }
    
    /**
     * DEBUG: Afficher l'état complet
     */
    debugState() {
        console.group('🔍 DataManager State');
        console.log('Original matches:', this.originalMatches.length);
        console.log('Current matches:', this.currentMatches.length);
        console.log('Modifications:', Object.keys(this.modifications).length);
        console.log('Observers:', this.observers.size);
        console.table(this.getStats());
        console.groupEnd();
    }
}

</script>
<script>
/**
 * PyCalendar Pro - Calculateur de Pénalités
 * Reproduit la logique Python de calcul des pénalités pour permettre
 * le recalcul dynamique après chaque modification
 */

class PenaltyCalculator {
    /**
     * @param {Object} config - Configuration des pénalités
     */
    constructor(config = {}) {
        // Paramètres pour horaires préférés
        this.weight = config.weight || 10.0;
        this.penaltyBeforeOne = config.penaltyBeforeOne || 100.0;
        this.penaltyBeforeBoth = config.penaltyBeforeBoth || 300.0;
        this.divisor = config.divisor || 60.0;
        this.tolerance = config.tolerance || 0.0;
        
        // Paramètres pour espacement entre matchs
        this.penaltyList = config.penaltyList || [500, 100, 50, 30, 20, 10];
        this.minSpacing = config.minSpacing || 2; // jours minimum entre matchs
        
        console.log('🧮 PenaltyCalculator initialized:', {
            weight: this.weight,
            penaltyBeforeOne: this.penaltyBeforeOne,
            penaltyBeforeBoth: this.penaltyBeforeBoth,
            divisor: this.divisor,
            tolerance: this.tolerance,
            minSpacing: this.minSpacing
        });
    }
    
    /**
     * Convertit un horaire (format "14H30", "20H00") en minutes depuis minuit
     */
    _parseHoraire(horaire) {
        try {
            const cleaned = horaire.trim().toUpperCase().replace('H', ':');
            let timeStr = cleaned;
            if (!timeStr.includes(':')) {
                timeStr += ':00';
            }
            
            const parts = timeStr.split(':');
            const heures = parseInt(parts[0]);
            const minutes = parts.length > 1 ? parseInt(parts[1]) : 0;
            
            return heures * 60 + minutes;
        } catch (e) {
            console.warn('Error parsing horaire:', horaire, e);
            return 14 * 60; // Défaut 14h
        }
    }
    
    /**
     * Calcule la pénalité d'horaire préféré pour une équipe
     * Retourne [pénalité_distance, is_before]
     */
    _calculatePenaltyForEquipe(equipe, creaneauHoraire, equipeHorairesPreferes) {
        // Utiliser les horaires préférés fournis ou ceux de l'équipe
        const horairesPreferes = equipeHorairesPreferes || [];
        
        if (!horairesPreferes || horairesPreferes.length === 0) {
            return [0.0, false];
        }
        
        // Si le créneau correspond exactement à un horaire préféré
        if (horairesPreferes.includes(creaneauHoraire)) {
            return [0.0, false];
        }
        
        // Parser les horaires
        const horaireMatch = this._parseHoraire(creaneauHoraire);
        const horairePref = this._parseHoraire(horairesPreferes[0]); // Prendre le premier
        
        // Calculer la distance en minutes
        const distanceMinutes = Math.abs(horaireMatch - horairePref);
        
        // Vérifier la tolérance
        if (distanceMinutes <= this.tolerance) {
            return [0.0, false];
        }
        
        // Hors tolérance : distance totale
        const isBefore = horaireMatch < horairePref;
        
        return [distanceMinutes, isBefore];
    }
    
    /**
     * Calcule la pénalité d'horaire préféré pour un match
     */
    calculatePreferredTimePenalty(match) {
        const [distance1, isBefore1] = this._calculatePenaltyForEquipe(
            match.equipe1,
            match.horaire,
            match.equipe1_horaires_preferes || []
        );
        
        const [distance2, isBefore2] = this._calculatePenaltyForEquipe(
            match.equipe2,
            match.horaire,
            match.equipe2_horaires_preferes || []
        );
        
        // Si aucune distance, pas de pénalité
        if (distance1 === 0 && distance2 === 0) {
            return 0.0;
        }
        
        // Compter les équipes HORS tolérance qui jouent AVANT
        let nbEquipesAvantHorsTolerance = 0;
        if (distance1 > 0 && isBefore1) nbEquipesAvantHorsTolerance++;
        if (distance2 > 0 && isBefore2) nbEquipesAvantHorsTolerance++;
        
        // Déterminer le multiplicateur
        let multiplicateur;
        if (nbEquipesAvantHorsTolerance === 2) {
            multiplicateur = this.penaltyBeforeBoth;
        } else if (nbEquipesAvantHorsTolerance === 1) {
            multiplicateur = this.penaltyBeforeOne;
        } else {
            multiplicateur = this.weight;
        }
        
        // Calculer la pénalité totale
        let penalty = 0.0;
        if (distance1 > 0) {
            penalty += multiplicateur * Math.pow(distance1 / this.divisor, 2);
        }
        if (distance2 > 0) {
            penalty += multiplicateur * Math.pow(distance2 / this.divisor, 2);
        }
        
        return penalty;
    }
    
    /**
     * Calcule la pénalité d'espacement entre matchs pour une équipe
     */
    _calculateSpacingPenaltyForEquipe(equipe, weekOfMatch, allMatches) {
        let totalPenalty = 0.0;
        
        // Trouver tous les matchs de cette équipe
        const equipeMatches = allMatches.filter(m => 
            m.semaine && 
            (m.equipe1 === equipe || m.equipe2 === equipe)
        );
        
        // Pour chaque autre match de l'équipe
        for (const otherMatch of equipeMatches) {
            if (otherMatch.semaine === weekOfMatch) continue; // Même semaine, pas d'espacement
            
            const weekDiff = Math.abs(otherMatch.semaine - weekOfMatch);
            
            // Si espacement < minSpacing, appliquer pénalité
            if (weekDiff < this.minSpacing) {
                // weekDiff = 1 → index 0 (penaltyList[0] = 500)
                const penaltyIndex = weekDiff - 1;
                if (penaltyIndex >= 0 && penaltyIndex < this.penaltyList.length) {
                    totalPenalty += this.penaltyList[penaltyIndex];
                }
            }
        }
        
        return totalPenalty;
    }
    
    /**
     * Calcule la pénalité d'espacement pour un match
     */
    calculateSpacingPenalty(match, allMatches) {
        if (!match.semaine) return 0.0;
        
        const penalty1 = this._calculateSpacingPenaltyForEquipe(
            match.equipe1,
            match.semaine,
            allMatches
        );
        
        const penalty2 = this._calculateSpacingPenaltyForEquipe(
            match.equipe2,
            match.semaine,
            allMatches
        );
        
        // Retourner le maximum des deux (une seule pénalité par match)
        return Math.max(penalty1, penalty2);
    }
    
    /**
     * Calcule la pénalité totale pour un match
     */
    calculateTotalPenalty(match, allMatches) {
        // Si match non planifié, pénalité nulle (ou utiliser une pénalité spécifique)
        if (!match.semaine || !match.horaire || !match.gymnase) {
            return 0.0;
        }
        
        const preferredTimePenalty = this.calculatePreferredTimePenalty(match);
        const spacingPenalty = this.calculateSpacingPenalty(match, allMatches);
        
        const totalPenalty = preferredTimePenalty + spacingPenalty;
        
        return totalPenalty;
    }
    
    /**
     * Recalcule les pénalités pour tous les matchs
     */
    recalculateAllPenalties(matches) {
        console.log('🔄 Recalculating penalties for', matches.length, 'matches...');
        
        const updatedMatches = matches.map(match => {
            const penalty = this.calculateTotalPenalty(match, matches);
            
            return {
                ...match,
                penalty: penalty
            };
        });
        
        // Statistiques
        const totalPenalty = updatedMatches.reduce((sum, m) => sum + (m.penalty || 0), 0);
        const avgPenalty = totalPenalty / updatedMatches.length;
        const maxPenalty = Math.max(...updatedMatches.map(m => m.penalty || 0));
        const matchesWithPenalty = updatedMatches.filter(m => (m.penalty || 0) > 0).length;
        
        console.log('✅ Penalties recalculated:', {
            total: totalPenalty.toFixed(1),
            average: avgPenalty.toFixed(1),
            max: maxPenalty.toFixed(1),
            withPenalty: matchesWithPenalty
        });
        
        return updatedMatches;
    }
    
    /**
     * Obtenir les statistiques de pénalités
     */
    getPenaltyStats(matches) {
        const totalPenalty = matches.reduce((sum, m) => sum + (m.penalty || 0), 0);
        const avgPenalty = totalPenalty / matches.length;
        const maxPenalty = Math.max(...matches.map(m => m.penalty || 0));
        const matchesWithPenalty = matches.filter(m => (m.penalty || 0) > 0).length;
        
        return {
            total: totalPenalty,
            average: avgPenalty,
            max: maxPenalty,
            withPenalty: matchesWithPenalty,
            percentage: (matchesWithPenalty / matches.length * 100).toFixed(1)
        };
    }
}

// Export pour utilisation
if (typeof module !== 'undefined' && module.exports) {
    module.exports = PenaltyCalculator;
}

</script>
<script>
/**
 * PyCalendar Pro - Composants de Match
 * Rendu des cartes et blocs de match
 */

class MatchCard {
    /**
     * Rend une carte de match complète (pour vue cartes)
     * @param {Object} match - Données du match
     * @param {boolean} isUnscheduled - Si le match est non planifié
     * @param {Object} filters - Filtres actifs
     * @param {Object} preferences - Préférences d'affichage
     * @param {boolean} showWeekBadge - Si true, affiche le badge de semaine (par défaut: true pour vues gymnase/poule/pénalités, false pour vue semaine)
     * @param {boolean} showPoolBadge - Si true, affiche le badge de poule (par défaut: true pour vues gymnase/semaine, false pour vue poule)
     */
    static render(match, isUnscheduled = false, filters = {}, preferences = {}, showWeekBadge = true, showPoolBadge = true) {
        const gender = Utils.getGender(match.poule);
        const category = Utils.getCategory(match.poule);
        const team1Class = Utils.shouldHighlight(match.equipe1, match.institution1, filters) ? 'team highlighted' : 'team';
        const team2Class = Utils.shouldHighlight(match.equipe2, match.institution2, filters) ? 'team highlighted' : 'team';
        
        const showInst = preferences.showInstitutions !== false;
        const showGenre = preferences.showGenreBadges !== false;
        
        // Contrôle intelligent des badges via préférences
        const showWeek = showWeekBadge && preferences.showWeekBadges !== false;
        const showPool = showPoolBadge && preferences.showPoolBadges !== false;
        
        // Icônes de genre
        const genderIcon = gender === 'male' ? '♂' : gender === 'female' ? '♀' : '⚥';
        
        // Use match_id from data (double underscore format from Phase 1)
        const matchId = match.match_id || `${match.equipe1}_${match.equipe2}_${match.poule}`;
        
        // Prepare match data for drag-and-drop
        const matchData = JSON.stringify({
            match_id: matchId,
            equipe1: match.equipe1,
            equipe2: match.equipe2,
            poule: match.poule,
            semaine: match.semaine,
            horaire: match.horaire,
            gymnase: match.gymnase
        }).replace(/"/g, '&quot;');
        
        return `
            <div class="match-card ${gender} ${isUnscheduled ? 'unscheduled' : ''} ${!match.has_score ? 'no-score' : ''} ${!match.is_fixed && !isUnscheduled ? 'auto-scheduled' : ''}" 
                 data-match-id="${matchId}"
                 data-gender="${gender}"
                 data-category="${category}"
                 data-pool="${Utils.escapeHtml(match.poule)}"
                 data-institution1="${Utils.escapeHtml(match.institution1)}"
                 data-institution2="${Utils.escapeHtml(match.institution2)}"
                 data-match-data="${matchData}"
                 data-tooltip="${match.equipe1} vs ${match.equipe2}"
                 ${!isUnscheduled ? 'draggable="true"' : ''}
                 ondragstart="MatchCard.handleDragStart(event)"
                 ondragend="MatchCard.handleDragEnd(event)">
                
                ${!isUnscheduled ? `
                    <button class="match-edit-btn" onclick="editModal.open({
                        match_id: '${matchId}',
                        equipe1: '${Utils.escapeHtml(match.equipe1).replace(/'/g, "\\'")}',
                        equipe2: '${Utils.escapeHtml(match.equipe2).replace(/'/g, "\\'")}',
                        poule: '${Utils.escapeHtml(match.poule)}',
                        semaine: ${match.semaine},
                        horaire: '${Utils.escapeHtml(match.horaire)}',
                        gymnase: '${Utils.escapeHtml(match.gymnase)}'
                    }, this.closest('.match-card'))">✏️</button>
                ` : ''}
                
                <div class="match-header">
                    <div class="match-badges">
                        ${showPool ? `<span class="badge badge-poule">${Utils.escapeHtml(match.poule)}</span>` : ''}
                        ${showGenre ? `<span class="badge badge-gender-${gender}">${genderIcon} ${gender === 'male' ? 'M' : 'F'}</span>` : ''}
                        <span class="badge badge-cat-${category}">${category.toUpperCase()}</span>
                        ${showWeek && !isUnscheduled ? `<span class="badge badge-week">📅 S${match.semaine}</span>` : ''}
                        ${!match.has_score && !isUnscheduled && match.is_fixed ? '<span class="badge badge-no-score">⏳ Score attendu</span>' : ''}
                        ${isUnscheduled ? '<span class="badge badge-unscheduled">⚠️ Non planifié</span>' : ''}
                    </div>
                    ${!isUnscheduled ? `
                        <div class="match-time">
                            <span class="time-icon">⏰</span>
                            <span class="time-value match-time">${Utils.escapeHtml(match.horaire)}</span>
                        </div>
                    ` : ''}
                </div>
                
                <div class="match-teams-container">
                    <div class="team-block team-1">
                        ${Utils.formatHorairesLeft(match.equipe1_horaires_preferes)}
                        <div class="${team1Class}">
                            <span class="team-name">${Utils.escapeHtml(match.equipe1)}</span>
                        </div>
                        ${showInst ? `<div class="team-institution">🏛️ ${Utils.escapeHtml(match.institution1)}</div>` : ''}
                    </div>
                    
                    <div class="vs-divider">
                        ${match.score ? `
                            <div class="score-display">
                                <span class="score-text">${match.score}</span>
                            </div>
                        ` : `
                            <div class="vs-circle">
                                <span class="vs-text">VS</span>
                            </div>
                        `}
                    </div>
                    
                    <div class="team-block team-2">
                        ${Utils.formatHorairesRight(match.equipe2_horaires_preferes)}
                        <div class="${team2Class}">
                            <span class="team-name">${Utils.escapeHtml(match.equipe2)}</span>
                        </div>
                        ${showInst ? `<div class="team-institution">🏛️ ${Utils.escapeHtml(match.institution2)}</div>` : ''}
                    </div>
                </div>
                
                ${!isUnscheduled ? `
                    <div class="match-footer">
                        <div class="match-venue match-venue">
                            <span class="venue-icon">🏢</span>
                            <span class="venue-name">${Utils.escapeHtml(match.gymnase)}</span>
                        </div>
                    </div>
                ` : `
                    <div class="match-footer unscheduled">
                        <div class="unscheduled-alert">
                            <span class="alert-icon">❌</span>
                            <span class="alert-text">Match non planifié</span>
                        </div>
                    </div>
                `}
            </div>
        `;
    }
    
    /**
     * Handle drag start event
     */
    static handleDragStart(e) {
        const card = e.currentTarget;
        const matchData = card.getAttribute('data-match-data');
        
        if (!matchData) return;
        
        // Set drag data
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('application/json', matchData.replace(/&quot;/g, '"'));
        e.dataTransfer.setData('text/plain', card.getAttribute('data-match-id'));
        
        // Visual feedback
        card.classList.add('dragging');
        card.style.opacity = '0.4';
        
        // Store dragged element reference
        window.draggedMatchCard = card;
    }
    
    /**
     * Handle drag end event
     */
    static handleDragEnd(e) {
        const card = e.currentTarget;
        
        // Remove visual feedback
        card.classList.remove('dragging');
        card.style.opacity = '1';
        
        // Clean up reference
        window.draggedMatchCard = null;
        
        // Remove all drop zone highlighting
        document.querySelectorAll('.drop-zone-active, .drop-zone-invalid').forEach(el => {
            el.classList.remove('drop-zone-active', 'drop-zone-invalid');
        });
    }
}

// Export pour utilisation
if (typeof module !== 'undefined' && module.exports) {
    module.exports = MatchCard;
}

</script>
<script>
/**
 * PyCalendar Pro - Vue Cartes
 * Gère les vues par semaine, poule, gymnase avec cartes de matchs
 */

class CalendarView {
    /**
     * Rend la vue par semaines
     */
    static renderByWeek(matches, filters, preferences) {
        const container = document.getElementById('calendarContent');
        
        if (matches.length === 0) {
            container.innerHTML = this.renderEmptyState();
            return;
        }
        
        // Grouper par semaine
        const byWeek = Utils.groupBy(matches, m => m.semaine);
        
        let html = '';
        Object.keys(byWeek).sort((a, b) => a - b).forEach(week => {
            const weekMatches = byWeek[week];
            html += `
                <section class="week-section">
                    <div class="week-header">
                        <div class="week-title">📅 Semaine ${week}</div>
                        <div class="week-count">${weekMatches.length} match${weekMatches.length > 1 ? 's' : ''}</div>
                    </div>
                    <div class="matches-grid">
                        ${weekMatches.map(m => MatchCard.render(m, false, filters, preferences, false, true)).join('')}
                    </div>
                </section>
            `;
        });
        
        container.innerHTML = html;
    }

    /**
     * Rend la vue par poules
     */
    static renderByPool(matches, filters, preferences) {
        const container = document.getElementById('poolsContent');
        
        if (matches.length === 0) {
            container.innerHTML = this.renderEmptyState();
            return;
        }
        
        // Grouper par poule
        const byPool = Utils.groupBy(matches, m => m.poule);
        
        let html = '';
        Object.keys(byPool).sort().forEach(pool => {
            const poolMatches = byPool[pool];
            html += `
                <section class="week-section">
                    <div class="week-header">
                        <div class="week-title">🎯 ${pool}</div>
                        <div class="week-count">${poolMatches.length} match${poolMatches.length > 1 ? 's' : ''}</div>
                    </div>
                    <div class="matches-grid">
                        ${poolMatches.map(m => MatchCard.render(m, false, filters, preferences, true, false)).join('')}
                    </div>
                </section>
            `;
        });
        
        container.innerHTML = html;
    }

    /**
     * Rend la vue par gymnases
     */
    static renderByVenue(matches, filters, preferences) {
        const container = document.getElementById('venuesContent');
        
        if (matches.length === 0) {
            container.innerHTML = this.renderEmptyState();
            return;
        }
        
        // Grouper par gymnase
        const byVenue = Utils.groupBy(matches, m => m.gymnase);
        
        let html = '';
        Object.keys(byVenue).sort().forEach(venue => {
            const venueMatches = byVenue[venue];
            html += `
                <section class="week-section">
                    <div class="week-header">
                        <div class="week-title">🏢 ${venue}</div>
                        <div class="week-count">${venueMatches.length} match${venueMatches.length > 1 ? 's' : ''}</div>
                    </div>
                    <div class="matches-grid">
                        ${venueMatches.map(m => MatchCard.render(m, false, filters, preferences, true, true)).join('')}
                    </div>
                </section>
            `;
        });
        
        container.innerHTML = html;
    }

    /**
     * Rend la vue des matchs non planifiés
     */
    static renderUnscheduled(matches, filters, preferences) {
        const container = document.getElementById('unscheduledContent');
        
        if (matches.length === 0) {
            container.innerHTML = this.renderSuccessState();
            return;
        }
        
        // Grouper par poule pour une meilleure organisation
        const byPool = Utils.groupBy(matches, m => m.poule);
        
        let html = `
            <div class="unscheduled-header">
                <div class="unscheduled-title">⚠️ Matchs Non Planifiés</div>
                <div class="unscheduled-count">${matches.length} match${matches.length > 1 ? 's' : ''} à planifier</div>
            </div>
        `;
        
        Object.keys(byPool).sort().forEach(pool => {
            const poolMatches = byPool[pool];
            html += `
                <section class="pool-section">
                    <div class="pool-header">
                        <div class="pool-title">🏆 ${pool}</div>
                        <div class="pool-count">${poolMatches.length} match${poolMatches.length > 1 ? 's' : ''}</div>
                    </div>
                    <div class="matches-grid">
                        ${poolMatches.map(m => MatchCard.render(m, true, filters, preferences, true, false)).join('')}
                    </div>
                </section>
            `;
        });
        
        container.innerHTML = html;
    }

    /**
     * Rend un état vide
     */
    static renderEmptyState() {
        return `
            <div class="empty-state">
                <div class="empty-icon">🔍</div>
                <h3 class="empty-title">Aucun match trouvé</h3>
                <p class="empty-text">Essayez de modifier vos filtres</p>
            </div>
        `;
    }

    /**
     * Rend un état de succès
     */
    static renderSuccessState() {
        return `
            <div class="success-state">
                <div class="success-icon">✅</div>
                <h2 class="success-title">Tous les matchs sont planifiés !</h2>
                <p class="success-text">Aucun match non planifié</p>
            </div>
        `;
    }

    /**
     * Met à jour les informations de filtre
     */
    static updateFilterInfo(matches, unscheduled, filters) {
        const container = document.getElementById('filterInfo');
        
        if (!filters.institution && !filters.team) {
            container.classList.remove('active');
            return;
        }
        
        container.classList.add('active');
        
        const title = filters.team ? `👥 ${filters.team}` : `🏛️ ${filters.institution}`;
        const subtitle = filters.team ? "Détails de l'équipe" : "Détails de l'institution";
        
        const weeks = new Set(matches.map(m => m.semaine));
        const venues = new Set(matches.map(m => m.gymnase));
        
        container.innerHTML = `
            <div class="filter-info-title">${title}</div>
            <div class="filter-info-subtitle">${subtitle}</div>
            <div class="filter-stats">
                <div class="filter-stat">
                    <div class="filter-stat-value">${matches.length}</div>
                    <div class="filter-stat-label">Planifiés</div>
                </div>
                <div class="filter-stat">
                    <div class="filter-stat-value">${unscheduled.length}</div>
                    <div class="filter-stat-label">Non planifiés</div>
                </div>
                <div class="filter-stat">
                    <div class="filter-stat-value">${weeks.size}</div>
                    <div class="filter-stat-label">Semaines</div>
                </div>
                <div class="filter-stat">
                    <div class="filter-stat-value">${venues.size}</div>
                    <div class="filter-stat-label">Gymnases</div>
                </div>
            </div>
        `;
    }
}

// Export pour utilisation
if (typeof module !== 'undefined' && module.exports) {
    module.exports = CalendarView;
}

</script>
<script>
/**
 * Vue Grille Horaire - Interface type Google Calendar
 * Affiche les matchs dans une grille horaire avec gymnases en colonnes
 */

class CalendarGridView {
    constructor() {
        this.currentWeek = null;
        this.timeSlotMinutes = 60; // Granularité : 30, 60 ou 120 minutes (défaut 1h)
        this.startHour = 8;  // Sera calculé dynamiquement
        this.endHour = 22;   // Sera calculé dynamiquement
        this.matchDuration = 90; // Durée d'un match en minutes
        this.marginMinutes = 30; // Marge avant/après pour le visuel
    }

    /**
     * Point d'entrée principal
     */
    render(container, allMatches, availableSlots, filters, preferences) {
        // Logs de débogage réduits (décommenter si nécessaire pour le debug)
        // console.log('🔵 CalendarGridView.render() - Container:', container ? 'OK' : 'NULL', 'Matches:', allMatches?.length || 0);
        
        // Utiliser timeSlotMinutes depuis preferences, mais seulement si c'est une valeur valide
        if (preferences?.timeSlotMinutes && [30, 60, 120].includes(preferences.timeSlotMinutes)) {
            this.timeSlotMinutes = preferences.timeSlotMinutes;
        } else {
            // Valeur par défaut sécurisée
            this.timeSlotMinutes = 60;
        }
        
        // Validation du container
        if (!container) {
            console.error('❌ ERREUR: Container est null ou undefined !');
            return;
        }
        
        // Validation des données
        if (!allMatches || allMatches.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">📭</div>
                    <h3 class="empty-title">Aucun match disponible</h3>
                    <p class="empty-text">Les données de matchs sont vides ou non chargées</p>
                </div>
            `;
            return;
        }
        
        // Initialiser ou conserver la semaine courante
        if (!this.currentWeek || this.currentWeek === null) {
            const weeks = [...new Set(allMatches.map(m => m.semaine))].sort((a, b) => a - b);
            this.currentWeek = weeks[0] || 1;
        }
        
        // Appliquer les filtres
        let filteredMatches = this.applyFilters(allMatches, filters);
        
        // Déterminer le mode d'affichage basé sur les filtres
        const displayMode = this.determineDisplayMode(filters);
        
        // Si un filtre de semaine est actif, synchroniser this.currentWeek
        if (filters.week) {
            this.currentWeek = parseInt(filters.week);
        }
        
        // Filtrer par semaine si mode semaine ET si pas déjà filtré par semaine
        let weekMatches, weekSlots;
        if (displayMode === 'week') {
            // Si filters.week existe, les matchs sont déjà filtrés, pas besoin de re-filtrer
            if (filters.week) {
                weekMatches = filteredMatches;
                weekSlots = availableSlots ? availableSlots.filter(s => s.semaine == this.currentWeek) : [];
            } else {
                // Sinon, filtrer par currentWeek (navigation normale)
                weekMatches = filteredMatches.filter(m => m.semaine == this.currentWeek);
                weekSlots = availableSlots ? availableSlots.filter(s => s.semaine == this.currentWeek) : [];
            }
        } else {
            weekMatches = filteredMatches;
            weekSlots = availableSlots || [];
        }
        
        // Calculer la plage horaire optimale basée sur les données réelles
        this.calculateTimeRange(weekMatches, weekSlots);
        
        // Obtenir les axes selon le mode d'affichage
        // IMPORTANT: Utiliser allMatches pour les axes, pas weekMatches, pour que la structure reste visible
        const axes = this.getAxes(allMatches, displayMode, filters, this.currentWeek);
        
        if (axes.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">📭</div>
                    <h3 class="empty-title">Aucune donnée disponible</h3>
                    <p class="empty-text">Les données de base sont vides</p>
                </div>
            `;
            return;
        }
        
        try {
            // Construire le HTML
            const html = this.buildHTML(allMatches, weekMatches, weekSlots, axes, displayMode, filters, preferences);
            
            // Injecter dans le container
            container.innerHTML = html;
            
            // Attacher les événements de navigation
            this.setupEventListeners(container, allMatches, availableSlots, filters, preferences);
            
        } catch (error) {
            console.error('❌ ERREUR lors du rendu:', error);
            console.error('Stack trace:', error.stack);
            container.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">⚠️</div>
                    <h3 class="empty-title">Erreur de rendu</h3>
                    <p class="empty-text">${error.message}</p>
                </div>
            `;
        }
    }
    
    /**
     * Applique les filtres sur les matchs
     */
    applyFilters(matches, filters) {
        let filtered = [...matches];
        
        // Filtre genre
        if (filters.gender) {
            filtered = filtered.filter(m => {
                const gender = Utils.getGender(m);
                // Mapper les filtres M, F, X vers male, female, mixed
                if (filters.gender === 'M') return gender === 'male';
                if (filters.gender === 'F') return gender === 'female';
                if (filters.gender === 'X') return gender === 'mixed';
                return true;
            });
        }
        
        // Filtre institution
        if (filters.institution) {
            filtered = filtered.filter(m => 
                m.institution1 === filters.institution || m.institution2 === filters.institution
            );
        }
        
        // Filtre équipe
        if (filters.team) {
            filtered = filtered.filter(m => 
                m.equipe1 === filters.team || m.equipe2 === filters.team
            );
        }
        
        // Filtre poule
        if (filters.pool) {
            filtered = filtered.filter(m => m.poule === filters.pool);
        }
        
        // Filtre gymnase
        if (filters.venue) {
            filtered = filtered.filter(m => m.gymnase === filters.venue);
        }
        
        // Filtre semaine
        if (filters.week) {
            filtered = filtered.filter(m => m.semaine == filters.week);
        }
        
        return filtered;
    }
    
    /**
     * Détermine le mode d'affichage basé sur les filtres actifs
     */
    determineDisplayMode(filters) {
        // Si filtre équipe -> afficher toutes les semaines
        if (filters.team) return 'team';
        
        // Si filtre gymnase -> afficher toutes les semaines
        if (filters.venue) return 'venue';
        
        // Si filtre poule -> afficher UNE semaine avec navigation (mode normal)
        // Note: le filtre de poule ne change PAS le mode d'affichage, seulement les données
        // if (filters.pool) return 'pool';
        
        // Par défaut -> afficher une semaine
        return 'week';
    }
    
    /**
     * Obtient les axes selon le mode d'affichage
     * @param {Array} allMatches - Tous les matchs disponibles (pour déterminer la structure)
     * @param {String} displayMode - Mode d'affichage actuel
     * @param {Object} filters - Filtres actifs
     * @param {Number} currentWeek - Semaine courante (optionnel)
     */
    getAxes(allMatches, displayMode, filters, currentWeek = null) {
        switch (displayMode) {
            case 'team':
                // Si équipe filtrée, afficher les semaines en colonnes (toutes les semaines disponibles)
                return [...new Set(allMatches.map(m => m.semaine))].sort((a, b) => a - b);
            
            case 'venue':
                // Si gymnase filtré, afficher les semaines en colonnes (toutes les semaines disponibles)
                return [...new Set(allMatches.map(m => m.semaine))].sort((a, b) => a - b);
            
            case 'week':
            default:
                // Par défaut, afficher les gymnases en colonnes (tous les gymnases disponibles)
                // Filtrer par semaine courante si nécessaire pour obtenir les bons gymnases
                let matchesForAxes = allMatches;
                if (currentWeek && !filters.week) {
                    matchesForAxes = allMatches.filter(m => m.semaine == currentWeek);
                }
                return [...new Set(matchesForAxes.map(m => m.gymnase))].sort();
        }
    }
    
    /**
     * Construit tout le HTML de la vue
     */
    buildHTML(allMatches, weekMatches, weekSlots, axes, displayMode, filters, preferences) {
        const showAvailable = preferences?.showAvailableSlots !== false;
        
        let html = '<div class="calendar-grid-container">';
        
        // Navigation
        html += this.renderNavigationBar(allMatches, displayMode, filters);
        
        // Message d'information si aucun match filtré
        if (weekMatches.length === 0) {
            html += `
                <div class="calendar-empty-notice">
                    <div class="empty-notice-content">
                        <span class="empty-notice-icon">ℹ️</span>
                        <span class="empty-notice-text">Aucun match ne correspond aux filtres actifs pour cette période. La structure du calendrier reste visible pour la navigation.</span>
                    </div>
                </div>
            `;
        }
        
        // Grille
        html += '<div class="calendar-grid-wrapper">';
        
        // Colonne des heures
        html += this.renderTimeColumn();
        
        // Colonnes selon le mode
        html += '<div class="calendar-venues-container">';
        axes.forEach((axis) => {
            const axisMatches = this.getAxisMatches(weekMatches, axis, displayMode, filters);
            const axisSlots = showAvailable ? this.getAxisSlots(weekSlots, axis, displayMode, filters) : [];
            html += this.renderAxisColumn(axis, axisMatches, axisSlots, displayMode, preferences, filters);
        });
        html += '</div>'; // calendar-venues-container
        
        html += '</div>'; // calendar-grid-wrapper
        html += '</div>'; // calendar-grid-container
        
        return html;
    }
    
    /**
     * Obtient les matchs pour un axe donné
     * Trie les matchs pour un affichage cohérent
     */
    getAxisMatches(matches, axis, displayMode, filters) {
        let filtered;
        switch (displayMode) {
            case 'team':
            case 'venue':
                // Axe = semaine
                filtered = matches.filter(m => m.semaine == axis);
                break;
            case 'week':
            default:
                // Axe = gymnase
                filtered = matches.filter(m => m.gymnase === axis);
                break;
        }
        
        // TRI pour affichage cohérent: horaire → equipe1 → equipe2
        return filtered.sort((a, b) => {
            // 1. Par horaire
            if (a.horaire !== b.horaire) {
                return (a.horaire || '').localeCompare(b.horaire || '');
            }
            
            // 2. Par equipe1
            if (a.equipe1 !== b.equipe1) {
                return (a.equipe1 || '').localeCompare(b.equipe1 || '');
            }
            
            // 3. Par equipe2
            return (a.equipe2 || '').localeCompare(b.equipe2 || '');
        });
    }
    
    /**
     * Obtient les créneaux disponibles pour un axe donné
     */
    getAxisSlots(slots, axis, displayMode, filters) {
        switch (displayMode) {
            case 'team':
            case 'venue':
                // Axe = semaine
                const venue = filters.venue || (slots[0] ? slots[0].gymnase : null);
                return slots.filter(s => s.semaine == axis && (!venue || s.gymnase === venue));
            case 'week':
            default:
                // Axe = gymnase
                return slots.filter(s => s.gymnase === axis);
        }
    }
    
    /**
     * Rendu d'une colonne (remplace renderVenueColumn avec gestion multi-mode)
     */
    renderAxisColumn(axis, matches, availableSlots, displayMode, preferences, filters) {
        const slotHeight = this.getSlotHeight();
        const timeSlots = this.generateTimeSlots();
        
        // Déterminer le label et l'icône selon le mode
        let label, icon, count;
        switch (displayMode) {
            case 'team':
            case 'venue':
                // Axe = semaine - utiliser semaine_display si disponible
                const sampleMatch = matches.length > 0 ? matches[0] : null;
                if (sampleMatch && sampleMatch.semaine_display) {
                    label = sampleMatch.semaine_display;
                } else {
                    label = `Semaine ${axis}`;
                }
                icon = '📅';
                break;
            case 'week':
            default:
                label = axis;
                icon = '🏢';
                break;
        }
        
        // NOUVEAU: Grouper les matchs par créneau horaire pour gérer les matchs simultanés
        const matchesBySlot = this.groupMatchesByTimeSlot(matches);
        
        // Calculer le nombre maximum de matchs simultanés pour dimensionner la colonne
        const maxSimultaneous = Math.max(1, ...Object.values(matchesBySlot).map(arr => arr.length));
        
        let html = '<div class="calendar-venue-column">';
        
        // En-tête
        html += `
            <div class="calendar-venue-header">
                <div class="venue-name">${icon} ${label}</div>
                <div class="venue-count">${matches.length} matchs</div>
            </div>
        `;
        
        // Grille avec lignes horaires de fond
        html += `<div class="calendar-venue-grid drop-zone" 
                     data-week="${displayMode === 'week' ? (filters.week || 1) : axis}"
                     data-venue="${displayMode === 'week' ? axis : (filters.venue || '')}"
                     ondragover="CalendarGridView.handleDragOver(event)"
                     ondragleave="CalendarGridView.handleDragLeave(event)"
                     ondrop="CalendarGridView.handleDrop(event)">`;
        
        // Lignes de fond
        timeSlots.forEach(slot => {
            const cssClass = slot.isHour ? 'hour-mark' : '';
            html += `<div class="calendar-grid-line ${cssClass}" style="height: ${slotHeight}px"></div>`;
        });
        
        // Créneaux disponibles (blocs verts) - SIMPLIFIÉ: ne pas afficher si matchs simultanés
        availableSlots.forEach(slot => {
            const pos = this.calculateBlockPosition(slot.horaire, this.matchDuration);
            if (pos) {
                // Vérifier combien de matchs simultanés à cet horaire
                const simultaneousMatches = matchesBySlot[slot.horaire] || [];
                const count = simultaneousMatches.length;
                
                // N'afficher le créneau libre que s'il n'y a pas de matchs simultanés
                if (count === 0) {
                    html += `
                        <div class="calendar-available-block" 
                             style="top: ${pos.top}px; height: ${pos.height}px"
                             title="Créneau libre: ${slot.horaire}">
                            ✓
                        </div>
                    `;
                }
                // Si des matchs existent à cet horaire, on n'affiche pas le créneau libre
                // pour éviter les conflits de positionnement
            }
        });
        
        // NOUVEAU: Blocs de matchs avec gestion des sous-colonnes
        Object.keys(matchesBySlot).forEach(timeSlot => {
            const simultaneousMatches = matchesBySlot[timeSlot];
            const count = simultaneousMatches.length;
            
            simultaneousMatches.forEach((match, index) => {
                const pos = this.calculateBlockPosition(match.horaire, this.matchDuration);
                if (pos) {
                    // Ajouter les informations de sous-colonne
                    pos.subColumnIndex = index;
                    pos.subColumnCount = count;
                    html += this.renderMatchBlock(match, pos, displayMode, preferences);
                }
            });
        });
        
        html += '</div>'; // calendar-venue-grid
        html += '</div>'; // calendar-venue-column
        
        return html;
    }
    
    /**
     * Groupe les matchs par créneau horaire pour gérer les matchs simultanés
     * IMPORTANT: Trie les matchs de manière déterministe pour éviter le désordre après modifications
     */
    groupMatchesByTimeSlot(matches) {
        const grouped = {};
        
        matches.forEach(match => {
            const key = match.horaire;
            if (!grouped[key]) {
                grouped[key] = [];
            }
            grouped[key].push(match);
        });
        
        // TRI DÉTERMINISTE: pour chaque créneau horaire, trier les matchs
        // Ordre: gymnase → equipe1 → equipe2 → poule
        Object.keys(grouped).forEach(timeSlot => {
            grouped[timeSlot].sort((a, b) => {
                // 1. Par gymnase
                if (a.gymnase !== b.gymnase) {
                    return (a.gymnase || '').localeCompare(b.gymnase || '');
                }
                
                // 2. Par equipe1
                if (a.equipe1 !== b.equipe1) {
                    return (a.equipe1 || '').localeCompare(b.equipe1 || '');
                }
                
                // 3. Par equipe2
                if (a.equipe2 !== b.equipe2) {
                    return (a.equipe2 || '').localeCompare(b.equipe2 || '');
                }
                
                // 4. Par poule
                return (a.poule || '').localeCompare(b.poule || '');
            });
        });
        
        return grouped;
    }

    /**
     * Calcule la plage horaire optimale basée sur les données réelles
     */
    calculateTimeRange(weekMatches, weekSlots) {
        // Récupérer tous les horaires (matchs + créneaux disponibles)
        const allTimes = [
            ...weekMatches.map(m => m.horaire),
            ...weekSlots.map(s => s.horaire)
        ].filter(h => h); // Filtrer les valeurs nulles
        
        if (allTimes.length === 0) {
            // Par défaut si aucune donnée
            this.startHour = 8;
            this.endHour = 22;
            console.log(`⏰ Plage horaire par défaut: ${this.startHour}h - ${this.endHour}h`);
            return;
        }
        
        // Convertir en minutes
        const allMinutes = allTimes.map(time => Utils.parseTime(time));
        
        // Trouver min et max
        const minMinutes = Math.min(...allMinutes);
        const maxMinutes = Math.max(...allMinutes);
        
        // Ajouter la durée d'un match au max (car le dernier match dure 90 min)
        const maxWithDuration = maxMinutes + this.matchDuration;
        
        // Ajouter des marges pour le confort visuel
        const startWithMargin = minMinutes - this.marginMinutes;
        const endWithMargin = maxWithDuration + this.marginMinutes;
        
        // Arrondir aux heures entières (floor pour le début, ceil pour la fin)
        this.startHour = Math.floor(startWithMargin / 60);
        this.endHour = Math.ceil(endWithMargin / 60);
        
        // Limites de sécurité
        this.startHour = Math.max(6, this.startHour);  // Pas avant 6h
        this.endHour = Math.min(24, this.endHour);     // Pas après minuit
        
        // Debug: afficher la plage calculée (décommenter si nécessaire)
        // const minTime = `${Math.floor(minMinutes / 60)}h${String(minMinutes % 60).padStart(2, '0')}`;
        // const maxTime = `${Math.floor(maxMinutes / 60)}h${String(maxMinutes % 60).padStart(2, '0')}`;
        // console.log(`⏰ Plage: ${minTime} - ${maxTime} → Grille: ${this.startHour}h - ${this.endHour}h`);
    }

    /**
     * Barre de navigation adaptée au mode d'affichage
     */
    renderNavigationBar(allMatches, displayMode, filters) {
        // En mode 'week' : navigation par semaine
        // En mode 'team' ou 'venue' : affichage de toutes les semaines d'un coup
        
        let navigationHTML = '';
        let titleHTML = '';
        
        if (displayMode === 'week') {
            // Mode semaine : navigation classique
            const weeks = [...new Set(allMatches.map(m => m.semaine))].sort((a, b) => a - b);
            const minWeek = weeks[0];
            const maxWeek = weeks[weeks.length - 1];
            const canGoPrev = this.currentWeek > minWeek;
            const canGoNext = this.currentWeek < maxWeek;
            
            navigationHTML = `
                <div class="calendar-nav-left">
                    <button class="btn-nav btn-prev-week" ${canGoPrev ? '' : 'disabled'}>
                        ← Semaine précédente
                    </button>
                    <button class="btn-nav btn-first-week">
                        ⏮ Première
                    </button>
                    <button class="btn-nav btn-next-week" ${canGoNext ? '' : 'disabled'}>
                        Semaine suivante →
                    </button>
                </div>
            `;
            
            // Trouver un match de la semaine courante pour obtenir semaine_display
            const currentWeekMatch = allMatches.find(m => m.semaine == this.currentWeek);
            const weekDisplay = currentWeekMatch && currentWeekMatch.semaine_display 
                ? currentWeekMatch.semaine_display 
                : `Semaine ${this.currentWeek}`;
            
            // Si un filtre de poule est actif, l'afficher dans le titre
            if (filters.pool) {
                titleHTML = `
                    <h2 class="calendar-title">
                        🏆 ${filters.pool} - ${weekDisplay}
                    </h2>
                `;
            } else {
                titleHTML = `
                    <h2 class="calendar-title">
                        📅 ${weekDisplay}
                    </h2>
                `;
            }
        } else if (displayMode === 'team') {
            // Mode équipe : afficher le nom de l'équipe
            titleHTML = `
                <h2 class="calendar-title">
                    👥 ${filters.team || 'Équipe'}
                </h2>
            `;
        } else if (displayMode === 'venue') {
            // Mode gymnase : afficher le nom du gymnase
            titleHTML = `
                <h2 class="calendar-title">
                    🏢 ${filters.venue || 'Gymnase'}
                </h2>
            `;
        }

        return `
            <div class="calendar-nav">
                ${navigationHTML}
                
                <div class="calendar-nav-center">
                    ${titleHTML}
                    <div class="calendar-time-range">
                        ⏰ ${this.startHour}h - ${this.endHour}h • Zoom: ${this.timeSlotMinutes}min
                    </div>
                </div>
            </div>
        `;
    }
    
    /**
     * Colonne des horaires (fixe à gauche)
     */
    renderTimeColumn() {
        const slots = this.generateTimeSlots();
        const slotHeight = this.getSlotHeight();
        
        let html = '<div class="calendar-time-column">';
        html += '<div class="calendar-time-header">Horaire</div>';
        
        slots.forEach(slot => {
            html += `<div class="calendar-time-slot" style="height: ${slotHeight}px">${slot.label}</div>`;
        });
        
        html += '</div>';
        return html;
    }

    /**
     * Bloc de match avec préférences d'affichage
     */
    renderMatchBlock(match, pos, displayMode = 'week', preferences = {}) {
        const gender = Utils.getGender(match);
        const colorClass = gender === 'M' || gender === 'male' ? 'male' : gender === 'F' || gender === 'female' ? 'female' : 'mixed';
        const category = Utils.getCategory(match.poule);
        
        // Déterminer le niveau de détail selon la hauteur réelle calculée
        const height = pos.height;
        const detailLevel = height < 70 ? 'minimal' : height < 150 ? 'compact' : 'full';
        
        // Icône genre
        const genderIcon = colorClass === 'male' ? '♂' : colorClass === 'female' ? '♀' : '⚥';
        
        // Use match_id from data (double underscore format from Phase 1)
        const matchId = match.match_id || `${match.equipe1}_${match.equipe2}_${match.poule}`;
        
        // NOUVEAU: Gérer le positionnement en sous-colonnes
        const subColumnIndex = pos.subColumnIndex || 0;
        const subColumnCount = pos.subColumnCount || 1;
        const widthPercent = 100 / subColumnCount;
        const leftPercent = (100 / subColumnCount) * subColumnIndex;
        
        // Adapter la taille du texte selon le nombre de sous-colonnes
        const maxLength = subColumnCount === 1 ? 20 : subColumnCount === 2 ? 14 : subColumnCount === 3 ? 10 : 8;
        const truncate = (text, max) => text && text.length > max ? text.substring(0, max - 1) + '…' : text;
        
        // Raccourcir les noms d'équipes
        const team1 = truncate(match.equipe1, detailLevel === 'minimal' ? maxLength - 2 : maxLength);
        const team2 = truncate(match.equipe2, detailLevel === 'minimal' ? maxLength - 2 : maxLength);
        
        // Extraire catégorie et numéro de poule (utiliser categoryCode pour éviter conflit)
        const pouleMatch = match.poule ? match.poule.match(/^([A-Z]+)([A-Z]\d+)(.*)$/) : null;
        const categoryCode = pouleMatch ? pouleMatch[1] : '';
        const level = pouleMatch ? pouleMatch[2] : '';
        const poolNum = pouleMatch ? pouleMatch[3] : match.poule
        
        // Style de positionnement en sous-colonne
        const subColumnStyle = `top: ${pos.top}px; height: ${pos.height}px; left: ${leftPercent}%; width: ${widthPercent}%;`;
        
        // Tooltip enrichi avec TOUTES les infos
        const tooltipParts = [
            `${match.equipe1} vs ${match.equipe2}`,
            match.horaire ? `⏰ ${match.horaire}` : '',
            match.poule ? `🎯 ${match.poule}` : '',
            match.gymnase ? `🏢 ${match.gymnase}` : '',
            match.institution1 && match.institution2 ? `🏛️ ${match.institution1} vs ${match.institution2}` : '',
            !match.has_score ? `⏳ Score non saisi` : '',
            match.equipe1_horaires_preferes && match.equipe1_horaires_preferes.length > 0 ? 
                `⏰ Préf. ${match.equipe1}: ${match.equipe1_horaires_preferes.join(', ')}` : '',
            match.equipe2_horaires_preferes && match.equipe2_horaires_preferes.length > 0 ? 
                `⏰ Préf. ${match.equipe2}: ${match.equipe2_horaires_preferes.join(', ')}` : ''
        ].filter(p => p).join('\n');
        
        // Escape single quotes in match data for onclick
        const escapeQuotes = (str) => str ? str.replace(/'/g, "\\'") : '';
        
        // === RENDU MINIMAL (créneaux < 70px - granularité 30min ou 120min) ===
        if (detailLevel === 'minimal') {
            return `
                <div class="calendar-match-block calendar-match-${colorClass} detail-minimal ${!match.has_score ? 'no-score' : ''}" 
                     draggable="true"
                     ondragstart="CalendarGridView.handleDragStart(event)"
                     ondragend="CalendarGridView.handleDragEnd(event)"
                     style="${subColumnStyle}"
                     data-match-id="${matchId}"
                     data-gender="${colorClass}"
                     data-category="${category}"
                     data-pool="${Utils.escapeHtml(match.poule)}"
                     data-institution1="${Utils.escapeHtml(match.institution1)}"
                     data-institution2="${Utils.escapeHtml(match.institution2)}"
                     title="${tooltipParts}">
                    <button class="match-edit-btn" onclick="editModal.open({
                        match_id: '${matchId}',
                        equipe1: '${escapeQuotes(match.equipe1)}',
                        equipe2: '${escapeQuotes(match.equipe2)}',
                        poule: '${escapeQuotes(match.poule)}',
                        semaine: ${match.semaine},
                        horaire: '${escapeQuotes(match.horaire)}',
                        gymnase: '${escapeQuotes(match.gymnase)}'
                    }, this.closest('.calendar-match-block'))">✏️</button>
                    <div class="match-content-minimal">
                        <div class="match-teams-minimal">
                            <div class="team-name-minimal">${team1}</div>
                            <div class="match-vs-minimal">vs</div>
                            <div class="team-name-minimal">${team2}</div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // === RENDU COMPACT (créneaux 70-150px - granularité 60min) ===
        if (detailLevel === 'compact') {
            // Priorité: Équipes > Gymnase/Semaine > Catégorie
            let contextBadge = '';
            if (displayMode !== 'week' && match.gymnase) {
                contextBadge = `<span class="context-badge">📍 ${truncate(match.gymnase, 10)}</span>`;
            } else if (categoryCode) {
                contextBadge = `<span class="context-badge">${categoryCode}</span>`;
            }
            
            // Indicateur pour les matchs auto-programmés
            const autoIndicator = !match.is_fixed ? '<span class="auto-indicator">🤖</span>' : '';
            
            return `
                <div class="calendar-match-block calendar-match-${colorClass} detail-compact ${!match.has_score ? 'no-score' : ''} ${!match.is_fixed ? 'auto-scheduled' : ''}" 
                     draggable="true"
                     ondragstart="CalendarGridView.handleDragStart(event)"
                     ondragend="CalendarGridView.handleDragEnd(event)"
                     style="${subColumnStyle}"
                     data-match-id="${matchId}"
                     data-gender="${colorClass}"
                     data-category="${category}"
                     data-pool="${Utils.escapeHtml(match.poule)}"
                     data-institution1="${Utils.escapeHtml(match.institution1)}"
                     data-institution2="${Utils.escapeHtml(match.institution2)}"
                     title="${tooltipParts}">
                    <button class="match-edit-btn" onclick="editModal.open({
                        match_id: '${matchId}',
                        equipe1: '${escapeQuotes(match.equipe1)}',
                        equipe2: '${escapeQuotes(match.equipe2)}',
                        poule: '${escapeQuotes(match.poule)}',
                        semaine: ${match.semaine},
                        horaire: '${escapeQuotes(match.horaire)}',
                        gymnase: '${escapeQuotes(match.gymnase)}'
                    }, this.closest('.calendar-match-block'))">✏️</button>
                    <div class="match-content-compact">
                        <div class="match-header-compact">
                            ${contextBadge}
                            <span class="gender-badge-compact">${genderIcon}</span>
                            ${autoIndicator}
                        </div>
                        <div class="match-teams-compact">
                            <div class="team-name-compact">${team1}</div>
                            <div class="match-vs-compact">vs</div>
                            <div class="team-name-compact">${team2}</div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // === RENDU COMPLET (créneaux > 150px) ===
        // Priorité complète: Équipes > Gymnase/Semaine > Catégorie > Poule > Genre > Horaires préférés
        let contextLine = '';
        if (displayMode !== 'week' && match.gymnase) {
            contextLine = `<div class="context-line">📍 ${truncate(match.gymnase, 12)}</div>`;
        } else if (displayMode !== 'venue' && match.semaine) {
            contextLine = `<div class="context-line">📅 S${match.semaine}</div>`;
        }
        
        let poolLine = '';
        if (categoryCode && poolNum) {
            poolLine = `<div class="pool-line"><span class="category-badge">${categoryCode}</span> <span class="level-badge">${level}</span> <span class="pool-badge">${poolNum}</span></div>`;
        }
        
        // Horaires préférés (affichés seulement si espace suffisant et si préférences activées)
        let prefLine = '';
        if (preferences?.showPreferences && height > 180 && subColumnCount <= 2) {
            const pref1 = match.equipe1_horaires_preferes && match.equipe1_horaires_preferes.length > 0;
            const pref2 = match.equipe2_horaires_preferes && match.equipe2_horaires_preferes.length > 0;
            if (pref1 || pref2) {
                const prefIcons = `${pref1 ? '⏰' : ''}${pref2 ? '⏰' : ''}`;
                prefLine = `<div class="pref-line">${prefIcons}</div>`;
            }
        }
        
        // Indicateur pour les matchs auto-programmés
        const autoIndicator = !match.is_fixed ? '<span class="auto-indicator">🤖</span>' : '';
        
        return `
            <div class="calendar-match-block calendar-match-${colorClass} detail-full ${!match.has_score ? 'no-score' : ''} ${!match.is_fixed ? 'auto-scheduled' : ''}" 
                 draggable="true"
                 ondragstart="CalendarGridView.handleDragStart(event)"
                 ondragend="CalendarGridView.handleDragEnd(event)"
                 style="${subColumnStyle}"
                 data-match-id="${matchId}"
                 data-gender="${colorClass}"
                 data-category="${category}"
                 data-pool="${Utils.escapeHtml(match.poule)}"
                 data-institution1="${Utils.escapeHtml(match.institution1)}"
                 data-institution2="${Utils.escapeHtml(match.institution2)}"
                 title="${tooltipParts}">
                <button class="match-edit-btn" onclick="editModal.open({
                    match_id: '${matchId}',
                    equipe1: '${escapeQuotes(match.equipe1)}',
                    equipe2: '${escapeQuotes(match.equipe2)}',
                    poule: '${escapeQuotes(match.poule)}',
                    semaine: ${match.semaine},
                    horaire: '${escapeQuotes(match.horaire)}',
                    gymnase: '${escapeQuotes(match.gymnase)}'
                }, this.closest('.calendar-match-block'))">✏️</button>
                <div class="match-content-full">
                    <div class="match-header-full">
                        <span class="horaire-badge match-time">${match.horaire}</span>
                        <span class="gender-badge-full">${genderIcon}</span>
                        ${autoIndicator}
                    </div>
                    <div class="match-teams-full">
                        <div class="team-name-full">${team1}</div>
                        <div class="match-vs-full">VS</div>
                        <div class="team-name-full">${team2}</div>
                    </div>
                    ${contextLine}
                    ${poolLine}
                    ${prefLine}
                </div>
            </div>
        `;
    }

    /**
     * Génère les créneaux horaires
     */
    generateTimeSlots() {
        const slots = [];
        const totalMinutes = (this.endHour - this.startHour) * 60;
        
        for (let offset = 0; offset < totalMinutes; offset += this.timeSlotMinutes) {
            const totalMins = this.startHour * 60 + offset;
            const hour = Math.floor(totalMins / 60);
            const minute = totalMins % 60;
            
            slots.push({
                label: `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`,
                minutes: totalMins,
                isHour: minute === 0
            });
        }
        
        return slots;
    }

    /**
     * Calcule position et hauteur d'un bloc
     */
    calculateBlockPosition(timeStr, durationMinutes) {
        const matchMinutes = Utils.parseTime(timeStr);
        const gridStartMinutes = this.startHour * 60;
        const gridEndMinutes = this.endHour * 60;
        
        // Vérifier si dans la plage (silencieux si hors plage - comportement normal)
        if (matchMinutes < gridStartMinutes || matchMinutes >= gridEndMinutes) {
            return null;
        }
        
        const offsetMinutes = matchMinutes - gridStartMinutes;
        const pixelsPerMinute = this.getSlotHeight() / this.timeSlotMinutes;
        
        return {
            top: offsetMinutes * pixelsPerMinute,
            height: durationMinutes * pixelsPerMinute
        };
    }

    /**
     * Hauteur d'un créneau en pixels
     * Calcule dynamiquement pour que la grille ne nécessite jamais de scroll vertical
     */
    getSlotHeight() {
        // Calculer la hauteur disponible pour la grille
        // Hauteur fenêtre - (header app + title/stats ~150px + controls section ~180px + nav calendrier ~95px + header grille ~60px + padding/marges ~80px)
        const fixedElementsHeight = 565;
        const availableHeight = window.innerHeight - fixedElementsHeight;
        
        // Calculer le nombre total de créneaux
        const totalMinutes = (this.endHour - this.startHour) * 60;
        const totalSlots = totalMinutes / this.timeSlotMinutes;
        
        // Calculer la hauteur optimale par créneau
        const calculatedHeight = Math.floor(availableHeight / totalSlots);
        
        // Définir des hauteurs minimales par granularité pour garder la lisibilité
        const minHeights = {
            30: 35,  // Au moins 35px pour 30min
            60: 45,  // Au moins 45px pour 60min
            120: 30  // Au moins 30px pour 120min
        };
        
        const minHeight = minHeights[this.timeSlotMinutes] || 45;
        
        // Retourner le maximum entre la hauteur calculée et la hauteur minimale
        const finalHeight = Math.max(calculatedHeight, minHeight);
        
        return finalHeight;
    }

    /**
     * Configure les événements
     */
    setupEventListeners(container, allMatches, availableSlots, filters, preferences) {
        const weeks = [...new Set(allMatches.map(m => m.semaine))].sort((a, b) => a - b);
        
        // Bouton semaine précédente
        const btnPrev = container.querySelector('.btn-prev-week');
        if (btnPrev) {
            btnPrev.addEventListener('click', () => {
                const idx = weeks.indexOf(this.currentWeek);
                if (idx > 0) {
                    this.currentWeek = weeks[idx - 1];
                    this.render(container, allMatches, availableSlots, filters, preferences);
                }
            });
        }
        
        // Bouton semaine suivante
        const btnNext = container.querySelector('.btn-next-week');
        if (btnNext) {
            btnNext.addEventListener('click', () => {
                const idx = weeks.indexOf(this.currentWeek);
                if (idx < weeks.length - 1) {
                    this.currentWeek = weeks[idx + 1];
                    this.render(container, allMatches, availableSlots, filters, preferences);
                }
            });
        }
        
        // Bouton première semaine
        const btnFirst = container.querySelector('.btn-first-week');
        if (btnFirst) {
            btnFirst.addEventListener('click', () => {
                this.currentWeek = weeks[0];
                this.render(container, allMatches, availableSlots, filters, preferences);
            });
        }
    }
    
    /**
     * Handle drag start event on match blocks
     */
    static handleDragStart(e) {
        const matchBlock = e.currentTarget;
        const matchId = matchBlock.dataset.matchId;
        
        // Add dragging class for visual feedback
        matchBlock.classList.add('dragging');
        
        // Force show available slots during drag
        const availableBlocks = document.querySelectorAll('.calendar-available-block');
        availableBlocks.forEach(block => {
            block.classList.add('drag-active');
            block.style.display = 'flex'; // Force display
        });
        
        // Also make available slots droppable
        availableBlocks.forEach(block => {
            if (!block.hasAttribute('data-drop-listeners')) {
                block.setAttribute('data-drop-listeners', 'true');
                block.addEventListener('dragover', CalendarGridView.handleAvailableSlotDragOver);
                block.addEventListener('dragleave', CalendarGridView.handleAvailableSlotDragLeave);
                block.addEventListener('drop', CalendarGridView.handleAvailableSlotDrop);
            }
        });
        
        // Make other match blocks droppable for swap
        const otherMatchBlocks = document.querySelectorAll('.calendar-match-block:not(.dragging)');
        otherMatchBlocks.forEach(block => {
            block.classList.add('swap-target');
            if (!block.hasAttribute('data-swap-listeners')) {
                block.setAttribute('data-swap-listeners', 'true');
                block.addEventListener('dragover', CalendarGridView.handleMatchBlockDragOver);
                block.addEventListener('dragleave', CalendarGridView.handleMatchBlockDragLeave);
                block.addEventListener('drop', CalendarGridView.handleMatchBlockDrop);
            }
        });
        
        // Find match data from the global matches array
        const match = window.allMatches?.find(m => m.match_id === matchId);
        
        if (match) {
            // Store match data in drag transfer
            const matchData = {
                match_id: match.match_id,
                equipe1: match.equipe1,
                equipe2: match.equipe2,
                poule: match.poule,
                semaine: match.semaine,
                horaire: match.horaire,
                gymnase: match.gymnase,
                institution1: match.institution1 || '',
                institution2: match.institution2 || ''
            };
            
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('application/json', JSON.stringify(matchData));
            e.dataTransfer.setData('text/plain', `${match.equipe1} vs ${match.equipe2}`);
            
            console.log('Drag started:', matchData);
        } else {
            console.warn('Match not found for ID:', matchId);
        }
    }
    
    /**
     * Handle drag end event on match blocks
     */
    static handleDragEnd(e) {
        const matchBlock = e.currentTarget;
        
        // Remove dragging class
        matchBlock.classList.remove('dragging');
        
        // Remove drag-active class from available slots
        document.querySelectorAll('.calendar-available-block').forEach(block => {
            block.classList.remove('drag-active', 'highlight-drop');
        });
        
        // Remove swap-target class from match blocks
        document.querySelectorAll('.calendar-match-block').forEach(block => {
            block.classList.remove('swap-target', 'swap-highlight');
        });
        
        // Remove any active drop zone highlights
        document.querySelectorAll('.drop-zone-active').forEach(zone => {
            zone.classList.remove('drop-zone-active');
            delete zone.dataset.targetTime;
        });
    }
    
    /**
     * Handle drag over event on match blocks (for swap)
     */
    static handleMatchBlockDragOver(e) {
        e.preventDefault();
        e.stopPropagation();
        const matchBlock = e.currentTarget;
        e.dataTransfer.dropEffect = 'move';
        matchBlock.classList.add('swap-highlight');
    }
    
    /**
     * Handle drag leave event on match blocks
     */
    static handleMatchBlockDragLeave(e) {
        e.preventDefault();
        const matchBlock = e.currentTarget;
        if (!matchBlock.contains(e.relatedTarget)) {
            matchBlock.classList.remove('swap-highlight');
        }
    }
    
    /**
     * Handle drop event on match blocks (for swap)
     */
    static handleMatchBlockDrop(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const targetMatchBlock = e.currentTarget;
        targetMatchBlock.classList.remove('swap-highlight');
        
        try {
            // Get dragged match data
            const draggedMatchDataStr = e.dataTransfer.getData('application/json');
            if (!draggedMatchDataStr) {
                console.warn('No match data in drop event');
                return;
            }
            
            const draggedMatchData = JSON.parse(draggedMatchDataStr);
            
            // Get target match data
            const targetMatchId = targetMatchBlock.dataset.matchId;
            const targetMatch = window.allMatches?.find(m => m.match_id === targetMatchId);
            
            if (!targetMatch) {
                console.warn('Target match not found');
                return;
            }
            
            if (draggedMatchData.match_id === targetMatch.match_id) {
                console.log('Cannot swap match with itself');
                return;
            }
            
            console.log('Swapping matches:', draggedMatchData.match_id, '↔', targetMatch.match_id);
            
            // Create swap modifications
            const modifications = [
                {
                    match_id: draggedMatchData.match_id,
                    original: {
                        week: draggedMatchData.semaine,
                        time: draggedMatchData.horaire,
                        venue: draggedMatchData.gymnase
                    },
                    new: {
                        week: targetMatch.semaine,
                        time: targetMatch.horaire,
                        venue: targetMatch.gymnase
                    }
                },
                {
                    match_id: targetMatch.match_id,
                    original: {
                        week: targetMatch.semaine,
                        time: targetMatch.horaire,
                        venue: targetMatch.gymnase
                    },
                    new: {
                        week: draggedMatchData.semaine,
                        time: draggedMatchData.horaire,
                        venue: draggedMatchData.gymnase
                    }
                }
            ];
            
            // Save both modifications
            modifications.forEach(mod => {
                CalendarGridView.saveModification(mod);
            });
            
            // Show feedback
            const dropZone = targetMatchBlock.closest('.drop-zone');
            if (dropZone) {
                CalendarGridView.showDropFeedback(dropZone, '🔄 Matchs échangés!');
            }
            
            // Re-render calendar after a brief delay
            setTimeout(() => {
                if (window.app && typeof window.app.reloadAndRender === 'function') {
                    window.app.reloadAndRender();
                } else {
                    console.warn('window.app.reloadAndRender not available');
                }
            }, 300);
            
        } catch (error) {
            console.error('Error handling match block drop:', error);
        }
    }
    
    /**
     * Handle drag over event on available slots
     */
    static handleAvailableSlotDragOver(e) {
        e.preventDefault();
        e.stopPropagation();
        const availableBlock = e.currentTarget;
        e.dataTransfer.dropEffect = 'move';
        availableBlock.classList.add('highlight-drop');
    }
    
    /**
     * Handle drag leave event on available slots
     */
    static handleAvailableSlotDragLeave(e) {
        e.preventDefault();
        const availableBlock = e.currentTarget;
        if (!availableBlock.contains(e.relatedTarget)) {
            availableBlock.classList.remove('highlight-drop');
        }
    }
    
    /**
     * Handle drop event on available slots
     */
    static handleAvailableSlotDrop(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const availableBlock = e.currentTarget;
        availableBlock.classList.remove('highlight-drop');
        
        try {
            // Get match data from drag
            const matchDataStr = e.dataTransfer.getData('application/json');
            if (!matchDataStr) {
                console.warn('No match data in drop event');
                return;
            }
            
            const matchData = JSON.parse(matchDataStr);
            
            // Extract time from title attribute
            const title = availableBlock.getAttribute('title');
            const timeMatch = title.match(/Créneau libre: (\d{2}:\d{2})/);
            if (!timeMatch) {
                console.warn('Could not extract time from available slot');
                return;
            }
            const targetTime = timeMatch[1];
            
            // Get venue and week from parent drop zone
            const dropZone = availableBlock.closest('.drop-zone');
            const targetWeek = parseInt(dropZone?.dataset.week);
            const targetVenue = dropZone?.dataset.venue;
            
            // Create modification
            const modification = {
                match_id: matchData.match_id,
                original: {
                    week: matchData.semaine,
                    time: matchData.horaire,
                    venue: matchData.gymnase
                },
                new: {
                    week: targetWeek || matchData.semaine,
                    time: targetTime,
                    venue: targetVenue || matchData.gymnase
                }
            };
            
            console.log('Dropping on available slot:', modification);
            
            // Save modification
            CalendarGridView.saveModification(modification);
            
            // Re-render calendar after a brief delay
            setTimeout(() => {
                if (window.app && typeof window.app.reloadAndRender === 'function') {
                    window.app.reloadAndRender();
                } else {
                    console.warn('window.app.reloadAndRender not available');
                }
            }, 300);
            
        } catch (error) {
            console.error('Error handling available slot drop:', error);
        }
    }
    
    /**
     * Handle drag over event on drop zones
     */
    static handleDragOver(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const dropZone = e.currentTarget;
        e.dataTransfer.dropEffect = 'move';
        
        // Calculate time slot from cursor position
        const rect = dropZone.getBoundingClientRect();
        const relativeY = e.clientY - rect.top;
        const timeSlot = CalendarGridView.getTimeSlotFromPosition(dropZone, relativeY);
        
        // Highlight drop zone
        dropZone.classList.add('drop-zone-active');
        
        // Store target time for visual feedback
        dropZone.dataset.targetTime = timeSlot;
    }
    
    /**
     * Handle drag leave event
     */
    static handleDragLeave(e) {
        e.preventDefault();
        const dropZone = e.currentTarget;
        
        // Only remove highlighting if leaving the drop zone entirely
        if (!dropZone.contains(e.relatedTarget)) {
            dropZone.classList.remove('drop-zone-active');
            delete dropZone.dataset.targetTime;
        }
    }
    
    /**
     * Handle drop event
     */
    static handleDrop(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const dropZone = e.currentTarget;
        dropZone.classList.remove('drop-zone-active');
        
        try {
            // Get match data from drag
            const matchDataStr = e.dataTransfer.getData('application/json');
            if (!matchDataStr) {
                console.warn('No match data in drop event');
                return;
            }
            
            const matchData = JSON.parse(matchDataStr);
            
            // Calculate time slot from drop position
            const rect = dropZone.getBoundingClientRect();
            const relativeY = e.clientY - rect.top;
            const targetTime = CalendarGridView.getTimeSlotFromPosition(dropZone, relativeY);
            
            // Get target week and venue from drop zone
            const targetWeek = parseInt(dropZone.dataset.week);
            const targetVenue = dropZone.dataset.venue;
            
            // Check if dropping on another match (for swap)
            const targetMatch = CalendarGridView.findMatchAtPosition(targetWeek, targetVenue, targetTime);
            
            if (targetMatch && targetMatch.match_id !== matchData.match_id) {
                // SWAP: Valider avant d'échanger
                const swapValid = CalendarGridView.validateSwap(matchData, targetMatch);
                
                if (!swapValid.canSwap) {
                    CalendarGridView.showDropFeedback(dropZone, `❌ ${swapValid.reason}`, true);
                    return;
                }
                
                if (swapValid.warnings && swapValid.warnings.length > 0) {
                    // Demander confirmation si avertissements
                    if (!confirm(`⚠️ Avertissement:\n${swapValid.warnings.join('\n')}\n\nContinuer quand même?`)) {
                        return;
                    }
                }
                
                // SWAP: Two matches exchange positions
                console.log('Swap detected between:', matchData.match_id, 'and', targetMatch.match_id);
                
                const modifications = [
                    {
                        match_id: matchData.match_id,
                        original: {
                            week: matchData.semaine,
                            time: matchData.horaire,
                            venue: matchData.gymnase
                        },
                        new: {
                            week: targetMatch.semaine,
                            time: targetMatch.horaire,
                            venue: targetMatch.gymnase
                        }
                    },
                    {
                        match_id: targetMatch.match_id,
                        original: {
                            week: targetMatch.semaine,
                            time: targetMatch.horaire,
                            venue: targetMatch.gymnase
                        },
                        new: {
                            week: matchData.semaine,
                            time: matchData.horaire,
                            venue: matchData.gymnase
                        }
                    }
                ];
                
                // Save both modifications
                modifications.forEach(mod => {
                    CalendarGridView.saveModification(mod);
                });
                
                CalendarGridView.showDropFeedback(dropZone, '🔄 Matchs échangés!');
                
            } else {
                // MOVE: Valider avant de déplacer
                const moveValid = CalendarGridView.validateMove(matchData, targetWeek, targetVenue, targetTime);
                
                if (!moveValid.canMove) {
                    CalendarGridView.showDropFeedback(dropZone, `❌ ${moveValid.reason}`, true);
                    return;
                }
                
                if (moveValid.warnings && moveValid.warnings.length > 0) {
                    // Demander confirmation si avertissements
                    if (!confirm(`⚠️ Avertissement:\n${moveValid.warnings.join('\n')}\n\nContinuer quand même?`)) {
                        return;
                    }
                }
                
                // MOVE: Simple relocation
                const modification = {
                    match_id: matchData.match_id,
                    original: {
                        week: matchData.semaine,
                        time: matchData.horaire,
                        venue: matchData.gymnase
                    },
                    new: {
                        week: targetWeek || matchData.semaine,
                        time: targetTime || matchData.horaire,
                        venue: targetVenue || matchData.gymnase
                    }
                };
                
                // Check if actually changed
                const changed = modification.original.week !== modification.new.week ||
                               modification.original.time !== modification.new.time ||
                               modification.original.venue !== modification.new.venue;
                
                if (!changed) {
                    console.log('No change detected, ignoring drop');
                    return;
                }
                
                // Save modification
                CalendarGridView.saveModification(modification);
                CalendarGridView.showDropFeedback(dropZone, '✅ Match déplacé!');
            }
            
            // Re-render calendar after a brief delay
            setTimeout(() => {
                if (window.app && typeof window.app.reloadAndRender === 'function') {
                    window.app.reloadAndRender();
                } else {
                    console.warn('window.app.reloadAndRender not available');
                }
            }, 300);
            
        } catch (error) {
            console.error('Error handling drop:', error);
            CalendarGridView.showDropFeedback(dropZone, '❌ Erreur!');
        }
    }
    
    /**
     * Find match at specific position
     */
    static findMatchAtPosition(week, venue, time) {
        if (!window.allMatches) return null;
        
        return window.allMatches.find(m => 
            m.semaine === week && 
            m.gymnase === venue && 
            m.horaire === time
        );
    }
    
    /**
     * Valider un déplacement de match
     * Retourne {canMove: boolean, reason?: string, warnings?: string[]}
     */
    static validateMove(match, targetWeek, targetVenue, targetTime) {
        const warnings = [];
        
        // 1. Vérifier qu'il n'y a pas déjà un match à cet endroit
        const existingMatch = CalendarGridView.findMatchAtPosition(targetWeek, targetVenue, targetTime);
        if (existingMatch) {
            return {
                canMove: false,
                reason: 'Un match existe déjà à cet emplacement'
            };
        }
        
        // 2. Utiliser le détecteur de conflits si disponible
        if (window.conflictDetector) {
            // Créer une copie temporaire du match avec la nouvelle position
            const tempMatch = {
                ...match,
                semaine: targetWeek,
                horaire: targetTime,
                gymnase: targetVenue
            };
            
            const conflicts = window.conflictDetector.checkConflictsForMatch(tempMatch);
            
            // Séparer conflits critiques et avertissements
            const criticalConflicts = conflicts.filter(c => c.severity === 'critical');
            const warningConflicts = conflicts.filter(c => c.severity === 'warning');
            
            if (criticalConflicts.length > 0) {
                return {
                    canMove: false,
                    reason: `Conflit critique: ${criticalConflicts[0].message}`
                };
            }
            
            if (warningConflicts.length > 0) {
                warnings.push(...warningConflicts.map(c => c.message));
            }
        }
        
        // 3. Vérifier la disponibilité du créneau avec SlotManager
        if (window.slotManager) {
            const slotId = `${targetWeek}_${targetTime}_${targetVenue}`;
            const slot = window.slotManager.slots.get(slotId);
            
            if (slot && slot.statut === 'occupé' && slot.match_id !== match.match_id) {
                return {
                    canMove: false,
                    reason: 'Créneau déjà occupé'
                };
            }
        }
        
        return {
            canMove: true,
            warnings: warnings.length > 0 ? warnings : null
        };
    }
    
    /**
     * Valider un échange de matchs
     * Retourne {canSwap: boolean, reason?: string, warnings?: string[]}
     */
    static validateSwap(match1, match2) {
        const warnings = [];
        
        // 1. Utiliser le détecteur de conflits pour les deux positions
        if (window.conflictDetector) {
            // Match1 à la position de Match2
            const tempMatch1 = {
                ...match1,
                semaine: match2.semaine,
                horaire: match2.horaire,
                gymnase: match2.gymnase
            };
            
            // Match2 à la position de Match1
            const tempMatch2 = {
                ...match2,
                semaine: match1.semaine,
                horaire: match1.horaire,
                gymnase: match1.gymnase
            };
            
            const conflicts1 = window.conflictDetector.checkConflictsForMatch(tempMatch1);
            const conflicts2 = window.conflictDetector.checkConflictsForMatch(tempMatch2);
            
            const criticalConflicts = [
                ...conflicts1.filter(c => c.severity === 'critical'),
                ...conflicts2.filter(c => c.severity === 'critical')
            ];
            
            if (criticalConflicts.length > 0) {
                return {
                    canSwap: false,
                    reason: `Conflit critique: ${criticalConflicts[0].message}`
                };
            }
            
            const warningConflicts = [
                ...conflicts1.filter(c => c.severity === 'warning'),
                ...conflicts2.filter(c => c.severity === 'warning')
            ];
            
            if (warningConflicts.length > 0) {
                warnings.push(...warningConflicts.map(c => c.message));
            }
        }
        
        return {
            canSwap: true,
            warnings: warnings.length > 0 ? warnings : null
        };
    }
    
    /**
     * Save modification helper with slot management
     */
    static saveModification(modification) {
        // 1. Update slot manager: free old slot + occupy new slot
        if (window.slotManager) {
            const success = window.slotManager.moveMatch(
                modification.match_id,
                modification.original,  // old slot
                modification.new        // new slot
            );
            
            if (!success) {
                console.error('❌ SlotManager failed to move match');
                return;
            }
        } else {
            console.warn('⚠️ SlotManager not available');
        }
        
        // 2. Save modification via DataManager (qui notifiera automatiquement)
        if (window.dataManager) {
            window.dataManager.saveModification(modification);
        } else if (window.editModal && typeof window.editModal.saveModification === 'function') {
            // Fallback: ancien système
            window.editModal.saveModification(modification);
        } else {
            console.error('❌ Neither DataManager nor editModal available');
        }
    }
    
    /**
     * Calculate time slot from Y position in grid
     */
    static getTimeSlotFromPosition(dropZone, relativeY) {
        // Get all available time slots (assuming 15-min intervals from 8:00 to 22:00)
        const startHour = 8;
        const endHour = 22;
        const intervalMinutes = 15;
        
        const totalMinutes = (endHour - startHour) * 60;
        const slotCount = totalMinutes / intervalMinutes;
        
        const gridHeight = dropZone.offsetHeight;
        const slotHeight = gridHeight / slotCount;
        
        const slotIndex = Math.floor(relativeY / slotHeight);
        const minutesFromStart = slotIndex * intervalMinutes;
        
        const hour = startHour + Math.floor(minutesFromStart / 60);
        const minute = minutesFromStart % 60;
        
        return `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
    }
    
    /**
     * Show visual feedback after drop
     */
    static showDropFeedback(element, message, isError = false) {
        const feedback = document.createElement('div');
        feedback.className = `drop-feedback ${isError ? 'error' : 'success'}`;
        feedback.textContent = message;
        feedback.style.cssText = `
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: ${isError ? '#f44336' : '#4CAF50'};
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: bold;
            z-index: 10000;
            pointer-events: none;
            animation: fadeInOut 2s ease;
        `;
        
        element.style.position = 'relative';
        element.appendChild(feedback);
        
        setTimeout(() => {
            if (feedback.parentNode) {
                feedback.parentNode.removeChild(feedback);
            }
        }, 2000);
    }
}

</script>
<script>
/**
 * PyCalendar Pro - Vue Pénalités
 * Affiche les matchs triés par pénalité pour identifier les matchs les plus contraints
 */

class PenaltiesView {
    /**
     * Rend la vue des matchs pénalisés
     */
    static render(matches, filters, preferences) {
        const container = document.getElementById('penalizedContent');
        
        if (matches.length === 0) {
            container.innerHTML = this.renderEmptyState();
            return;
        }
        
        // Trier les matchs par pénalité (décroissant)
        const sortedMatches = [...matches].sort((a, b) => (b.penalty || 0) - (a.penalty || 0));
        
        // Calculer statistiques
        const totalPenalty = sortedMatches.reduce((sum, m) => sum + (m.penalty || 0), 0);
        const avgPenalty = totalPenalty / sortedMatches.length;
        const maxPenalty = sortedMatches[0]?.penalty || 0;
        const matchesWithPenalty = sortedMatches.filter(m => (m.penalty || 0) > 0).length;
        
        let html = `
            <div class="penalties-header">
                <div class="penalties-stats">
                    <div class="penalty-stat">
                        <div class="stat-value">${matchesWithPenalty}</div>
                        <div class="stat-label">Matchs pénalisés</div>
                    </div>
                    <div class="penalty-stat">
                        <div class="stat-value">${totalPenalty.toFixed(1)}</div>
                        <div class="stat-label">Pénalité totale</div>
                    </div>
                    <div class="penalty-stat">
                        <div class="stat-value">${avgPenalty.toFixed(1)}</div>
                        <div class="stat-label">Pénalité moyenne</div>
                    </div>
                    <div class="penalty-stat">
                        <div class="stat-value">${maxPenalty.toFixed(1)}</div>
                        <div class="stat-label">Pénalité max</div>
                    </div>
                </div>
                <div class="penalties-description">
                    💰 Les matchs avec les pénalités les plus élevées sont ceux qui violent le plus de contraintes souples (horaires préférés, espacement entre matchs, etc.).
                </div>
            </div>
            
            <div class="penalties-list">
        `;
        
        // Grouper par niveau de pénalité pour un affichage plus clair
        const penaltyLevels = [
            { min: 100, max: Infinity, label: 'Très élevées (≥100)', color: '#dc2626', icon: '🔴' },
            { min: 50, max: 100, label: 'Élevées (50-100)', color: '#ea580c', icon: '🟠' },
            { min: 10, max: 50, label: 'Modérées (10-50)', color: '#f59e0b', icon: '🟡' },
            { min: 0.1, max: 10, label: 'Faibles (<10)', color: '#84cc16', icon: '🟢' },
            { min: 0, max: 0.1, label: 'Aucune pénalité', color: '#22c55e', icon: '✅' }
        ];
        
        penaltyLevels.forEach(level => {
            const levelMatches = sortedMatches.filter(m => {
                const penalty = m.penalty || 0;
                return penalty >= level.min && penalty < level.max;
            });
            
            if (levelMatches.length > 0) {
                html += `
                    <div class="penalty-level-section">
                        <div class="penalty-level-header">
                            <span class="penalty-level-icon">${level.icon}</span>
                            <span class="penalty-level-title">${level.label}</span>
                            <span class="penalty-level-count">${levelMatches.length} match${levelMatches.length > 1 ? 's' : ''}</span>
                        </div>
                        <div class="matches-grid">
                            ${levelMatches.map(m => this.renderPenaltyCard(m, filters, preferences)).join('')}
                        </div>
                    </div>
                `;
            }
        });
        
        html += `
            </div>
        `;
        
        container.innerHTML = html;
    }
    
    /**
     * Rend une carte de match avec informations de pénalité
     */
    static renderPenaltyCard(match, filters, preferences) {
        const penalty = match.penalty || 0;
        
        // Déterminer la couleur de la pénalité
        let penaltyColor = '#22c55e';
        if (penalty >= 100) penaltyColor = '#dc2626';
        else if (penalty >= 50) penaltyColor = '#ea580c';
        else if (penalty >= 10) penaltyColor = '#f59e0b';
        else if (penalty > 0) penaltyColor = '#84cc16';
        
        // Utiliser le MatchCard existant et ajouter l'indicateur de pénalité
        // showWeekBadge = true, showPoolBadge = true car dans la vue pénalités, ni le contexte de semaine ni de poule n'est donné
        const baseCard = MatchCard.render(match, false, filters, preferences, true, true);
        
        // Ajouter un badge de pénalité en haut de la carte
        const penaltyBadge = `
            <div class="penalty-badge" style="background-color: ${penaltyColor}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; margin-bottom: 8px; text-align: center;">
                💰 Pénalité: ${penalty.toFixed(1)}
            </div>
        `;
        
        // Insérer le badge au début de la carte
        return baseCard.replace('<div class="match-card', penaltyBadge + '<div class="match-card');
    }
    
    /**
     * Rend un état vide
     */
    static renderEmptyState() {
        return `
            <div style="padding: 60px 20px; text-align: center; color: #94a3b8;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">💰</div>
                <h3 style="color: #64748b; font-weight: 500; margin-bottom: 0.5rem;">Aucun match à afficher</h3>
                <p>Les pénalités des matchs apparaîtront ici</p>
            </div>
        `;
    }
}

</script>
<script>
/**
 * PyCalendar Pro - Gestion des Filtres
 * Gère tous les filtres et préférences d'affichage
 */

class FilterManager {
    constructor() {
        this.filters = {
            gender: '',
            institution: '',
            team: '',
            pool: '',
            venue: '',
            week: ''
        };
        
        this.preferences = {
            showPreferences: false,
            showInstitutions: true,
            showGenreBadges: true,
            showWeekBadges: false, // Badge de semaine (par défaut désactivé)
            showPoolBadges: false, // Badge de poule (par défaut désactivé)
            showAvailableSlots: true,
            columnsCount: 3, // Nombre de colonnes (2 à 8)
            timeSlotMinutes: 60, // 30, 60 ou 120 (pour la vue grille)
            viewMode: 'total', // 'total', 'day', 'team', 'venue'
            colorMode: 'genre' // 'genre', 'level', 'both', 'pool', 'institution'
        };
        
        this.callbacks = [];
        this.loadFromStorage();
    }

    /**
     * Charge les préférences depuis localStorage
     */
    loadFromStorage() {
        const stored = Utils.loadPreferences();
        if (stored) {
            // Migration depuis ancien système viewSize vers columnsCount
            if (stored.viewSize && !stored.columnsCount) {
                const viewSizeMap = { 'compact': 3, 'normal': 4, 'large': 5 };
                stored.columnsCount = viewSizeMap[stored.viewSize] || 3;
                delete stored.viewSize;
            }
            this.preferences = { ...this.preferences, ...stored };
            this.applyPreferences();
        }
    }

    /**
     * Sauvegarde les préférences
     */
    saveToStorage() {
        Utils.savePreferences(this.preferences);
    }

    /**
     * Applique les préférences visuelles
     */
    applyPreferences() {
        const container = document.querySelector('.app-container');
        if (!container) {
            console.error('❌ Container .app-container non trouvé !');
            return;
        }

        // Nombre de colonnes
        // Supprimer toutes les anciennes classes view-*
        container.classList.remove('view-2', 'view-3', 'view-4', 'view-5', 'view-6', 'view-7', 'view-8');
        container.classList.remove('view-compact', 'view-normal', 'view-large'); // anciennes classes
        
        // Ajouter la nouvelle classe
        const colClass = `view-${this.preferences.columnsCount}`;
        container.classList.add(colClass);

        // Horaires préférés
        if (this.preferences.showPreferences) {
            container.classList.add('show-preferences');
        } else {
            container.classList.remove('show-preferences');
        }

        // Institutions
        if (this.preferences.showInstitutions) {
            container.classList.remove('hide-institutions');
        } else {
            container.classList.add('hide-institutions');
        }
        
        // Badges genre
        if (this.preferences.showGenreBadges) {
            container.classList.remove('hide-genre-badges');
        } else {
            container.classList.add('hide-genre-badges');
        }
        
        // Badges semaine
        if (this.preferences.showWeekBadges) {
            container.classList.remove('hide-week-badges');
        } else {
            container.classList.add('hide-week-badges');
        }
        
        // Badges poule
        if (this.preferences.showPoolBadges) {
            container.classList.remove('hide-pool-badges');
        } else {
            container.classList.add('hide-pool-badges');
        }
        
        // Mode de coloration des cartes
        // Retirer toutes les classes de mode de couleur
        container.classList.remove('color-genre', 'color-level', 'color-both', 'color-pool', 'color-institution');
        // Ajouter la classe du mode actuel
        container.classList.add(`color-${this.preferences.colorMode}`);
        
        // Mise à jour des toggles UI
        this.updateToggleUI('togglePreferences', this.preferences.showPreferences);
        this.updateToggleUI('toggleInstitutions', this.preferences.showInstitutions);
        this.updateToggleUI('toggleGenreBadges', this.preferences.showGenreBadges);
        this.updateToggleUI('toggleWeekBadges', this.preferences.showWeekBadges);
        this.updateToggleUI('togglePoolBadges', this.preferences.showPoolBadges);
        this.updateToggleUI('toggleAvailableSlots', this.preferences.showAvailableSlots);
    }

    /**
     * Met à jour l'UI d'un toggle
     */
    updateToggleUI(id, active) {
        const element = document.getElementById(id);
        if (element) {
            if (active) {
                element.classList.add('active');
            } else {
                element.classList.remove('active');
            }
        }
    }

    /**
     * Met à jour la visibilité des options selon l'onglet actif
     */
    updateDisplayOptionsVisibility(activeTab) {
        // Récupérer tous les éléments avec data-visible-tabs
        const elements = document.querySelectorAll('[data-visible-tabs]');
        
        elements.forEach(element => {
            const visibleTabs = element.getAttribute('data-visible-tabs').split(',').map(t => t.trim());
            
            // Si l'onglet actif est dans la liste, afficher l'élément
            if (visibleTabs.includes(activeTab)) {
                element.style.display = 'flex';
            } else {
                element.style.display = 'none';
            }
        });
    }

    /**
     * Définit un filtre
     */
    setFilter(name, value) {
        this.filters[name] = value;
        this.notifyChange();
    }

    /**
     * Définit une préférence
     */
    setPreference(name, value) {
        this.preferences[name] = value;
        this.applyPreferences();
        this.saveToStorage();
        this.notifyChange();
    }

    /**
     * Bascule une préférence booléenne
     */
    togglePreference(name) {
        this.preferences[name] = !this.preferences[name];
        this.applyPreferences();
        this.saveToStorage();
        this.notifyChange();
    }

    /**
     * Réinitialise tous les filtres
     */
    resetFilters() {
        this.filters = {
            gender: '',
            institution: '',
            team: '',
            pool: '',
            venue: '',
            week: ''
        };
        this.notifyChange();
    }

    /**
     * Réinitialise toutes les préférences d'affichage
     */
    resetDisplayPreferences() {
        this.preferences = {
            showPreferences: false,
            showInstitutions: true,
            showGenreBadges: true,
            showWeekBadges: false,
            showPoolBadges: false,
            showAvailableSlots: true,
            columnsCount: 3,
            timeSlotMinutes: 60,
            viewMode: 'total',
            colorMode: 'genre'
        };
        this.applyPreferences();
        this.saveToStorage();
        this.notifyChange();
    }

    /**
     * Enregistre un callback appelé lors des changements
     */
    onChange(callback) {
        this.callbacks.push(callback);
    }

    /**
     * Notifie tous les callbacks
     */
    notifyChange() {
        this.callbacks.forEach(cb => cb(this.filters, this.preferences));
    }

    /**
     * Obtient les matchs filtrés
     */
    getFilteredMatches(matches) {
        return Utils.filterMatches(matches, this.filters);
    }

    /**
     * Obtient les matchs non planifiés filtrés
     */
    getFilteredUnscheduled(unscheduled) {
        return Utils.filterUnscheduled(unscheduled, this.filters);
    }

    /**
     * Initialise les éléments UI des filtres
     */
    initializeUI(stats) {
        this.populateFilters(stats);
        this.setupEventListeners();
        this.setupZoomControl();
        this.setupViewModeControl();
    }

    /**
     * Remplit les listes déroulantes
     */
    populateFilters(stats) {
        // Institution
        this.populateSelect('filterInstitution', stats.institutions, (value) => {
            this.setFilter('institution', value);
            this.updateTeamFilter(stats);
        });

        // Team
        this.populateSelect('filterTeam', stats.teams, (value) => {
            this.setFilter('team', value);
        });

        // Pool
        this.populateSelect('filterPool', stats.pools, (value) => {
            this.setFilter('pool', value);
        });

        // Venue
        this.populateSelect('filterVenue', stats.venues, (value) => {
            this.setFilter('venue', value);
        });

        // Week
        const weekOptions = stats.weeks.map(w => ({ value: w, label: `Semaine ${w}` }));
        this.populateSelect('filterWeek', weekOptions, (value) => {
            this.setFilter('week', value);
        }, true);
    }

    /**
     * Remplit un select
     */
    populateSelect(id, options, onChange, useObjectFormat = false) {
        const select = document.getElementById(id);
        if (!select) return;

        // Garder la première option (Tous...)
        while (select.options.length > 1) {
            select.remove(1);
        }

        const items = useObjectFormat ? options : options.map(v => ({ value: v, label: v }));
        
        items.forEach(item => {
            const opt = document.createElement('option');
            opt.value = item.value;
            opt.textContent = item.label;
            select.appendChild(opt);
        });

        select.addEventListener('change', (e) => onChange(e.target.value));
    }

    /**
     * Met à jour le filtre d'équipes selon institution et genre
     */
    updateTeamFilter(stats) {
        const teamSelect = document.getElementById('filterTeam');
        if (!teamSelect) return;

        const selectedTeam = this.filters.team;
        
        teamSelect.innerHTML = '<option value="">Toutes les équipes</option>';
        
        // Filtrer les équipes
        let teams = stats.teams;
        
        if (this.filters.institution) {
            const instTeams = new Set();
            window.matchsData.forEach(m => {
                if (m.institution1 === this.filters.institution) instTeams.add(m.equipe1);
                if (m.institution2 === this.filters.institution) instTeams.add(m.equipe2);
            });
            teams = Array.from(instTeams).sort();
        }
        
        if (this.filters.gender) {
            const genderTeams = new Set();
            window.matchsData.forEach(m => {
                if (m.equipe1_genre === this.filters.gender) genderTeams.add(m.equipe1);
                if (m.equipe2_genre === this.filters.gender) genderTeams.add(m.equipe2);
            });
            teams = teams.filter(t => genderTeams.has(t));
        }
        
        teams.forEach(team => {
            const opt = document.createElement('option');
            opt.value = team;
            opt.textContent = team;
            if (team === selectedTeam) opt.selected = true;
            teamSelect.appendChild(opt);
        });
        
        if (this.filters.team && !teams.includes(this.filters.team)) {
            this.setFilter('team', '');
        }
    }

    /**
     * Configure les event listeners
     */
    setupEventListeners() {
        // Boutons de genre
        document.querySelectorAll('.gender-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const gender = btn.dataset.gender;
                this.setFilter('gender', gender);
                
                // Mise à jour UI
                document.querySelectorAll('.gender-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Mise à jour du filtre d'équipes
                const stats = Utils.calculateStats(window.matchsData);
                this.updateTeamFilter(stats);
            });
        });

        // Bouton reset filtres
        const resetBtn = document.querySelector('.btn-reset');
        if (resetBtn && !resetBtn.id) { // Only the filters reset button (no id)
            resetBtn.addEventListener('click', () => {
                this.resetFilters();
                
                // Reset UI
                document.querySelectorAll('.gender-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.gender === '') btn.classList.add('active');
                });
                
                document.getElementById('filterInstitution').value = '';
                document.getElementById('filterTeam').value = '';
                document.getElementById('filterPool').value = '';
                document.getElementById('filterVenue').value = '';
                document.getElementById('filterWeek').value = '';
                
                const stats = Utils.calculateStats(window.matchsData);
                this.updateTeamFilter(stats);
            });
        }

        // Bouton reset affichage
        const resetDisplayBtn = document.getElementById('btnResetDisplay');
        if (resetDisplayBtn) {
            resetDisplayBtn.addEventListener('click', () => {
                this.resetDisplayPreferences();
                
                // Reset UI du zoom (non géré par applyPreferences)
                this.updateZoomUI();
                
                // Reset UI du sélecteur de couleur
                const colorModeSelect = document.getElementById('colorModeSelect');
                if (colorModeSelect) {
                    colorModeSelect.value = this.preferences.colorMode;
                }
            });
        }

        // Toggles
        this.setupToggle('togglePreferences', 'showPreferences');
        this.setupToggle('toggleInstitutions', 'showInstitutions');
        this.setupToggle('toggleGenreBadges', 'showGenreBadges');
        this.setupToggle('toggleWeekBadges', 'showWeekBadges');
        this.setupToggle('togglePoolBadges', 'showPoolBadges');
        this.setupToggle('toggleAvailableSlots', 'showAvailableSlots');
        
        // Sélecteur de mode de couleur
        const colorModeSelect = document.getElementById('colorModeSelect');
        if (colorModeSelect) {
            // Définir la valeur initiale
            colorModeSelect.value = this.preferences.colorMode;
            
            colorModeSelect.addEventListener('change', (e) => {
                this.setPreference('colorMode', e.target.value);
            });
        }
        
        // Boutons de collapse
        this.setupCollapseButtons();
    }

    /**
     * Configure un toggle
     */
    setupToggle(id, prefName) {
        const element = document.getElementById(id);
        if (element) {
            element.addEventListener('click', () => {
                this.togglePreference(prefName);
            });
        }
    }

    /**
     * Met à jour l'UI des contrôles de zoom (colonnes et grid)
     */
    updateZoomUI() {
        this.updateZoomCardDisplay();
        this.updateZoomGridDisplay();
    }

    /**
     * Configure le contrôle de zoom
     */
    setupZoomControl() {
        // ===== COLONNES CARDS (pour vues en liste) =====
        const zoomCardIn = document.getElementById('zoomCardIn');
        const zoomCardOut = document.getElementById('zoomCardOut');
        
        if (zoomCardIn) {
            zoomCardIn.addEventListener('click', () => {
                // Augmenter le nombre de colonnes : max 8
                if (this.preferences.columnsCount < 8) {
                    this.setPreference('columnsCount', this.preferences.columnsCount + 1);
                }
                this.updateZoomCardDisplay();
            });
        }
        
        if (zoomCardOut) {
            zoomCardOut.addEventListener('click', () => {
                // Réduire le nombre de colonnes : min 2
                if (this.preferences.columnsCount > 2) {
                    this.setPreference('columnsCount', this.preferences.columnsCount - 1);
                }
                this.updateZoomCardDisplay();
            });
        }
        
        // ===== ZOOM GRID (pour vue grille) =====
        const zoomGridIn = document.getElementById('zoomGridIn');
        const zoomGridOut = document.getElementById('zoomGridOut');
        
        if (zoomGridIn) {
            zoomGridIn.addEventListener('click', () => {
                // Augmenter la taille des créneaux (zoomer)
                if (this.preferences.timeSlotMinutes === 30) {
                    this.setPreference('timeSlotMinutes', 60);
                } else if (this.preferences.timeSlotMinutes === 60) {
                    this.setPreference('timeSlotMinutes', 120);
                }
                this.updateZoomGridDisplay();
            });
        }
        
        if (zoomGridOut) {
            zoomGridOut.addEventListener('click', () => {
                // Réduire la taille des créneaux (dézoomer)
                if (this.preferences.timeSlotMinutes === 120) {
                    this.setPreference('timeSlotMinutes', 60);
                } else if (this.preferences.timeSlotMinutes === 60) {
                    this.setPreference('timeSlotMinutes', 30);
                }
                this.updateZoomGridDisplay();
            });
        }
        
        this.updateZoomCardDisplay();
        this.updateZoomGridDisplay();
    }

    /**
     * Met à jour l'affichage du nombre de colonnes
     */
    updateZoomCardDisplay() {
        const display = document.getElementById('zoomCardValue');
        if (display) {
            const count = this.preferences.columnsCount || 3;
            display.textContent = `${count} colonnes`;
        }
    }

    /**
     * Met à jour l'affichage du zoom grid
     */
    updateZoomGridDisplay() {
        const display = document.getElementById('zoomGridValue');
        if (display) {
            const labels = {
                30: '30min',
                60: '60min',
                120: '120min'
            };
            display.textContent = labels[this.preferences.timeSlotMinutes] || '60min';
        }
    }

    /**
     * Configure le contrôle du mode de vue
     */
    setupViewModeControl() {
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const mode = btn.dataset.mode;
                this.setPreference('viewMode', mode);
                
                // Mise à jour UI
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
        
        // Active le bouton correspondant au mode actuel
        const activeBtn = document.querySelector(`.view-btn[data-mode="${this.preferences.viewMode}"]`);
        if (activeBtn) {
            activeBtn.classList.add('active');
        }
    }

    /**
     * Configure les boutons de collapse/expand
     */
    setupCollapseButtons() {
        // Bouton pour les filtres
        const collapseFiltersBtn = document.getElementById('collapseFilters');
        const filtersContent = document.getElementById('filtersContent');
        
        if (collapseFiltersBtn && filtersContent) {
            collapseFiltersBtn.addEventListener('click', () => {
                collapseFiltersBtn.classList.toggle('collapsed');
                filtersContent.classList.toggle('collapsed');
                
                // Sauvegarde de l'état
                const isCollapsed = filtersContent.classList.contains('collapsed');
                localStorage.setItem('filtersCollapsed', isCollapsed);
            });
            
            // Restauration de l'état
            const filtersCollapsed = localStorage.getItem('filtersCollapsed') === 'true';
            if (filtersCollapsed) {
                collapseFiltersBtn.classList.add('collapsed');
                filtersContent.classList.add('collapsed');
            }
        }

        // Bouton pour les options
        const collapseOptionsBtn = document.getElementById('collapseOptions');
        const optionsContent = document.getElementById('optionsContent');
        
        if (collapseOptionsBtn && optionsContent) {
            collapseOptionsBtn.addEventListener('click', () => {
                collapseOptionsBtn.classList.toggle('collapsed');
                optionsContent.classList.toggle('collapsed');
                
                // Sauvegarde de l'état
                const isCollapsed = optionsContent.classList.contains('collapsed');
                localStorage.setItem('optionsCollapsed', isCollapsed);
            });
            
            // Restauration de l'état
            const optionsCollapsed = localStorage.getItem('optionsCollapsed') === 'true';
            if (optionsCollapsed) {
                collapseOptionsBtn.classList.add('collapsed');
                optionsContent.classList.add('collapsed');
            }
        }
    }

    /**
     * Met à jour la visibilité des options d'affichage selon l'onglet actif
     */
    updateDisplayOptionsVisibility(currentTab) {
        // Afficher/masquer les toggles selon l'onglet actif
        document.querySelectorAll('.toggle-container').forEach(toggle => {
            const visibleTabs = toggle.getAttribute('data-visible-tabs');
            if (visibleTabs) {
                const tabs = visibleTabs.split(',');
                if (tabs.includes(currentTab)) {
                    toggle.style.display = 'flex';
                } else {
                    toggle.style.display = 'none';
                }
            }
        });
        
        // Afficher/masquer le sélecteur de mode de couleur selon l'onglet actif
        const colorModeSelector = document.querySelector('.color-mode-selector');
        if (colorModeSelector) {
            const visibleTabs = colorModeSelector.getAttribute('data-visible-tabs');
            if (visibleTabs) {
                const tabs = visibleTabs.split(',');
                if (tabs.includes(currentTab)) {
                    colorModeSelector.style.display = 'block';
                } else {
                    colorModeSelector.style.display = 'none';
                }
            }
        }
        
        // Afficher/masquer les contrôles compacts selon l'onglet actif
        document.querySelectorAll('.compact-control').forEach(control => {
            const visibleTabs = control.getAttribute('data-visible-tabs');
            if (visibleTabs) {
                const tabs = visibleTabs.split(',');
                if (tabs.includes(currentTab)) {
                    control.style.display = 'flex';
                } else {
                    control.style.display = 'none';
                }
            }
        });
    }
}

// Export pour utilisation
if (typeof module !== 'undefined' && module.exports) {
    module.exports = FilterManager;
}

</script>
<script>
/**
 * Slot Manager - Gestion des créneaux avec statut libre/occupé
 * 
 * ARCHITECTURE:
 * - Tous les créneaux (gymnase × horaire × semaine) sont générés au départ
 * - Chaque créneau a un statut: 'libre' ou 'occupé'
 * - Quand un match bouge: libérer ancien créneau + occuper nouveau
 * - Synchronisation avec localStorage pour persistance
 */

class SlotManager {
    constructor(slotsData) {
        // Index des créneaux par slot_id
        this.slots = new Map();
        
        // Initialiser avec les données
        slotsData.forEach(slot => {
            this.slots.set(slot.slot_id, {
                ...slot,
                statut: slot.statut || 'libre',
                match_id: slot.match_id || null
            });
        });
        
        console.log(`📋 SlotManager initialisé avec ${this.slots.size} créneaux`);
        this.logStats();
        
        // ============ OBSERVER PATTERN ============
        // S'abonner au DataManager pour synchroniser automatiquement
        this.subscribeToDataManager();
    }
    
    /**
     * S'abonner aux changements du DataManager
     * Synchronise automatiquement les créneaux quand un match est modifié
     */
    subscribeToDataManager() {
        if (!window.dataManager) {
            console.warn('⚠️ SlotManager: DataManager not available yet, will retry...');
            // Réessayer après un délai
            setTimeout(() => this.subscribeToDataManager(), 100);
            return;
        }
        
        this.unsubscribe = window.dataManager.subscribe((event) => {
            console.log('🔔 SlotManager received event:', event.type);
            
            switch (event.type) {
                case 'MODIFICATION_SAVED':
                    // Un match a été déplacé
                    const mod = event.modification;
                    this.handleMatchMove(event.matchId, mod.original, mod.new);
                    break;
                    
                case 'MODIFICATION_UNDONE':
                    // Une modification a été annulée
                    // Recharger depuis localStorage ou recalculer
                    this.loadFromLocalStorage();
                    break;
                    
                case 'ALL_MODIFICATIONS_RESET':
                    // Toutes les modifications annulées
                    this.reset();
                    break;
            }
        });
        
        console.log('✅ SlotManager subscribed to DataManager');
    }
    
    /**
     * Gérer le déplacement d'un match
     */
    handleMatchMove(matchId, originalSlot, newSlot) {
        console.log(`🔄 SlotManager: Handling move for ${matchId}`);
        console.log('  Original slot:', originalSlot);
        console.log('  New slot:', newSlot);
        
        // Convertir les propriétés week/time/venue vers semaine/horaire/gymnase
        const oldSlot = {
            semaine: originalSlot.week,
            horaire: originalSlot.time,
            gymnase: originalSlot.venue
        };
        
        const newSlotConverted = {
            semaine: newSlot.week,
            horaire: newSlot.time,
            gymnase: newSlot.venue
        };
        
        // Libérer l'ancien créneau
        this.freeSlot(oldSlot.semaine, oldSlot.horaire, oldSlot.gymnase);
        
        // Occuper le nouveau créneau
        this.occupySlot(newSlotConverted.semaine, newSlotConverted.horaire, newSlotConverted.gymnase, matchId);
        
        // Sauvegarder
        this.saveToLocalStorage();
        
        console.log('✅ SlotManager: Move handled successfully');
    }
    
    /**
     * Obtenir un créneau par ses coordonnées
     */
    getSlot(semaine, horaire, gymnase) {
        const slotId = `${semaine}_${horaire}_${gymnase}`;
        return this.slots.get(slotId);
    }
    
    /**
     * Vérifier si un créneau est libre
     */
    isSlotFree(semaine, horaire, gymnase) {
        const slot = this.getSlot(semaine, horaire, gymnase);
        return slot && slot.statut === 'libre';
    }
    
    /**
     * Occuper un créneau avec un match
     */
    occupySlot(semaine, horaire, gymnase, matchId) {
        const slotId = `${semaine}_${horaire}_${gymnase}`;
        const slot = this.slots.get(slotId);
        
        if (!slot) {
            console.warn(`⚠️ Créneau inexistant: ${slotId}`);
            return false;
        }
        
        if (slot.statut === 'occupé' && slot.match_id !== matchId) {
            console.warn(`⚠️ Créneau ${slotId} déjà occupé par ${slot.match_id}`);
            return false;
        }
        
        slot.statut = 'occupé';
        slot.match_id = matchId;
        
        console.log(`✅ Créneau ${slotId} occupé par ${matchId}`);
        return true;
    }
    
    /**
     * Libérer un créneau
     */
    freeSlot(semaine, horaire, gymnase) {
        const slotId = `${semaine}_${horaire}_${gymnase}`;
        const slot = this.slots.get(slotId);
        
        if (!slot) {
            console.warn(`⚠️ Créneau inexistant: ${slotId}`);
            return false;
        }
        
        const previousMatchId = slot.match_id;
        slot.statut = 'libre';
        slot.match_id = null;
        
        console.log(`🆓 Créneau ${slotId} libéré (était occupé par ${previousMatchId})`);
        return true;
    }
    
    /**
     * Déplacer un match: libérer ancien créneau + occuper nouveau
     */
    moveMatch(matchId, oldSlot, newSlot) {
        console.log(`🔄 Déplacement match ${matchId}:`, {
            from: oldSlot,
            to: newSlot
        });
        
        // CONVERSION: week/time/venue → semaine/horaire/gymnase
        // Car DataManager utilise {week, time, venue} mais SlotManager attend {semaine, horaire, gymnase}
        const oldSlotConverted = oldSlot ? {
            semaine: oldSlot.week || oldSlot.semaine,
            horaire: oldSlot.time || oldSlot.horaire,
            gymnase: oldSlot.venue || oldSlot.gymnase
        } : null;
        
        const newSlotConverted = {
            semaine: newSlot.week || newSlot.semaine,
            horaire: newSlot.time || newSlot.horaire,
            gymnase: newSlot.venue || newSlot.gymnase
        };
        
        // Libérer ancien créneau
        if (oldSlotConverted) {
            this.freeSlot(oldSlotConverted.semaine, oldSlotConverted.horaire, oldSlotConverted.gymnase);
        }
        
        // Occuper nouveau créneau
        const success = this.occupySlot(
            newSlotConverted.semaine, 
            newSlotConverted.horaire, 
            newSlotConverted.gymnase, 
            matchId
        );
        
        if (success) {
            this.logStats();
            this.saveToLocalStorage();
        }
        
        return success;
    }
    
    /**
     * Obtenir tous les créneaux libres
     */
    getFreeSlots() {
        const freeSlots = [];
        this.slots.forEach(slot => {
            if (slot.statut === 'libre') {
                freeSlots.push(slot);
            }
        });
        return freeSlots;
    }
    
    /**
     * Obtenir tous les créneaux occupés
     */
    getOccupiedSlots() {
        const occupiedSlots = [];
        this.slots.forEach(slot => {
            if (slot.statut === 'occupé') {
                occupiedSlots.push(slot);
            }
        });
        return occupiedSlots;
    }
    
    /**
     * Statistiques des créneaux
     */
    logStats() {
        const free = this.getFreeSlots().length;
        const occupied = this.getOccupiedSlots().length;
        const total = this.slots.size;
        
        console.log(`📊 Créneaux: ${occupied} occupés / ${free} libres / ${total} total`);
    }
    
    /**
     * Sauvegarder l'état dans localStorage
     */
    saveToLocalStorage() {
        try {
            const slotsArray = Array.from(this.slots.values());
            localStorage.setItem('slotsState', JSON.stringify(slotsArray));
            console.log('💾 État des créneaux sauvegardé');
        } catch (e) {
            console.error('❌ Erreur sauvegarde créneaux:', e);
        }
    }
    
    /**
     * Charger l'état depuis localStorage
     */
    loadFromLocalStorage() {
        try {
            const saved = localStorage.getItem('slotsState');
            if (saved) {
                const slotsArray = JSON.parse(saved);
                this.slots.clear();
                
                slotsArray.forEach(slot => {
                    this.slots.set(slot.slot_id, slot);
                });
                
                console.log('📥 État des créneaux chargé depuis localStorage');
                this.logStats();
                return true;
            }
        } catch (e) {
            console.error('❌ Erreur chargement créneaux:', e);
        }
        return false;
    }
    
    /**
     * Réinitialiser tous les créneaux
     */
    reset() {
        this.slots.forEach(slot => {
            slot.statut = 'libre';
            slot.match_id = null;
        });
        
        localStorage.removeItem('slotsState');
        console.log('🔄 Créneaux réinitialisés');
        this.logStats();
    }
}

</script>
<script>
/**
 * EditModal - Modal dialog for editing match details
 * 
 * Features:
 * - Edit week number, time slot, and venue
 * - Show available options (venues and time slots)
 * - Store modifications in localStorage
 * - Export modifications as JSON
 * - Visual feedback for modified matches
 */

class EditModal {
    constructor() {
        this.currentMatch = null;
        this.modifications = this.loadModifications();
        this.modal = null;
        this.createModal();
        this.setupEventListeners();
    }

    /**
     * Load modifications from localStorage
     */
    loadModifications() {
        try {
            const saved = localStorage.getItem('matchModifications');
            return saved ? JSON.parse(saved) : {};
        } catch (e) {
            console.error('Error loading modifications:', e);
            return {};
        }
    }

    /**
     * Save a single modification (called from drag-and-drop)
     * @param {Object} modification - Modification object with match_id, original, new
     */
    saveModification(modification) {
        console.log('📝 EditModal.saveModification called with:', modification);
        
        // Utiliser DataManager pour sauvegarder
        if (window.dataManager) {
            const success = window.dataManager.saveModification(modification);
            if (success) {
                // Synchroniser l'état local
                this.modifications = window.dataManager.getModifications();
                this.updateMatchCardUI(modification.match_id, true);
                console.log('✅ Modification saved via DataManager');
            }
        } else {
            // Fallback: ancien système
            const matchId = modification.match_id;
            
            this.modifications[matchId] = {
                original: modification.original,
                new: modification.new,
                timestamp: new Date().toISOString(),
                teams: modification.teams || 'Unknown'
            };
            
            this.saveModifications();
            this.updateMatchCardUI(matchId, true);
            console.log('✅ Modification saved (legacy mode)');
        }
    }

    /**
     * Save modifications to localStorage (LEGACY - DataManager le fait maintenant)
     */
    saveModifications() {
        try {
            localStorage.setItem('matchModifications', JSON.stringify(this.modifications));
            this.updateModificationCounter();
        } catch (e) {
            console.error('Error saving modifications:', e);
        }
    }

    /**
     * Create modal HTML structure
     */
    createModal() {
        const modalHTML = `
            <div id="editModal" class="edit-modal" style="display: none;">
                <div class="edit-modal-backdrop"></div>
                <div class="edit-modal-content">
                    <div class="edit-modal-header">
                        <h3>✏️ Modifier le Match</h3>
                        <button class="edit-modal-close" id="closeEditModal">&times;</button>
                    </div>
                    
                    <div class="edit-modal-body">
                        <div class="match-info">
                            <div class="match-teams">
                                <span id="editTeam1"></span> <strong>vs</strong> <span id="editTeam2"></span>
                            </div>
                            <div class="match-pool">Poule: <span id="editPool"></span></div>
                        </div>

                        <div class="edit-form">
                            <div class="form-group">
                                <label for="editWeek">Semaine</label>
                                <input type="number" id="editWeek" min="1" max="26" class="form-control">
                            </div>

                            <div class="form-group">
                                <label for="editTime">Horaire</label>
                                <select id="editTime" class="form-control">
                                    <option value="">-- Choisir --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="editVenue">Gymnase</label>
                                <select id="editVenue" class="form-control">
                                    <option value="">-- Choisir --</option>
                                </select>
                            </div>

                            <div class="conflict-actions" id="conflictActions">
                                <div class="conflict-warning">
                                    <span class="conflict-warning-icon">⚠️</span>
                                    <span>Ce créneau est déjà occupé!</span>
                                </div>
                                <div class="conflict-match-info" id="conflictMatchInfo"></div>
                                <div class="conflict-buttons">
                                    <button class="btn-conflict btn-force-replace" id="btnForceReplace">
                                        🔄 Remplacer
                                    </button>
                                    <button class="btn-conflict btn-swap" id="btnSwap">
                                        ↔️ Échanger
                                    </button>
                                </div>
                            </div>

                            <div class="original-values">
                                <strong>Valeurs originales:</strong>
                                <div id="originalValues"></div>
                            </div>
                        </div>
                    </div>

                    <div class="edit-modal-footer">
                        <button id="unscheduleMatch" class="btn btn-danger-outline">
                            🗑️ Déplanifier
                        </button>
                        <div style="flex: 1;"></div>
                        <button id="cancelEdit" class="btn btn-secondary">Annuler</button>
                        <button id="saveEdit" class="btn btn-primary">💾 Enregistrer</button>
                    </div>
                </div>
            </div>
        `;

        document.body.insertAdjacentHTML('beforeend', modalHTML);
        this.modal = document.getElementById('editModal');
    }

    /**
     * Setup event listeners
     */
    setupEventListeners() {
        document.getElementById('closeEditModal').addEventListener('click', () => this.close());
        document.getElementById('cancelEdit').addEventListener('click', () => this.close());
        document.getElementById('saveEdit').addEventListener('click', () => this.save());
        document.getElementById('unscheduleMatch').addEventListener('click', () => this.unschedule());
        
        // Close on backdrop click
        this.modal.querySelector('.edit-modal-backdrop').addEventListener('click', () => this.close());
        
        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.modal.style.display !== 'none') {
                this.close();
            }
        });
        
        // Smart filtering: Week change updates venues and time slots
        document.getElementById('editWeek').addEventListener('change', () => this.onWeekChange());
        
        // Smart filtering: Venue change updates time slots
        document.getElementById('editVenue').addEventListener('change', () => this.onVenueChange());
        
        // Time slot change checks for conflicts
        document.getElementById('editTime').addEventListener('change', () => this.checkConflict());
        
        // Conflict action buttons
        document.getElementById('btnForceReplace').addEventListener('click', () => this.forceReplace());
        document.getElementById('btnSwap').addEventListener('click', () => this.swapMatches());
    }

    /**
     * Handle week change - update venues and time slots
     */
    onWeekChange() {
        const week = parseInt(document.getElementById('editWeek').value);
        const currentVenue = document.getElementById('editVenue').value;
        const currentTime = document.getElementById('editTime').value;
        
        if (week) {
            // Repopulate with current selections
            this.populateVenues(currentVenue, week, currentTime);
            this.populateTimeSlots(currentTime, currentVenue, week);
        }
        
        this.checkConflict();
    }

    /**
     * Handle venue change - update time slots
     */
    onVenueChange() {
        const venue = document.getElementById('editVenue').value;
        const currentTime = document.getElementById('editTime').value;
        const week = parseInt(document.getElementById('editWeek').value);
        
        if (week) {
            // Repopulate time slots filtered by venue (or all if no venue)
            this.populateTimeSlots(currentTime, venue, week);
        }
        
        this.checkConflict();
    }

    /**
     * Check for conflicts and show/hide conflict panel
     */
    checkConflict() {
        const week = parseInt(document.getElementById('editWeek').value);
        const time = document.getElementById('editTime').value;
        const venue = document.getElementById('editVenue').value;
        
        const conflictPanel = document.getElementById('conflictActions');
        const conflictInfo = document.getElementById('conflictMatchInfo');
        
        if (!week || !time || !venue) {
            conflictPanel.classList.remove('active');
            return;
        }
        
        const conflictingMatch = this.getConflictingMatch(week, time, venue);
        
        if (conflictingMatch) {
            conflictInfo.innerHTML = `
                <strong>Match actuel:</strong><br>
                ${conflictingMatch.equipe1} vs ${conflictingMatch.equipe2}<br>
                <em>${conflictingMatch.poule}</em>
            `;
            conflictPanel.classList.add('active');
            this.conflictingMatch = conflictingMatch;
        } else {
            conflictPanel.classList.remove('active');
            this.conflictingMatch = null;
        }
    }

    /**
     * Get the match that conflicts with the selected slot
     */
    getConflictingMatch(week, time, venue) {
        if (!window.allMatches) return null;
        
        const currentMatchId = this.currentMatch?.match_id;
        
        return window.allMatches.find(match => 
            match.match_id !== currentMatchId &&
            match.semaine === week &&
            match.horaire === time &&
            match.gymnase === venue
        );
    }

    /**
     * Force replace - cancel conflicting match and place current one
     */
    forceReplace() {
        if (!this.conflictingMatch || !this.currentMatch) return;
        
        const week = parseInt(document.getElementById('editWeek').value);
        const time = document.getElementById('editTime').value;
        const venue = document.getElementById('editVenue').value;
        
        if (confirm(`⚠️ Voulez-vous vraiment remplacer le match "${this.conflictingMatch.equipe1} vs ${this.conflictingMatch.equipe2}" ?\n\nCe match sera déplacé vers les matchs non planifiés.`)) {
            // Mark conflicting match as unscheduled
            this.modifications[this.conflictingMatch.match_id] = {
                original: {
                    week: this.conflictingMatch.semaine,
                    time: this.conflictingMatch.horaire,
                    venue: this.conflictingMatch.gymnase
                },
                new: {
                    week: null,
                    time: null,
                    venue: null
                },
                timestamp: new Date().toISOString(),
                teams: `${this.conflictingMatch.equipe1} vs ${this.conflictingMatch.equipe2}`,
                action: 'force-replaced'
            };
            
            // Update current match to new slot
            this.saveCurrentMatch(week, time, venue);
            
            this.showNotification(`✅ Match replacé avec succès! Le match ${this.conflictingMatch.equipe1} vs ${this.conflictingMatch.equipe2} a été déplacé.`);
            this.close();
        }
    }

    /**
     * Swap matches - exchange time slots
     */
    swapMatches() {
        if (!this.conflictingMatch || !this.currentMatch) return;
        
        const newWeek = parseInt(document.getElementById('editWeek').value);
        const newTime = document.getElementById('editTime').value;
        const newVenue = document.getElementById('editVenue').value;
        
        if (confirm(`↔️ Échanger les créneaux entre:\n\n"${this.currentMatch.equipe1} vs ${this.currentMatch.equipe2}"\net\n"${this.conflictingMatch.equipe1} vs ${this.conflictingMatch.equipe2}"?`)) {
            // Swap: Move conflicting match to current match's slot
            this.modifications[this.conflictingMatch.match_id] = {
                original: {
                    week: this.conflictingMatch.semaine,
                    time: this.conflictingMatch.horaire,
                    venue: this.conflictingMatch.gymnase
                },
                new: {
                    week: this.currentMatch.semaine,
                    time: this.currentMatch.horaire,
                    venue: this.currentMatch.gymnase
                },
                timestamp: new Date().toISOString(),
                teams: `${this.conflictingMatch.equipe1} vs ${this.conflictingMatch.equipe2}`,
                action: 'swapped'
            };
            
            // Move current match to conflicting match's slot
            this.saveCurrentMatch(newWeek, newTime, newVenue);
            
            this.showNotification(`✅ Matchs échangés avec succès!`);
            this.close();
        }
    }

    /**
     * Save current match modification
     */
    saveCurrentMatch(week, time, venue) {
        const matchId = this.currentMatch.match_id;
        
        this.modifications[matchId] = {
            original: {
                week: this.currentMatch.semaine,
                time: this.currentMatch.horaire,
                venue: this.currentMatch.gymnase
            },
            new: {
                week: week,
                time: time,
                venue: venue
            },
            timestamp: new Date().toISOString(),
            teams: `${this.currentMatch.equipe1} vs ${this.currentMatch.equipe2}`
        };
        
        this.saveModifications();
        this.updateMatchCardUI(matchId, true);
    }

    /**
     * Get available slots for a specific venue and week
     * Returns array of time strings
     */
    getAvailableSlotsForVenue(week, venue) {
        if (!window.availableSlotsData) return [];
        
        return window.availableSlotsData
            .filter(slot => slot.semaine === week && slot.gymnase === venue)
            .map(slot => slot.horaire)
            .sort();
    }

    /**
     * Check if a time slot is already taken by another match
     */
    isSlotTaken(week, time, venue) {
        if (!window.allMatches) return false;
        
        // Exclude current match from check
        const currentMatchId = this.currentMatch?.match_id;
        
        return window.allMatches.some(match => 
            match.match_id !== currentMatchId &&
            match.semaine === week &&
            match.horaire === time &&
            match.gymnase === venue
        );
    }

    /**
     * Get slot status: 'available', 'taken', or 'unavailable'
     */
    getSlotStatus(week, time, venue) {
        const isTaken = this.isSlotTaken(week, time, venue);
        const availableSlots = this.getAvailableSlotsForVenue(week, venue);
        const isConfigured = availableSlots.includes(time);
        
        if (isTaken) {
            // Slot is occupied by another match
            return 'taken';
        }
        
        if (isConfigured) {
            // Slot is in configuration and not taken
            return 'available';
        }
        
        // Slot is not configured (shouldn't normally happen if we're showing it, but just in case)
        return 'unavailable';
    }

    /**
     * Check if venue has any available slots for a given week
     */
    hasAvailableSlots(week, venue) {
        const slots = this.getAvailableSlotsForVenue(week, venue);
        return slots.length > 0;
    }

    /**
     * Open modal for a specific match
     * @param {Object} matchData - Match data
     * @param {HTMLElement} triggerElement - Element that triggered the modal (for positioning)
     */
    open(matchData, triggerElement = null) {
        this.currentMatch = matchData;
        
        // Populate match info
        document.getElementById('editTeam1').textContent = matchData.equipe1;
        document.getElementById('editTeam2').textContent = matchData.equipe2;
        document.getElementById('editPool').textContent = matchData.poule;
        
        // Check if this match has existing modifications
        const existing = this.modifications[matchData.match_id];
        
        // Set current values (modified or original)
        const currentWeek = existing ? existing.new.week : matchData.semaine;
        const currentTime = existing ? existing.new.time : matchData.horaire;
        const currentVenue = existing ? existing.new.venue : matchData.gymnase;
        
        document.getElementById('editWeek').value = currentWeek;
        
        // Populate with smart cross-filtering enabled
        // First populate time slots (may show all if no venue selected)
        this.populateTimeSlots(currentTime, currentVenue, currentWeek);
        // Then populate venues (may filter by time if selected)
        this.populateVenues(currentVenue, currentWeek, currentTime);
        
        // Check for initial conflict
        this.checkConflict();
        
        // Show original values
        const originalHTML = `
            <div>Semaine: ${matchData.semaine}</div>
            <div>Horaire: ${matchData.horaire}</div>
            <div>Gymnase: ${matchData.gymnase}</div>
        `;
        document.getElementById('originalValues').innerHTML = originalHTML;
        
        // Position modal near the trigger element if provided
        if (triggerElement) {
            this.positionModalNearElement(triggerElement);
        }
        
        // Show modal
        this.modal.style.display = 'flex';
        // Don't freeze the body - allow scrolling
        // document.body.style.overflow = 'hidden';  // REMOVED to keep interface responsive
    }

    /**
     * Position modal near a specific element
     */
    positionModalNearElement(element) {
        const modalContent = this.modal.querySelector('.edit-modal-content');
        const rect = element.getBoundingClientRect();
        const viewportHeight = window.innerHeight;
        const modalHeight = 600; // Approximate modal height
        
        // Calculate vertical position
        let top = rect.top;
        
        // Adjust if modal would go off-screen at bottom
        if (top + modalHeight > viewportHeight) {
            top = Math.max(20, viewportHeight - modalHeight - 20);
        }
        
        // Adjust if too close to top
        if (top < 20) {
            top = 20;
        }
        
        // Apply positioning
        modalContent.style.marginTop = `${top}px`;
        
        // Add horizontal centering with slight offset if near edge
        const horizontalCenter = rect.left + (rect.width / 2);
        if (horizontalCenter < window.innerWidth / 3) {
            // Element on left side - position modal slightly to the right
            modalContent.style.marginLeft = '60px';
        } else if (horizontalCenter > (window.innerWidth * 2) / 3) {
            // Element on right side - position modal slightly to the left
            modalContent.style.marginRight = '60px';
        }
    }

    /**
     * Populate time slots dropdown with smart filtering
     * Shows ALL time slots including taken ones, with indicators
     * @param {string} selectedTime - Currently selected time
     * @param {string} venue - Filter by venue (optional)
     * @param {number} week - Week number for availability check (optional)
     */
    populateTimeSlots(selectedTime, venue = null, week = null) {
        const timeSelect = document.getElementById('editTime');
        let times = [];
        
        console.log('populateTimeSlots called:', { selectedTime, venue, week });
        console.log('Available data:', {
            hasAvailableSlotsData: !!window.availableSlotsData,
            availableSlotsCount: window.availableSlotsData?.length,
            hasAllMatches: !!window.allMatches,
            allMatchesCount: window.allMatches?.length
        });
        
        if (week) {
            if (venue) {
                // Venue selected: show this venue's configured slots PLUS any times that have matches
                const configuredSlots = this.getAvailableSlotsForVenue(week, venue);
                
                // Get times that already have matches at this venue/week
                const matchTimes = window.allMatches
                    .filter(m => m.semaine === week && m.gymnase === venue)
                    .map(m => m.horaire);
                
                console.log('Venue mode:', { venue, configuredSlots, matchTimes });
                
                // Combine and deduplicate
                times = [...new Set([...configuredSlots, ...matchTimes])].sort();
                
                console.log('Combined times:', times);
            } else {
                // No venue: show ALL unique time slots across all venues for this week
                // Include both configured slots and slots with existing matches
                const configuredTimes = window.availableSlotsData
                    .filter(slot => slot.semaine === week)
                    .map(slot => slot.horaire);
                
                const matchTimes = window.allMatches
                    .filter(m => m.semaine === week)
                    .map(m => m.horaire);
                
                times = [...new Set([...configuredTimes, ...matchTimes])].sort();
            }
        } else {
            // Fallback: show all standard times
            times = ['09:00', '12:00', '14:00', '16:00', '18:00', '20:00'];
        }
        
        timeSelect.innerHTML = '<option value="">-- Choisir --</option>';
        
        times.forEach(time => {
            const option = document.createElement('option');
            option.value = time;
            
            // Check availability status if week is provided
            if (week) {
                let status = 'available';
                let venueInfo = '';
                
                if (venue) {
                    // Venue selected: check this specific venue
                    status = this.getSlotStatus(week, time, venue);
                    
                    console.log(`Slot ${time} status:`, status);
                    
                    const indicators = {
                        'available': '✅ ',
                        'taken': '⚠️ ',
                        'unavailable': '❌ '
                    };
                    
                    const statusLabels = {
                        'available': ' (libre)',
                        'taken': ' (occupé)',
                        'unavailable': ' (pas configuré)'
                    };
                    
                    option.textContent = `${indicators[status]}${time}${statusLabels[status]}`;
                    
                    // NEVER disable - always allow selection to enable conflict resolution
                    // option.disabled = false;  // All slots clickable
                    
                    option.classList.add(`slot-${status}`);
                } else {
                    // No venue: show which venues have this time slot available
                    const availableVenues = window.availableSlotsData
                        .filter(slot => slot.semaine === week && slot.horaire === time)
                        .map(slot => slot.gymnase);
                    
                    const takenVenues = availableVenues.filter(v => 
                        this.isSlotTaken(week, time, v)
                    );
                    
                    const freeVenues = availableVenues.filter(v => 
                        !this.isSlotTaken(week, time, v)
                    );
                    
                    if (freeVenues.length > 0) {
                        status = 'available';
                        venueInfo = ` (${freeVenues.length} gymnase${freeVenues.length > 1 ? 's' : ''} libre${freeVenues.length > 1 ? 's' : ''})`;
                    } else if (takenVenues.length > 0) {
                        status = 'taken';
                        venueInfo = ` (${takenVenues.length} occupé${takenVenues.length > 1 ? 's' : ''})`;
                    } else {
                        status = 'unavailable';
                        venueInfo = ' (aucun gymnase)';
                    }
                    
                    const indicators = {
                        'available': '✅ ',
                        'taken': '⚠️ ',
                        'unavailable': '❌ '
                    };
                    
                    option.textContent = `${indicators[status]}${time}${venueInfo}`;
                    option.classList.add(`slot-${status}`);
                    
                    // NEVER disable - always allow selection
                    // option.disabled = false;  // All slots clickable
                }
            } else {
                option.textContent = time;
            }
            
            if (time === selectedTime) option.selected = true;
            timeSelect.appendChild(option);
        });
    }

    /**
     * Populate venues dropdown with smart filtering
     * Shows ALL venues, never disabled, with availability indicators
     * @param {string} selectedVenue - Currently selected venue
     * @param {number} week - Filter by week (optional)
     * @param {string} time - Filter by time slot (optional)
     */
    populateVenues(selectedVenue, week = null, time = null) {
        const venueSelect = document.getElementById('editVenue');
        
        // ALWAYS show ALL venues - never filter, never disable
        const venues = [...new Set(window.allMatches.map(m => m.gymnase))].sort();
        
        venueSelect.innerHTML = '<option value="">-- Choisir --</option>';
        
        venues.forEach(venue => {
            const option = document.createElement('option');
            option.value = venue;
            
            // Check availability status if week is provided
            if (week) {
                let status = 'unavailable';  // Default: no slots configured
                let indicator = '❌ ';
                let slotInfo = '';
                
                if (time) {
                    // Time selected: check if this venue has this specific time available
                    const hasTimeSlot = window.availableSlotsData?.some(slot => 
                        slot.semaine === week && 
                        slot.horaire === time && 
                        slot.gymnase === venue
                    );
                    
                    if (hasTimeSlot) {
                        const isTaken = this.isSlotTaken(week, time, venue);
                        status = isTaken ? 'taken' : 'available';
                        indicator = isTaken ? '⚠️ ' : '✅ ';
                        slotInfo = isTaken ? ' (occupé)' : ' (libre)';
                    } else {
                        status = 'unavailable';
                        indicator = '❌ ';
                        slotInfo = ' (pas ce créneau)';
                    }
                } else {
                    // No time: show general availability summary for this week
                    const venueSlots = this.getAllTimesForVenue(week, venue);
                    
                    if (venueSlots.length > 0) {
                        const takenCount = venueSlots.filter(t => 
                            this.isSlotTaken(week, t, venue)
                        ).length;
                        const freeCount = venueSlots.length - takenCount;
                        
                        if (freeCount > 0) {
                            status = 'available';
                            indicator = '✅ ';
                            slotInfo = ` (${freeCount}/${venueSlots.length} libres)`;
                        } else {
                            status = 'taken';
                            indicator = '⚠️ ';
                            slotInfo = ` (${venueSlots.length} occupés)`;
                        }
                    } else {
                        status = 'unavailable';
                        indicator = '❌ ';
                        slotInfo = ' (aucun créneau)';
                    }
                }
                
                option.textContent = `${indicator}${venue}${slotInfo}`;
                option.classList.add(`slot-${status}`);
                
                // NEVER disable - always allow selection
                // option.disabled = false;  // Explicit: all venues clickable
            } else {
                option.textContent = venue;
            }
            
            if (venue === selectedVenue) option.selected = true;
            venueSelect.appendChild(option);
        });
        
        console.log(`[populateVenues] Showing ${venues.length} venues (all clickable), week=${week}, time=${time}`);
    }

    /**
     * Save modifications
     */
    save() {
        if (!this.currentMatch) return;
        
        const newWeek = parseInt(document.getElementById('editWeek').value);
        const newTime = document.getElementById('editTime').value;
        const newVenue = document.getElementById('editVenue').value;
        
        // Validate inputs
        if (!newWeek || !newTime || !newVenue) {
            alert('⚠️ Veuillez remplir tous les champs');
            return;
        }
        
        const matchId = this.currentMatch.match_id;
        
        // Check if values actually changed
        const changed = (
            newWeek !== this.currentMatch.semaine ||
            newTime !== this.currentMatch.horaire ||
            newVenue !== this.currentMatch.gymnase
        );
        
        if (!changed) {
            // If no changes and modification exists, remove it
            if (this.modifications[matchId]) {
                delete this.modifications[matchId];
                this.saveModifications();
                this.updateMatchCardUI(matchId, false);
            }
            this.close();
            return;
        }
        
        // Check for conflicts one more time before saving
        const conflictingMatch = this.getConflictingMatch(newWeek, newTime, newVenue);
        if (conflictingMatch) {
            alert('⚠️ Ce créneau est occupé! Utilisez "Remplacer" ou "Échanger" pour résoudre le conflit.');
            return;
        }
        
        // Save without conflict
        this.saveCurrentMatch(newWeek, newTime, newVenue);
        this.close();
        
        // Show success message
        this.showNotification(`✅ Match modifié: ${this.currentMatch.equipe1} vs ${this.currentMatch.equipe2}`);
    }

    /**
     * Update match card UI to show it's modified
     */
    updateMatchCardUI(matchId, isModified) {
        const cards = document.querySelectorAll(`[data-match-id="${matchId}"]`);
        cards.forEach(card => {
            if (isModified) {
                card.classList.add('match-modified');
                
                // Update displayed values
                const mod = this.modifications[matchId];
                const weekElem = card.querySelector('.match-week');
                const timeElem = card.querySelector('.match-time');
                const venueElem = card.querySelector('.match-venue');
                
                if (weekElem) weekElem.textContent = `S${mod.new.week}`;
                if (timeElem) timeElem.textContent = mod.new.time;
                if (venueElem) venueElem.textContent = mod.new.venue;
            } else {
                card.classList.remove('match-modified');
            }
        });
    }
    
    /**
     * Déplanifier un match (le retirer du calendrier)
     */
    unschedule() {
        if (!this.currentMatch) return;
        
        const matchInfo = `${this.currentMatch.equipe1} vs ${this.currentMatch.equipe2}`;
        const confirmed = confirm(
            `🗑️ Déplanifier ce match ?\n\n${matchInfo}\n\n` +
            `Le match sera retiré du calendrier et ajouté à la liste des matchs non planifiés.`
        );
        
        if (!confirmed) return;
        
        const matchId = this.currentMatch.match_id;
        
        // Créer une "modification" qui marque le match comme déplanifié
        const unscheduleModification = {
            match_id: matchId,
            original: {
                week: this.currentMatch.semaine,
                time: this.currentMatch.horaire,
                venue: this.currentMatch.gymnase
            },
            new: {
                week: null,  // null indique "non planifié"
                time: null,
                venue: null
            },
            action: 'unschedule'  // Marqueur spécial
        };
        
        // Sauvegarder via DataManager
        if (window.dataManager) {
            window.dataManager.saveModification(unscheduleModification);
        }
        
        // Libérer le créneau dans SlotManager
        if (window.slotManager) {
            window.slotManager.freeSlot(
                this.currentMatch.semaine,
                this.currentMatch.horaire,
                this.currentMatch.gymnase
            );
        }
        
        this.close();
        
        // Rafraîchir l'affichage
        setTimeout(() => {
            if (window.app && typeof window.app.reloadAndRender === 'function') {
                window.app.reloadAndRender();
            }
        }, 300);
        
        this.showNotification(`🗑️ Match déplanifié: ${matchInfo}`);
    }

    /**
     * Close modal
     */
    close() {
        // Add closing animation
        this.modal.classList.add('closing');
        
        // Wait for animation to complete before hiding
        setTimeout(() => {
            this.modal.style.display = 'none';
            this.modal.classList.remove('closing');
            
            // Reset positioning styles
            const modalContent = this.modal.querySelector('.edit-modal-content');
            modalContent.style.marginTop = '';
            modalContent.style.marginLeft = '';
            modalContent.style.marginRight = '';
            
            // No need to restore body overflow since we don't freeze it anymore
            // document.body.style.overflow = '';
            
            this.currentMatch = null;
        }, 200); // Match animation duration
    }

    /**
     * Export modifications as JSON
     */
    exportModifications() {
        const count = Object.keys(this.modifications).length;
        
        if (count === 0) {
            alert('ℹ️ Aucune modification à exporter');
            return;
        }
        
        const data = JSON.stringify(this.modifications, null, 2);
        const blob = new Blob([data], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        const date = new Date().toISOString().split('T')[0];
        a.download = `modifications_${date}.json`;
        a.click();
        
        URL.revokeObjectURL(url);
        
        this.showInstructions(count);
    }

    /**
     * Show instructions after export
     */
    showInstructions(count) {
        const instructions = `
✅ ${count} modification(s) exportée(s) !

📝 Pour appliquer les modifications:

1. Ouvrez un terminal dans le dossier PyCalendar
2. Exécutez:
   python scripts/apply_modifications.py \\
       data_volley/calendrier_volley.xlsx \\
       modifications_${new Date().toISOString().split('T')[0]}.json \\
       configs/config_volley.yaml

3. (Optionnel) Regénérez la visualisation:
   python open_calendar.py data_volley/calendrier_volley.xlsx

Le script validera les contraintes avant d'appliquer les changements.
        `;
        
        alert(instructions);
    }

    /**
     * Discard all modifications
     */
    discardAll() {
        const count = Object.keys(this.modifications).length;
        
        if (count === 0) {
            alert('ℹ️ Aucune modification à annuler');
            return;
        }
        
        if (confirm(`⚠️ Annuler ${count} modification(s) ?`)) {
            // Remove UI indicators
            Object.keys(this.modifications).forEach(matchId => {
                this.updateMatchCardUI(matchId, false);
            });
            
            this.modifications = {};
            this.saveModifications();
            this.showNotification(`🗑️ ${count} modification(s) annulée(s)`);
        }
    }

    /**
     * Update modification counter
     */
    updateModificationCounter() {
        const count = Object.keys(this.modifications).length;
        const counter = document.getElementById('modificationCounter');
        const badge = counter?.querySelector('.badge');
        
        if (counter) {
            if (count > 0) {
                counter.style.display = 'block';
                if (badge) badge.textContent = `${count} modification${count > 1 ? 's' : ''}`;
            } else {
                counter.style.display = 'none';
            }
        }
    }

    /**
     * Show notification
     */
    showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'edit-notification';
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.classList.add('show');
        }, 10);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }

    /**
     * Get modification count
     */
    getModificationCount() {
        return Object.keys(this.modifications).length;
    }

    /**
     * Check if a match is modified
     */
    isMatchModified(matchId) {
        return !!this.modifications[matchId];
    }

    /**
     * Get modification for a match
     */
    getModification(matchId) {
        return this.modifications[matchId];
    }
}

// Initialize edit modal when DOM is ready
let editModal;
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        editModal = new EditModal();
        window.editModal = editModal; // Expose globally for drag-and-drop
    });
} else {
    editModal = new EditModal();
    window.editModal = editModal; // Expose globally for drag-and-drop
}

</script>
<script>
/**
 * Conflict Detector - Détection de conflits en temps réel
 * Détecte les violations de contraintes et conflits dans le calendrier
 */

class ConflictDetector {
    constructor() {
        this.conflicts = new Map(); // matchId -> [conflicts]
        this.conflictTypes = {
            DOUBLE_BOOKING: 'double_booking',      // Même gymnase, même horaire (dépasse capacité)
            TEAM_OVERLAP: 'team_overlap',          // Même équipe joue 2 fois en même temps
            REST_TIME: 'rest_time',                // Temps de repos insuffisant entre matchs
            TIME_PREFERENCE: 'time_preference',    // Match avant horaires préférés des équipes
            VENUE_CONSTRAINT: 'venue_constraint'   // Gymnase interdit pour cette équipe
        };
        
        this.minRestMinutes = 90; // Temps minimum entre 2 matchs de la même équipe
        
        // Capacités des gymnases (nombre de terrains)
        this.venueCapacities = {
            'DESCARTES': 1,
            'ECL': 1,
            'ESA': 1,
            'LYON 2 HC': 3,
            'LAENNEC': 3,
            'BESSON': 3,
            'L. J. HAUT': 1
        };
    }
    
    /**
     * Met à jour les capacités des gymnases depuis les données
     */
    setVenueCapacities(capacities) {
        this.venueCapacities = capacities;
    }

    /**
     * Détecte tous les conflits dans un ensemble de matchs
     * @param {Array} matches - Liste des matchs
     * @returns {Map} - Map de matchId -> array de conflits
     */
    detectAllConflicts(matches) {
        console.log('🔍 Détection des conflits pour', matches.length, 'matchs...');
        this.conflicts.clear();
        
        // Index pour accès rapide
        const byWeekTimeVenue = this.indexMatches(matches);
        const byTeam = this.indexByTeam(matches);
        
        matches.forEach(match => {
            const matchConflicts = [];
            
            // 1. Détection double booking (dépasse capacité du gymnase)
            const doubleBooking = this.checkDoubleBooking(match, byWeekTimeVenue);
            if (doubleBooking.length > 0) {
                matchConflicts.push(...doubleBooking);
            }
            
            // 2. Détection équipe joue 2 fois en même temps
            const teamOverlap = this.checkTeamOverlap(match, byTeam);
            if (teamOverlap.length > 0) {
                matchConflicts.push(...teamOverlap);
            }
            
            // 3. Détection temps de repos insuffisant
            const restTime = this.checkRestTime(match, byTeam);
            if (restTime.length > 0) {
                matchConflicts.push(...restTime);
            }
            
            // 4. Détection violation des préférences horaires
            const timePreference = this.checkTimePreference(match);
            if (timePreference.length > 0) {
                matchConflicts.push(...timePreference);
            }
            
            if (matchConflicts.length > 0) {
                this.conflicts.set(match.match_id, matchConflicts);
            }
        });
        
        console.log('✅ Détection terminée:', this.conflicts.size, 'matchs avec conflits');
        return this.conflicts;
    }

    /**
     * Index les matchs par semaine/horaire/gymnase pour recherche rapide
     */
    indexMatches(matches) {
        const index = new Map();
        matches.forEach(match => {
            const key = `${match.semaine}_${match.horaire}_${match.gymnase}`;
            if (!index.has(key)) {
                index.set(key, []);
            }
            index.get(key).push(match);
        });
        return index;
    }

    /**
     * Index les matchs par équipe (avec genre)
     */
    indexByTeam(matches) {
        const index = new Map();
        matches.forEach(match => {
            const teams = this.extractTeamsWithGender(match);
            teams.forEach(team => {
                if (!index.has(team)) {
                    index.set(team, []);
                }
                index.get(team).push(match);
            });
        });
        return index;
    }

    /**
     * Extrait les noms d'équipes d'un match (sans genre, pour affichage)
     */
    extractTeams(match) {
        // Utiliser equipe1 et equipe2 si disponibles
        if (match.equipe1 && match.equipe2) {
            return [match.equipe1, match.equipe2];
        }
        
        if (match.equipes) {
            return match.equipes.split(' vs ').map(t => t.trim());
        }
        if (match.match_id) {
            // Format: "EQUIPE1_vs_EQUIPE2" ou "EQUIPE1|GENRE__EQUIPE2|GENRE__POULE"
            if (match.match_id.includes('__')) {
                const parts = match.match_id.split('__');
                if (parts.length >= 2) {
                    const team1 = parts[0].split('|')[0];
                    const team2 = parts[1].split('|')[0];
                    return [team1, team2];
                }
            }
            const parts = match.match_id.split('_vs_');
            if (parts.length === 2) {
                return parts.map(t => t.trim());
            }
        }
        return [];
    }

    /**
     * Extrait les équipes AVEC genre (pour détection de conflits)
     * Format retourné: "NOM_EQUIPE|GENRE" (ex: "INSA (1)|F", "LYON 1 (3)|M")
     */
    extractTeamsWithGender(match) {
        const teams = [];
        
        // Méthode 1: equipe1_nom/equipe2_nom + equipe1_genre/equipe2_genre (format actuel)
        if (match.equipe1_nom && match.equipe1_genre) {
            teams.push(`${match.equipe1_nom}|${match.equipe1_genre}`);
        }
        if (match.equipe2_nom && match.equipe2_genre) {
            teams.push(`${match.equipe2_nom}|${match.equipe2_genre}`);
        }
        
        if (teams.length === 2) {
            return teams;
        }
        
        // Méthode 2: equipe1/equipe2 + genre1/genre2 (ancien format)
        if (match.equipe1 && match.equipe1_genre) {
            teams.push(`${match.equipe1}|${match.equipe1_genre}`);
        }
        if (match.equipe2 && match.equipe2_genre) {
            teams.push(`${match.equipe2}|${match.equipe2_genre}`);
        }
        
        if (teams.length === 2) {
            return teams;
        }
        
        // Méthode 3: match_id avec format "EQUIPE|GENRE__EQUIPE|GENRE__POULE"
        if (match.match_id && match.match_id.includes('__')) {
            const parts = match.match_id.split('__');
            if (parts.length >= 2) {
                const team1Parts = parts[0].split('|');
                const team2Parts = parts[1].split('|');
                
                if (team1Parts.length >= 2 && team2Parts.length >= 2) {
                    return [
                        `${team1Parts[0]}|${team1Parts[1]}`,
                        `${team2Parts[0]}|${team2Parts[1]}`
                    ];
                }
            }
        }
        
        // Fallback: utiliser extractTeams() sans genre (comportement ancien)
        // ATTENTION: Cela peut créer des faux positifs si on ne peut pas déterminer le genre
        return this.extractTeams(match).map(team => `${team}|UNKNOWN`);
    }

    /**
     * Vérifie les doubles réservations (dépasse la capacité du gymnase)
     */
    checkDoubleBooking(match, byWeekTimeVenue) {
        const key = `${match.semaine}_${match.horaire}_${match.gymnase}`;
        const sameSlot = byWeekTimeVenue.get(key) || [];
        
        // Capacité du gymnase (par défaut 1 terrain)
        const capacity = this.venueCapacities[match.gymnase] || 1;
        
        const conflicts = [];
        
        // Seulement signaler si le nombre de matchs dépasse la capacité
        if (sameSlot.length > capacity) {
            sameSlot.forEach(other => {
                if (other.match_id !== match.match_id) {
                    conflicts.push({
                        type: this.conflictTypes.DOUBLE_BOOKING,
                        severity: 'critical',
                        message: `Surcharge: ${match.gymnase} (${sameSlot.length} matchs, capacité ${capacity})`,
                        conflictingMatch: other.match_id,
                        details: {
                            venue: match.gymnase,
                            time: match.horaire,
                            week: match.semaine,
                            matchCount: sameSlot.length,
                            capacity: capacity
                        }
                    });
                }
            });
        }
        
        return conflicts;
    }

    /**
     * Vérifie si une équipe joue 2 fois en même temps
     */
    checkTeamOverlap(match, byTeam) {
        const teams = this.extractTeamsWithGender(match);
        const conflicts = [];
        
        teams.forEach(teamWithGender => {
            const teamMatches = byTeam.get(teamWithGender) || [];
            teamMatches.forEach(other => {
                if (other.match_id !== match.match_id && 
                    other.semaine === match.semaine && 
                    other.horaire === match.horaire) {
                    
                    // Extraire le nom sans le genre pour l'affichage
                    const teamName = teamWithGender.split('|')[0];
                    const genre = teamWithGender.split('|')[1];
                    
                    conflicts.push({
                        type: this.conflictTypes.TEAM_OVERLAP,
                        severity: 'critical',
                        message: `${teamName} (${genre}) joue 2 fois en même temps`,
                        conflictingMatch: other.match_id,
                        details: {
                            team: teamName,
                            gender: genre,
                            teamWithGender: teamWithGender,
                            time: match.horaire,
                            week: match.semaine,
                            venues: [match.gymnase, other.gymnase]
                        }
                    });
                }
            });
        });
        
        return conflicts;
    }

    /**
     * Vérifie le temps de repos entre matchs d'une équipe
     */
    checkRestTime(match, byTeam) {
        const teams = this.extractTeamsWithGender(match);
        const conflicts = [];

        // Parcourir chaque équipe concernée par le match
        teams.forEach(teamWithGender => {
            const teamMatches = byTeam.get(teamWithGender) || [];

            teamMatches.forEach(other => {
                // Ignorer le même match et ne comparer que les matchs de la même semaine
                if (other.match_id === match.match_id || other.semaine !== match.semaine) {
                    return;
                }

                // Les deux matchs doivent avoir un horaire valide
                if (!match.horaire || !other.horaire) {
                    return;
                }

                const timeDiff = this.calculateTimeDifference(match.horaire, other.horaire);
                if (timeDiff === null) {
                    return;
                }

                if (timeDiff > 0 && timeDiff < this.minRestMinutes) {
                    // Extraire le nom sans le genre pour l'affichage
                    const teamName = teamWithGender.split('|')[0];
                    const genre = teamWithGender.split('|')[1] || 'UNKNOWN';

                    conflicts.push({
                        type: this.conflictTypes.REST_TIME,
                        severity: 'warning',
                        message: `${teamName} (${genre}): seulement ${timeDiff}min entre 2 matchs (min ${this.minRestMinutes}min)`,
                        conflictingMatch: other.match_id,
                        details: {
                            team: teamName,
                            gender: genre,
                            teamWithGender: teamWithGender,
                            restMinutes: timeDiff,
                            requiredMinutes: this.minRestMinutes,
                            match1Time: match.horaire,
                            match2Time: other.horaire
                        }
                    });
                }
            });
        });

        return conflicts;
    }

    /**
     * Vérifie les violations de préférences horaires
     */
    checkTimePreference(match) {
        const conflicts = [];
        
        // Ne traiter que les matchs planifiés avec un horaire
        if (!match.horaire) {
            return conflicts;
        }
        
        // Vérifier si le match a des préférences horaires
        if (!match.equipe1_horaires_preferes && !match.equipe2_horaires_preferes) {
            return conflicts;
        }
        
        const matchTime = this.timeToMinutes(match.horaire);
        
        // Vérifier équipe 1
        let team1Violated = false;
        if (match.equipe1_horaires_preferes && match.equipe1_horaires_preferes.length > 0) {
            const validPreferredTimes = match.equipe1_horaires_preferes.filter(t => t && typeof t === 'string');
            if (validPreferredTimes.length > 0) {
                const preferredTimes = validPreferredTimes.map(t => this.timeToMinutes(t)).filter(t => t !== null);
                if (preferredTimes.length > 0) {
                    const minPreferred = Math.min(...preferredTimes);
                    
                    if (matchTime !== null && matchTime < minPreferred) {
                        team1Violated = true;
                    }
                }
            }
        }
        
        // Vérifier équipe 2
        let team2Violated = false;
        if (match.equipe2_horaires_preferes && match.equipe2_horaires_preferes.length > 0) {
            const validPreferredTimes = match.equipe2_horaires_preferes.filter(t => t && typeof t === 'string');
            if (validPreferredTimes.length > 0) {
                const preferredTimes = validPreferredTimes.map(t => this.timeToMinutes(t)).filter(t => t !== null);
                if (preferredTimes.length > 0) {
                    const minPreferred = Math.min(...preferredTimes);
                    
                    if (matchTime !== null && matchTime < minPreferred) {
                        team2Violated = true;
                    }
                }
            }
        }
        
        // Créer le conflit selon la gravité
        if (team1Violated && team2Violated) {
            conflicts.push({
                type: this.conflictTypes.TIME_PREFERENCE,
                severity: 'critical',
                message: `Match à ${match.horaire} avant les horaires préférés des 2 équipes`,
                details: {
                    matchTime: match.horaire,
                    team1Preferences: match.equipe1_horaires_preferes,
                    team2Preferences: match.equipe2_horaires_preferes,
                    bothTeamsViolated: true
                }
            });
        } else if (team1Violated || team2Violated) {
            const violatedTeam = team1Violated ? match.equipe1 : match.equipe2;
            const preferences = team1Violated ? match.equipe1_horaires_preferes : match.equipe2_horaires_preferes;
            
            conflicts.push({
                type: this.conflictTypes.TIME_PREFERENCE,
                severity: 'warning',
                message: `${violatedTeam}: match à ${match.horaire} avant horaires préférés (${preferences.join(', ')})`,
                details: {
                    matchTime: match.horaire,
                    violatedTeam: violatedTeam,
                    preferences: preferences
                }
            });
        }
        
        return conflicts;
    }

    /**
     * Convertit un horaire en minutes depuis minuit
     */
    timeToMinutes(time) {
        if (!time || typeof time !== 'string') {
            return null;
        }
        const [hours, minutes] = time.split(':').map(Number);
        return hours * 60 + minutes;
    }

    /**
     * Calcule la différence en minutes entre deux horaires
     */
    calculateTimeDifference(time1, time2) {
        if (!time1 || !time2 || typeof time1 !== 'string' || typeof time2 !== 'string') {
            return null;
        }
        const [h1, m1] = time1.split(':').map(Number);
        const [h2, m2] = time2.split(':').map(Number);
        const minutes1 = h1 * 60 + m1;
        const minutes2 = h2 * 60 + m2;
        return Math.abs(minutes1 - minutes2);
    }

    /**
     * Récupère les conflits pour un match spécifique
     */
    getConflictsForMatch(matchId) {
        return this.conflicts.get(matchId) || [];
    }

    /**
     * Récupère tous les matchs en conflit
     */
    getAllConflictingMatches() {
        return Array.from(this.conflicts.keys());
    }

    /**
     * Compte les conflits par sévérité
     */
    getConflictStats() {
        const stats = {
            critical: 0,
            warning: 0,
            total: 0
        };
        
        this.conflicts.forEach(conflictArray => {
            conflictArray.forEach(conflict => {
                stats.total++;
                if (conflict.severity === 'critical') {
                    stats.critical++;
                } else if (conflict.severity === 'warning') {
                    stats.warning++;
                }
            });
        });
        
        return stats;
    }

    /**
     * Génère un résumé des conflits pour l'UI
     */
    getConflictSummary() {
        const summary = {
            totalMatches: this.conflicts.size,
            byType: {},
            bySeverity: { critical: 0, warning: 0 },
            details: []
        };
        
        this.conflicts.forEach((conflictArray, matchId) => {
            conflictArray.forEach(conflict => {
                // Compte par type
                if (!summary.byType[conflict.type]) {
                    summary.byType[conflict.type] = 0;
                }
                summary.byType[conflict.type]++;
                
                // Compte par sévérité
                summary.bySeverity[conflict.severity]++;
                
                // Ajoute les détails
                summary.details.push({
                    matchId,
                    ...conflict
                });
            });
        });
        
        return summary;
    }

    /**
     * Vérifie si un match a des conflits critiques
     */
    hasCriticalConflicts(matchId) {
        const conflicts = this.getConflictsForMatch(matchId);
        return conflicts.some(c => c.severity === 'critical');
    }

    /**
     * Vérifie si un match a des avertissements
     */
    hasWarnings(matchId) {
        const conflicts = this.getConflictsForMatch(matchId);
        return conflicts.some(c => c.severity === 'warning');
    }
}

</script>
<script>
/**
 * Auto-Resolver - Résolution automatique des conflits
 * Suggère des échanges intelligents pour résoudre les conflits
 */

class AutoResolver {
    constructor(conflictDetector) {
        this.conflictDetector = conflictDetector;
        this.suggestions = [];
    }

    /**
     * Génère des suggestions pour résoudre tous les conflits
     * @param {Array} matches - Liste de tous les matchs
     * @param {Array} availableSlots - Créneaux disponibles
     * @returns {Array} - Liste de suggestions
     */
    generateSuggestions(matches, availableSlots = []) {
        console.log('🤖 Génération de suggestions de résolution...');
        this.suggestions = [];
        
        const conflicts = this.conflictDetector.getConflictSummary();
        console.log('📊 Conflits à résoudre:', conflicts);
        
        // Traiter d'abord les conflits critiques
        const criticalConflicts = conflicts.details.filter(c => c.severity === 'critical');
        
        criticalConflicts.forEach(conflict => {
            const suggestions = this.resolveSingleConflict(conflict, matches, availableSlots);
            if (suggestions.length > 0) {
                this.suggestions.push(...suggestions);
            }
        });
        
        // Dédupliquer et trier par score
        this.suggestions = this.deduplicateAndScore(this.suggestions);
        
        console.log('✅', this.suggestions.length, 'suggestions générées');
        return this.suggestions;
    }

    /**
     * Résout un conflit spécifique
     */
    resolveSingleConflict(conflict, matches, availableSlots) {
        switch (conflict.type) {
            case 'double_booking':
                return this.resolveDoubleBooking(conflict, matches, availableSlots);
            case 'team_overlap':
                return this.resolveTeamOverlap(conflict, matches, availableSlots);
            case 'rest_time':
                return this.resolveRestTime(conflict, matches, availableSlots);
            default:
                return [];
        }
    }

    /**
     * Résout un conflit de double réservation
     */
    resolveDoubleBooking(conflict, matches, availableSlots) {
        const suggestions = [];
        const match = matches.find(m => m.match_id === conflict.matchId);
        const conflictingMatch = matches.find(m => m.match_id === conflict.conflictingMatch);
        
        if (!match || !conflictingMatch) return [];
        
        // Option 1: Déplacer le match vers un créneau disponible
        const freeSlots = this.findFreeSlotsForMatch(match, availableSlots, matches);
        freeSlots.slice(0, 3).forEach(slot => { // Top 3 créneaux
            suggestions.push({
                type: 'move',
                priority: this.calculatePriority(match, slot),
                description: `Déplacer ${this.formatMatch(match)} vers ${slot.gymnase} à ${slot.horaire}`,
                action: {
                    type: 'move',
                    matchId: match.match_id,
                    from: {
                        week: match.semaine,
                        time: match.horaire,
                        venue: match.gymnase
                    },
                    to: {
                        week: slot.semaine,
                        time: slot.horaire,
                        venue: slot.gymnase
                    }
                },
                impact: {
                    resolves: [conflict.matchId],
                    creates: [] // Vérifier plus tard
                }
            });
        });
        
        // Option 2: Échanger avec un autre match
        const swapCandidates = this.findSwapCandidates(match, conflictingMatch, matches);
        swapCandidates.slice(0, 2).forEach(candidate => {
            suggestions.push({
                type: 'swap',
                priority: candidate.score,
                description: `Échanger ${this.formatMatch(match)} avec ${this.formatMatch(candidate.match)}`,
                action: {
                    type: 'swap',
                    match1: match.match_id,
                    match2: candidate.match.match_id,
                    slots: [
                        { week: match.semaine, time: match.horaire, venue: match.gymnase },
                        { week: candidate.match.semaine, time: candidate.match.horaire, venue: candidate.match.gymnase }
                    ]
                },
                impact: {
                    resolves: [conflict.matchId, conflict.conflictingMatch],
                    creates: []
                }
            });
        });
        
        return suggestions;
    }

    /**
     * Résout un conflit d'équipe jouant 2 fois en même temps
     */
    resolveTeamOverlap(conflict, matches, availableSlots) {
        const suggestions = [];
        const match = matches.find(m => m.match_id === conflict.matchId);
        
        if (!match) return [];
        
        // Trouver des créneaux différents pour l'un des matchs
        const freeSlots = this.findFreeSlotsForMatch(match, availableSlots, matches);
        freeSlots.slice(0, 3).forEach(slot => {
            if (slot.horaire !== match.horaire) { // Horaire différent
                suggestions.push({
                    type: 'move',
                    priority: this.calculatePriority(match, slot) + 10, // Priorité haute
                    description: `Déplacer ${this.formatMatch(match)} vers ${slot.horaire} (${slot.gymnase})`,
                    action: {
                        type: 'move',
                        matchId: match.match_id,
                        from: {
                            week: match.semaine,
                            time: match.horaire,
                            venue: match.gymnase
                        },
                        to: {
                            week: slot.semaine,
                            time: slot.horaire,
                            venue: slot.gymnase
                        }
                    },
                    impact: {
                        resolves: [conflict.matchId],
                        creates: []
                    }
                });
            }
        });
        
        return suggestions;
    }

    /**
     * Résout un problème de temps de repos
     */
    resolveRestTime(conflict, matches, availableSlots) {
        const suggestions = [];
        const match = matches.find(m => m.match_id === conflict.matchId);
        
        if (!match) return [];
        
        // Trouver des créneaux avec repos suffisant
        const freeSlots = this.findFreeSlotsForMatch(match, availableSlots, matches);
        const minRestMinutes = conflict.details.requiredMinutes;
        
        freeSlots.forEach(slot => {
            const restTime = this.calculateRestTime(match, slot, matches);
            if (restTime >= minRestMinutes) {
                suggestions.push({
                    type: 'move',
                    priority: this.calculatePriority(match, slot),
                    description: `Déplacer ${this.formatMatch(match)} pour ${restTime}min de repos`,
                    action: {
                        type: 'move',
                        matchId: match.match_id,
                        from: {
                            week: match.semaine,
                            time: match.horaire,
                            venue: match.gymnase
                        },
                        to: {
                            week: slot.semaine,
                            time: slot.horaire,
                            venue: slot.gymnase
                        }
                    },
                    impact: {
                        resolves: [conflict.matchId],
                        creates: []
                    }
                });
            }
        });
        
        return suggestions.slice(0, 3);
    }

    /**
     * Trouve les créneaux libres pour un match
     */
    findFreeSlotsForMatch(match, availableSlots, allMatches) {
        const teams = this.extractTeams(match);
        const freeSlots = [];
        
        availableSlots.forEach(slot => {
            // Vérifier que le créneau est vraiment libre
            const isOccupied = allMatches.some(m => 
                m.semaine === slot.semaine && 
                m.horaire === slot.horaire && 
                m.gymnase === slot.gymnase
            );
            
            if (!isOccupied) {
                freeSlots.push({
                    ...slot,
                    score: this.scoreSlot(match, slot)
                });
            }
        });
        
        // Trier par score (meilleur en premier)
        return freeSlots.sort((a, b) => b.score - a.score);
    }

    /**
     * Trouve des candidats pour un échange
     */
    findSwapCandidates(match1, match2, allMatches) {
        const candidates = [];
        
        allMatches.forEach(candidate => {
            if (candidate.match_id !== match1.match_id && 
                candidate.match_id !== match2.match_id) {
                const score = this.scoreSwap(match1, candidate);
                if (score > 0) {
                    candidates.push({ match: candidate, score });
                }
            }
        });
        
        return candidates.sort((a, b) => b.score - a.score);
    }

    /**
     * Calcule un score pour un créneau
     */
    scoreSlot(match, slot) {
        let score = 100;
        
        // Même semaine: +50
        if (slot.semaine === match.semaine) score += 50;
        
        // Même jour de semaine: +30
        // (on pourrait extraire le jour si disponible)
        
        // Horaire proche: +20
        const timeDiff = this.calculateTimeDifference(match.horaire, slot.horaire);
        if (timeDiff < 120) score += 20; // Moins de 2h de différence
        
        // Même gymnase: +40
        if (slot.gymnase === match.gymnase) score += 40;
        
        return score;
    }

    /**
     * Calcule un score pour un échange
     */
    scoreSwap(match1, match2) {
        let score = 50;
        
        // Même semaine: +30
        if (match1.semaine === match2.semaine) score += 30;
        
        // Pas d'équipes communes: +40
        const teams1 = this.extractTeams(match1);
        const teams2 = this.extractTeams(match2);
        const hasCommonTeam = teams1.some(t => teams2.includes(t));
        if (!hasCommonTeam) score += 40;
        
        return score;
    }

    /**
     * Calcule la priorité d'une suggestion
     */
    calculatePriority(match, slot) {
        return this.scoreSlot(match, slot);
    }

    /**
     * Calcule le temps de repos si on déplace un match
     */
    calculateRestTime(match, slot, allMatches) {
        const teams = this.extractTeams(match);
        let minRest = Infinity;
        
        teams.forEach(team => {
            const teamMatches = allMatches.filter(m => {
                const mTeams = this.extractTeams(m);
                return m.match_id !== match.match_id && mTeams.includes(team);
            });
            
            teamMatches.forEach(m => {
                if (m.semaine === slot.semaine) {
                    const rest = this.calculateTimeDifference(m.horaire, slot.horaire);
                    minRest = Math.min(minRest, rest);
                }
            });
        });
        
        return minRest === Infinity ? 999 : minRest;
    }

    /**
     * Déduplique et score les suggestions
     */
    deduplicateAndScore(suggestions) {
        const seen = new Set();
        const unique = [];
        
        suggestions.forEach(sug => {
            const key = JSON.stringify(sug.action);
            if (!seen.has(key)) {
                seen.add(key);
                unique.push(sug);
            }
        });
        
        return unique.sort((a, b) => b.priority - a.priority);
    }

    /**
     * Extrait les équipes d'un match (avec genre si disponible)
     */
    extractTeams(match) {
        return this.conflictDetector.extractTeamsWithGender(match);
    }

    /**
     * Calcule la différence de temps
     */
    calculateTimeDifference(time1, time2) {
        return this.conflictDetector.calculateTimeDifference(time1, time2);
    }

    /**
     * Formate un match pour l'affichage
     */
    formatMatch(match) {
        const teams = this.conflictDetector.extractTeams(match); // Sans genre pour affichage
        return teams.length > 0 ? teams.join(' vs ') : match.match_id;
    }

    /**
     * Applique une suggestion
     */
    applySuggestion(suggestion, matches) {
        const { action } = suggestion;
        
        if (action.type === 'move') {
            const match = matches.find(m => m.match_id === action.matchId);
            if (match) {
                match.semaine = action.to.week;
                match.horaire = action.to.time;
                match.gymnase = action.to.venue;
                console.log('✅ Match déplacé:', action.matchId);
                return true;
            }
        } else if (action.type === 'swap') {
            const match1 = matches.find(m => m.match_id === action.match1);
            const match2 = matches.find(m => m.match_id === action.match2);
            
            if (match1 && match2) {
                // Échanger les créneaux
                const temp = {
                    semaine: match1.semaine,
                    horaire: match1.horaire,
                    gymnase: match1.gymnase
                };
                
                match1.semaine = match2.semaine;
                match1.horaire = match2.horaire;
                match1.gymnase = match2.gymnase;
                
                match2.semaine = temp.semaine;
                match2.horaire = temp.horaire;
                match2.gymnase = temp.gymnase;
                
                console.log('✅ Matchs échangés:', action.match1, '<->', action.match2);
                return true;
            }
        }
        
        return false;
    }

    /**
     * Récupère les meilleures suggestions
     */
    getTopSuggestions(count = 5) {
        return this.suggestions.slice(0, count);
    }
}

</script>
<script>
/**
 * History Manager - Gestion de l'historique avec undo/redo
 * Système de pile pour annuler/refaire les modifications
 */

class HistoryManager {
    constructor(maxHistorySize = 50) {
        this.undoStack = [];
        this.redoStack = [];
        this.maxHistorySize = maxHistorySize;
        this.listeners = new Set();
        
        // Charger l'historique depuis localStorage
        this.loadFromStorage();
        
        // Écouter les raccourcis clavier
        this.setupKeyboardShortcuts();
    }

    /**
     * Enregistre une action dans l'historique
     * @param {Object} action - { type, data, timestamp, description }
     */
    pushAction(action) {
        const historyEntry = {
            ...action,
            timestamp: action.timestamp || new Date().toISOString(),
            id: this.generateId()
        };
        
        // Ajouter à la pile d'undo
        this.undoStack.push(historyEntry);
        
        // Vider la pile de redo (nouvelle branche d'historique)
        this.redoStack = [];
        
        // Limiter la taille de l'historique
        if (this.undoStack.length > this.maxHistorySize) {
            this.undoStack.shift();
        }
        
        // Sauvegarder dans localStorage
        this.saveToStorage();
        
        // Notifier les listeners
        this.notifyListeners();
        
        console.log('📝 Action enregistrée:', historyEntry.description || historyEntry.type);
    }

    /**
     * Annule la dernière action
     * @returns {Object|null} - Action annulée ou null
     */
    undo() {
        if (this.undoStack.length === 0) {
            console.log('⚠️ Rien à annuler');
            return null;
        }
        
        const action = this.undoStack.pop();
        this.redoStack.push(action);
        
        this.saveToStorage();
        this.notifyListeners();
        
        console.log('↶ Undo:', action.description || action.type);
        return action;
    }

    /**
     * Refait la dernière action annulée
     * @returns {Object|null} - Action refaite ou null
     */
    redo() {
        if (this.redoStack.length === 0) {
            console.log('⚠️ Rien à refaire');
            return null;
        }
        
        const action = this.redoStack.pop();
        this.undoStack.push(action);
        
        this.saveToStorage();
        this.notifyListeners();
        
        console.log('↷ Redo:', action.description || action.type);
        return action;
    }

    /**
     * Récupère l'historique complet
     */
    getHistory() {
        return {
            undo: [...this.undoStack],
            redo: [...this.redoStack],
            canUndo: this.canUndo(),
            canRedo: this.canRedo()
        };
    }

    /**
     * Vérifie si on peut annuler
     */
    canUndo() {
        return this.undoStack.length > 0;
    }

    /**
     * Vérifie si on peut refaire
     */
    canRedo() {
        return this.redoStack.length > 0;
    }

    /**
     * Efface tout l'historique
     */
    clear() {
        this.undoStack = [];
        this.redoStack = [];
        this.saveToStorage();
        this.notifyListeners();
        console.log('🗑️ Historique effacé');
    }

    /**
     * Sauvegarde l'historique dans localStorage
     */
    saveToStorage() {
        try {
            const data = {
                undo: this.undoStack,
                redo: this.redoStack,
                savedAt: new Date().toISOString()
            };
            localStorage.setItem('calendarHistory', JSON.stringify(data));
        } catch (error) {
            console.error('❌ Erreur sauvegarde historique:', error);
        }
    }

    /**
     * Charge l'historique depuis localStorage
     */
    loadFromStorage() {
        try {
            const stored = localStorage.getItem('calendarHistory');
            if (stored) {
                const data = JSON.parse(stored);
                this.undoStack = data.undo || [];
                this.redoStack = data.redo || [];
                console.log('📂 Historique chargé:', this.undoStack.length, 'actions');
            }
        } catch (error) {
            console.error('❌ Erreur chargement historique:', error);
            this.undoStack = [];
            this.redoStack = [];
        }
    }

    /**
     * Ajoute un listener pour les changements d'historique
     */
    addListener(callback) {
        this.listeners.add(callback);
    }

    /**
     * Retire un listener
     */
    removeListener(callback) {
        this.listeners.delete(callback);
    }

    /**
     * Notifie tous les listeners
     */
    notifyListeners() {
        const state = {
            canUndo: this.canUndo(),
            canRedo: this.canRedo(),
            undoCount: this.undoStack.length,
            redoCount: this.redoStack.length
        };
        
        this.listeners.forEach(callback => {
            try {
                callback(state);
            } catch (error) {
                console.error('❌ Erreur listener historique:', error);
            }
        });
    }

    /**
     * Configure les raccourcis clavier
     */
    setupKeyboardShortcuts() {
        document.addEventListener('keydown', (e) => {
            // Ctrl+Z ou Cmd+Z : Undo
            if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {
                e.preventDefault();
                const action = this.undo();
                if (action && window.historyPanel) {
                    window.historyPanel.handleUndo(action);
                }
            }
            
            // Ctrl+Shift+Z ou Cmd+Shift+Z ou Ctrl+Y : Redo
            if (((e.ctrlKey || e.metaKey) && e.key === 'z' && e.shiftKey) || 
                ((e.ctrlKey || e.metaKey) && e.key === 'y')) {
                e.preventDefault();
                const action = this.redo();
                if (action && window.historyPanel) {
                    window.historyPanel.handleRedo(action);
                }
            }
        });
        
        console.log('⌨️ Raccourcis historique activés (Ctrl+Z / Ctrl+Shift+Z)');
    }

    /**
     * Génère un ID unique
     */
    generateId() {
        return `action_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }

    /**
     * Formate une action pour l'affichage
     */
    formatAction(action) {
        const date = new Date(action.timestamp);
        const timeStr = date.toLocaleTimeString('fr-FR', { 
            hour: '2-digit', 
            minute: '2-digit' 
        });
        
        return {
            id: action.id,
            time: timeStr,
            description: action.description || action.type,
            type: action.type,
            data: action.data
        };
    }

    /**
     * Récupère les N dernières actions
     */
    getRecentActions(count = 10) {
        return this.undoStack
            .slice(-count)
            .reverse()
            .map(action => this.formatAction(action));
    }

    /**
     * Recherche dans l'historique
     */
    searchHistory(query) {
        const lowerQuery = query.toLowerCase();
        return this.undoStack
            .filter(action => {
                const desc = (action.description || action.type).toLowerCase();
                return desc.includes(lowerQuery);
            })
            .map(action => this.formatAction(action));
    }

    /**
     * Revenir à un point spécifique de l'historique
     */
    revertToAction(actionId) {
        const index = this.undoStack.findIndex(a => a.id === actionId);
        if (index === -1) {
            console.error('❌ Action non trouvée:', actionId);
            return null;
        }
        
        // Annuler toutes les actions jusqu'à celle-ci
        const actionsToUndo = [];
        while (this.undoStack.length > index + 1) {
            actionsToUndo.push(this.undo());
        }
        
        console.log('↶ Retour à:', this.undoStack[index].description);
        return actionsToUndo;
    }

    /**
     * Exporte l'historique au format JSON
     */
    exportHistory() {
        return JSON.stringify({
            undo: this.undoStack,
            redo: this.redoStack,
            exportedAt: new Date().toISOString()
        }, null, 2);
    }

    /**
     * Importe un historique depuis JSON
     */
    importHistory(jsonData) {
        try {
            const data = JSON.parse(jsonData);
            this.undoStack = data.undo || [];
            this.redoStack = data.redo || [];
            this.saveToStorage();
            this.notifyListeners();
            console.log('✅ Historique importé:', this.undoStack.length, 'actions');
            return true;
        } catch (error) {
            console.error('❌ Erreur import historique:', error);
            return false;
        }
    }
}

</script>
<script>
/**
 * Conflict Panel UI - Interface utilisateur pour les conflits
 */

class ConflictPanel {
    constructor(conflictDetector) {
        this.conflictDetector = conflictDetector;
        this.panel = null;
        this.isVisible = false;
        this.createPanel();
    }

    /**
     * Crée le panel HTML
     */
    createPanel() {
        this.panel = document.createElement('div');
        this.panel.className = 'conflict-panel';
        this.panel.innerHTML = `
            <div class="conflict-panel-header">
                <div class="conflict-panel-title">
                    <span>⚠️</span>
                    <span>Conflits Détectés</span>
                </div>
                <button class="conflict-panel-close" onclick="window.conflictPanel.hide()">×</button>
            </div>
            <div class="conflict-panel-body">
                <div class="conflict-list"></div>
            </div>
        `;
        document.body.appendChild(this.panel);
    }

    /**
     * Met à jour l'affichage des conflits
     */
    update(matches) {
        const conflicts = this.conflictDetector.detectAllConflicts(matches);
        const summary = this.conflictDetector.getConflictSummary();
        
        // Mettre à jour le header avec les stats
        const header = this.panel.querySelector('.conflict-panel-title');
        header.innerHTML = `
            <span>⚠️</span>
            <span>Conflits Détectés</span>
            <div class="conflict-stats">
                <span class="conflict-stat critical">${summary.bySeverity.critical} critiques</span>
                <span class="conflict-stat warning">${summary.bySeverity.warning} avertissements</span>
            </div>
        `;
        
        // Remplir la liste
        const list = this.panel.querySelector('.conflict-list');
        
        if (summary.details.length === 0) {
            list.innerHTML = `
                <div style="text-align: center; padding: 40px; color: var(--gray);">
                    <div style="font-size: 48px; margin-bottom: 16px;">✅</div>
                    <div>Aucun conflit détecté</div>
                </div>
            `;
            return;
        }
        
        list.innerHTML = summary.details.map(conflict => `
            <div class="conflict-item ${conflict.severity}" 
                 onclick="window.conflictPanel.jumpToMatch('${conflict.matchId}')">
                <div class="conflict-item-header">
                    <div class="conflict-item-type">${this.getConflictTypeLabel(conflict.type)}</div>
                    <div class="conflict-item-severity ${conflict.severity}">${conflict.severity}</div>
                </div>
                <div class="conflict-item-message">${conflict.message}</div>
            </div>
        `).join('');
    }

    /**
     * Libellé du type de conflit
     */
    getConflictTypeLabel(type) {
        const labels = {
            'double_booking': '📍 Surcharge Gymnase',
            'team_overlap': '👥 Équipe x2',
            'rest_time': '⏱️ Repos Insuffisant',
            'time_preference': '🕐 Horaire Non Préféré',
            'venue_constraint': '🏟️ Contrainte Gymnase'
        };
        return labels[type] || type;
    }

    /**
     * Saute vers un match en conflit
     */
    jumpToMatch(matchId) {
        const card = document.querySelector(`[data-match-id="${matchId}"]`);
        if (card) {
            card.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Highlight temporaire
            card.style.animation = 'none';
            setTimeout(() => {
                card.style.animation = 'highlight-flash 1s ease-in-out';
            }, 10);
        }
    }

    /**
     * Affiche le panel
     */
    show() {
        this.panel.classList.add('show');
        this.isVisible = true;
    }

    /**
     * Cache le panel
     */
    hide() {
        this.panel.classList.remove('show');
        this.isVisible = false;
    }

    /**
     * Toggle le panel
     */
    toggle() {
        if (this.isVisible) {
            this.hide();
        } else {
            this.show();
        }
    }

    /**
     * Ajoute des badges de conflit aux cartes de match
     * IMPORTANT: N'affecte pas le layout (position absolute)
     */
    addConflictBadges(matches) {
        // D'ABORD: Nettoyer tous les badges et informations de conflit existants
        document.querySelectorAll('.conflict-badge').forEach(badge => badge.remove());
        document.querySelectorAll('.conflict-info').forEach(info => info.remove());
        document.querySelectorAll('.has-conflict-critical, .has-conflict-warning').forEach(card => {
            card.classList.remove('has-conflict-critical', 'has-conflict-warning');
        });
        
        // ENSUITE: Ajouter les nouveaux badges et informations
        matches.forEach(match => {
            const card = document.querySelector(`[data-match-id="${match.match_id}"]`);
            if (!card) return;
            
            const conflicts = this.conflictDetector.getConflictsForMatch(match.match_id);
            
            if (conflicts.length > 0) {
                const hasCritical = conflicts.some(c => c.severity === 'critical');
                const severity = hasCritical ? 'critical' : 'warning';
                
                // Ajouter bordure colorée
                card.classList.add(`has-conflict-${severity}`);
                
                // Créer et ajouter le badge (avec position absolute pour ne pas affecter le layout)
                const badge = document.createElement('div');
                badge.className = `conflict-badge ${severity}`;
                badge.textContent = conflicts.length;
                
                // S'assurer que la carte est positioned pour que le badge soit positionné correctement
                const cardPosition = window.getComputedStyle(card).position;
                if (cardPosition === 'static') {
                    card.style.position = 'relative';
                }
                
                // Insérer au début pour éviter de changer l'ordre des éléments visibles
                card.insertBefore(badge, card.firstChild);
                
                // Ajouter les informations de conflit directement dans la carte (plus visible)
                this.addConflictInfo(card, conflicts);
            }
        });
    }

    addConflictInfo(card, conflicts) {
        // Créer un conteneur pour les informations de conflit
        const conflictInfo = document.createElement('div');
        conflictInfo.className = 'conflict-info';
        
        // Trier par sévérité (critical d'abord)
        const sortedConflicts = [...conflicts].sort((a, b) => {
            if (a.severity === 'critical' && b.severity !== 'critical') return -1;
            if (a.severity !== 'critical' && b.severity === 'critical') return 1;
            return 0;
        });
        
        const conflictTypeLabels = {
            'double_booking': '🏟️ Surcharge de gymnase',
            'team_overlap': '👥 Équipe joue 2 fois simultanément',
            'rest_time': '⏰ Temps de repos insuffisant',
            'time_preference': '🕐 Horaire avant préférences',
            'venue_constraint': '🏢 Gymnase interdit'
        };
        
        // Créer le contenu des conflits
        const conflictsHtml = sortedConflicts.map(c => `
            <div class="conflict-info-item ${c.severity}">
                <div class="conflict-info-type">${conflictTypeLabels[c.type] || c.type}</div>
                <div class="conflict-info-message">${c.message}</div>
            </div>
        `).join('');
        
        conflictInfo.innerHTML = `
            <div class="conflict-info-header">
                <span class="conflict-info-icon">${conflicts.some(c => c.severity === 'critical') ? '🔴' : '⚠️'}</span>
                <strong>${conflicts.length} conflit${conflicts.length > 1 ? 's' : ''}</strong>
            </div>
            <div class="conflict-info-list">
                ${conflictsHtml}
            </div>
        `;
        
        // Ajouter à la carte du match
        card.appendChild(conflictInfo);
    }
}

/**
 * History Panel UI - Interface pour l'historique
 */

class HistoryPanel {
    constructor(historyManager) {
        this.historyManager = historyManager;
        this.panel = null;
        this.isVisible = false;
        this.createPanel();
        
        // Écouter les changements d'historique
        this.historyManager.addListener((state) => this.updateButtons(state));
    }

    /**
     * Crée le panel HTML
     */
    createPanel() {
        this.panel = document.createElement('div');
        this.panel.className = 'history-panel';
        this.panel.innerHTML = `
            <div class="history-panel-header">
                <div class="history-panel-title">
                    <span>📜</span>
                    <span>Historique</span>
                </div>
                <div class="history-controls">
                    <button class="history-btn undo" onclick="window.historyPanel.undo()">
                        <span>↶</span>
                        <span>Annuler</span>
                    </button>
                    <button class="history-btn redo" onclick="window.historyPanel.redo()">
                        <span>↷</span>
                        <span>Refaire</span>
                    </button>
                </div>
                <button class="conflict-panel-close" onclick="window.historyPanel.hide()">×</button>
            </div>
            <div class="history-panel-body">
                <div class="history-list"></div>
            </div>
        `;
        document.body.appendChild(this.panel);
        this.updateHistory();
    }

    /**
     * Met à jour l'affichage de l'historique
     */
    updateHistory() {
        const history = this.historyManager.getHistory();
        const list = this.panel.querySelector('.history-list');
        
        if (history.undo.length === 0) {
            list.innerHTML = `
                <div class="history-empty">
                    <div class="history-empty-icon">📝</div>
                    <div>Aucune action enregistrée</div>
                </div>
            `;
            return;
        }
        
        const recentActions = this.historyManager.getRecentActions(20);
        list.innerHTML = recentActions.map(action => `
            <div class="history-item" onclick="window.historyPanel.revertTo('${action.id}')">
                <div class="history-item-header">
                    <span class="history-item-time">${action.time}</span>
                    <span class="history-item-type">${action.type}</span>
                </div>
                <div class="history-item-description">${action.description}</div>
            </div>
        `).join('');
    }

    /**
     * Met à jour l'état des boutons
     */
    updateButtons(state) {
        const undoBtn = this.panel.querySelector('.history-btn.undo');
        const redoBtn = this.panel.querySelector('.history-btn.redo');
        
        undoBtn.disabled = !state.canUndo;
        redoBtn.disabled = !state.canRedo;
        
        this.updateHistory();
    }

    /**
     * Annule la dernière action
     */
    undo() {
        const action = this.historyManager.undo();
        if (action) {
            this.handleUndo(action);
        }
    }

    /**
     * Refait la dernière action annulée
     */
    redo() {
        const action = this.historyManager.redo();
        if (action) {
            this.handleRedo(action);
        }
    }

    /**
     * Gère l'annulation d'une action
     */
    handleUndo(action) {
        if (action.type === 'move' && window.editModal) {
            // Restaurer l'ancienne position
            const modification = {
                match_id: action.data.matchId,
                original: action.data.to,
                new: action.data.from
            };
            window.editModal.saveModification(modification);
            
            if (window.app && window.app.reloadAndRender) {
                setTimeout(() => window.app.reloadAndRender(), 100);
            }
        }
    }

    /**
     * Gère la réexécution d'une action
     */
    handleRedo(action) {
        if (action.type === 'move' && window.editModal) {
            const modification = {
                match_id: action.data.matchId,
                original: action.data.from,
                new: action.data.to
            };
            window.editModal.saveModification(modification);
            
            if (window.app && window.app.reloadAndRender) {
                setTimeout(() => window.app.reloadAndRender(), 100);
            }
        }
    }

    /**
     * Revient à un point spécifique
     */
    revertTo(actionId) {
        const actions = this.historyManager.revertToAction(actionId);
        if (actions && actions.length > 0) {
            actions.forEach(action => this.handleUndo(action));
        }
    }

    /**
     * Affiche le panel
     */
    show() {
        this.panel.classList.add('show');
        this.isVisible = true;
    }

    /**
     * Cache le panel
     */
    hide() {
        this.panel.classList.remove('show');
        this.isVisible = false;
    }

    /**
     * Toggle le panel
     */
    toggle() {
        if (this.isVisible) {
            this.hide();
        } else {
            this.show();
        }
    }
}

/**
 * Resolver Panel UI - Interface pour les suggestions
 */

class ResolverPanel {
    constructor(autoResolver) {
        this.autoResolver = autoResolver;
        this.panel = null;
        this.isVisible = false;
        this.createPanel();
    }

    /**
     * Crée le panel HTML
     */
    createPanel() {
        this.panel = document.createElement('div');
        this.panel.className = 'resolver-panel';
        this.panel.innerHTML = `
            <div class="resolver-panel-header">
                <div class="resolver-panel-title">
                    <span>🤖</span>
                    <span>Suggestions Auto</span>
                </div>
                <button class="conflict-panel-close" onclick="window.resolverPanel.hide()">×</button>
            </div>
            <div class="resolver-panel-body">
                <div class="suggestion-list"></div>
            </div>
        `;
        document.body.appendChild(this.panel);
    }

    /**
     * Met à jour les suggestions
     */
    update(matches, availableSlots) {
        const suggestions = this.autoResolver.generateSuggestions(matches, availableSlots);
        const list = this.panel.querySelector('.suggestion-list');
        
        if (suggestions.length === 0) {
            list.innerHTML = `
                <div class="resolver-empty">
                    <div class="resolver-empty-icon">✨</div>
                    <div>Aucune suggestion disponible</div>
                </div>
            `;
            return;
        }
        
        const topSuggestions = this.autoResolver.getTopSuggestions(10);
        list.innerHTML = topSuggestions.map((sug, idx) => `
            <div class="suggestion-item">
                <div class="suggestion-header">
                    <span class="suggestion-type ${sug.type}">${sug.type}</span>
                    <span class="suggestion-priority ${sug.priority > 150 ? 'high' : ''}">
                        Score: ${sug.priority}
                    </span>
                </div>
                <div class="suggestion-description">${sug.description}</div>
                <div class="suggestion-actions">
                    <button class="suggestion-btn preview" onclick="window.resolverPanel.previewSuggestion(${idx})">
                        👁️ Prévisualiser
                    </button>
                    <button class="suggestion-btn apply" onclick="window.resolverPanel.applySuggestion(${idx})">
                        ✓ Appliquer
                    </button>
                </div>
            </div>
        `).join('');
    }

    /**
     * Prévisualise une suggestion
     */
    previewSuggestion(index) {
        const suggestions = this.autoResolver.getTopSuggestions();
        const suggestion = suggestions[index];
        
        if (!suggestion) return;
        
        // Highlight les matchs concernés
        const { action } = suggestion;
        if (action.type === 'move') {
            const card = document.querySelector(`[data-match-id="${action.matchId}"]`);
            if (card) {
                card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                card.style.animation = 'highlight-flash 1s ease-in-out';
            }
        }
        
        console.log('👁️ Prévisualisation:', suggestion);
    }

    /**
     * Applique une suggestion
     */
    applySuggestion(index) {
        const suggestions = this.autoResolver.getTopSuggestions();
        const suggestion = suggestions[index];
        
        if (!suggestion || !window.matchsData) return;
        
        const success = this.autoResolver.applySuggestion(suggestion, window.matchsData);
        
        if (success) {
            // Enregistrer dans l'historique
            if (window.historyManager) {
                window.historyManager.pushAction({
                    type: suggestion.type,
                    description: suggestion.description,
                    data: suggestion.action
                });
            }
            
            // Recharger et re-détecter
            if (window.app && window.app.reloadAndRender) {
                window.app.reloadAndRender();
            }
            
            // Mettre à jour les conflits et suggestions
            setTimeout(() => {
                if (window.conflictPanel) {
                    window.conflictPanel.update(window.matchsData);
                }
                this.update(window.matchsData, window.availableSlots || []);
            }, 200);
            
            console.log('✅ Suggestion appliquée');
        }
    }

    /**
     * Affiche le panel
     */
    show() {
        this.panel.classList.add('show');
        this.isVisible = true;
    }

    /**
     * Cache le panel
     */
    hide() {
        this.panel.classList.remove('show');
        this.isVisible = false;
    }

    /**
     * Toggle le panel
     */
    toggle() {
        if (this.isVisible) {
            this.hide();
        } else {
            this.show();
        }
    }
}

// Animation CSS à ajouter
const style = document.createElement('style');
style.textContent = `
    @keyframes highlight-flash {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); box-shadow: 0 0 30px rgba(59, 130, 246, 0.6); }
    }
`;
document.head.appendChild(style);

</script>

    
    <script>
        // ==================== DONNÉES BRUTES ====================
        const rawMatchsData = [
  {
    "match_id": "ECL (2)|F__LYON 1 (12)|F__VBFA4PA",
    "equipe1": "ECL (2)",
    "equipe2": "LYON 1 (12)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": "1-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "INSA (6)|M__LYON 1 (9)|M__VBMA3PB",
    "equipe1": "INSA (6)",
    "equipe2": "LYON 1 (9)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA3PB",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": "1-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "INSA (1)|M__LYON 1 (11)|M__VBFA1PA",
    "equipe1": "INSA (1)",
    "equipe2": "LYON 1 (11)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBFA1PA",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": "3-0",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (9)|M__ECAM (1)|F__VBFA3PA",
    "equipe1": "LYON 1 (9)",
    "equipe2": "ECAM (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ECAM",
    "poule": "VBFA3PA",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "penalty": 4.0,
    "score": "0-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "INSA (2)|M__LYON 1 (26)|M__VBMA1PB",
    "equipe1": "INSA (2)",
    "equipe2": "LYON 1 (26)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA1PB",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 8.0,
    "score": "3-1",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "INSA (3)|M__LYON 1 (3)|M__VBMA2PB",
    "equipe1": "INSA (3)",
    "equipe2": "LYON 1 (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA2PB",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": "1-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (15)|M__CPE (2)|M__nan",
    "equipe1": "LYON 1 (15)",
    "equipe2": "CPE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 1",
    "institution2": "CPE",
    "poule": "nan",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "penalty": 24.0,
    "score": "3-0",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (11)|M__ESME (2)|M__VBMA4PB",
    "equipe1": "LYON 1 (11)",
    "equipe2": "ESME (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ESME",
    "poule": "VBMA4PB",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": "0-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (4)|M__INSA (3)|M__VBFA2PA",
    "equipe1": "LYON 1 (4)",
    "equipe2": "INSA (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBFA2PA",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": "3-0",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (2)|F__ENS (1)|F__VBFA2PB",
    "equipe1": "LYON 1 (2)",
    "equipe2": "ENS (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ENS",
    "poule": "VBFA2PB",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": "3-1",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 2 (5)|M__LYON 2 (6)|M__VBFA3PA",
    "equipe1": "LYON 2 (5)",
    "equipe2": "LYON 2 (6)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 2",
    "poule": "VBFA3PA",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ENS (3)|M__LYON 1 (12)|F__VBMA3PE",
    "equipe1": "ENS (3)",
    "equipe2": "LYON 1 (12)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ENS",
    "institution2": "LYON 1",
    "poule": "VBMA3PE",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "penalty": 16.0,
    "score": "3-2",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 2 (3)|M__CATHO (1)|M__VBMA3PD",
    "equipe1": "LYON 2 (3)",
    "equipe2": "CATHO (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "CATHO",
    "poule": "VBMA3PD",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": "3-0",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (25)|M__LYON 2 (5)|M__nan",
    "equipe1": "LYON 1 (25)",
    "equipe2": "LYON 2 (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "nan",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": "0-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 2 (6)|M__CESI (1)|M__VBMA4PC",
    "equipe1": "LYON 2 (6)",
    "equipe2": "CESI (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "CESI",
    "poule": "VBMA4PC",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": "0-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "EML (1)|M__LYON 3 (1)|M__VBFA1PB",
    "equipe1": "EML (1)",
    "equipe2": "LYON 3 (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "EML",
    "institution2": "LYON 3",
    "poule": "VBFA1PB",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": "1-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "SANTE (4)|M__LYON 1 (6)|F__VBFA3PB",
    "equipe1": "SANTE (4)",
    "equipe2": "LYON 1 (6)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "LYON 1",
    "poule": "VBFA3PB",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": "3-0",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "CATHO (1)|M__LYON 2 (7)|F__VBFA3PC",
    "equipe1": "CATHO (1)",
    "equipe2": "LYON 2 (7)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "CATHO",
    "institution2": "LYON 2",
    "poule": "VBFA3PC",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": "2-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 3 (6)|M__ESA (2)|F__VBFA4PC",
    "equipe1": "LYON 3 (6)",
    "equipe2": "ESA (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "ESA",
    "poule": "VBFA4PC",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "penalty": 0.0,
    "score": "0-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "ECAM (1)|F__LYON 3 (1)|M__VBMA1PC",
    "equipe1": "ECAM (1)",
    "equipe2": "LYON 3 (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ECAM",
    "institution2": "LYON 3",
    "poule": "VBMA1PC",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 16.0,
    "score": "1-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (21)|M__SANTE (2)|M__VBMA2PE",
    "equipe1": "LYON 1 (21)",
    "equipe2": "SANTE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 1",
    "institution2": "SANTE",
    "poule": "VBMA2PE",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": "1-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "ENS (2)|F__LYON 3 (3)|M__VBMA2PE",
    "equipe1": "ENS (2)",
    "equipe2": "LYON 3 (3)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ENS",
    "institution2": "LYON 3",
    "poule": "VBMA2PE",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "penalty": 4.0,
    "score": "2-3",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 3 (2)|M__CPE (1)|F__VBMA2PC",
    "equipe1": "LYON 3 (2)",
    "equipe2": "CPE (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "CPE",
    "poule": "VBMA2PC",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": "3-1",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 3 (4)|M__CATHO (2)|M__VBMA3PF",
    "equipe1": "LYON 3 (4)",
    "equipe2": "CATHO (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "CATHO",
    "poule": "VBMA3PF",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": "3-2",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 2 (IEP) (4)|M__ECAM (2)|M__VBMA3PG",
    "equipe1": "LYON 2 (IEP) (4)",
    "equipe2": "ECAM (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 2 (IEP)",
    "institution2": "ECAM",
    "poule": "VBMA3PG",
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": "3-1",
    "has_score": true,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (1)|M__INSA (2)|M__VBFA1PA",
    "equipe1": "LYON 1 (1)",
    "equipe2": "INSA (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBFA1PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ENTPE (1)|M__LYON 1 (11)|M__VBFA1PA",
    "equipe1": "ENTPE (1)",
    "equipe2": "LYON 1 (11)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ENTPE",
    "institution2": "LYON 1",
    "poule": "VBFA1PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 24.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (5)|M__ECL (1)|F__VBFA2PA",
    "equipe1": "LYON 1 (5)",
    "equipe2": "ECL (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ECL",
    "poule": "VBFA2PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 96.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (10)|F__ECL (2)|F__VBFA4PA",
    "equipe1": "LYON 1 (10)",
    "equipe2": "ECL (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ECL",
    "poule": "VBFA4PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (13)|F__LYON 1 (7)|F__VBFA4PA",
    "equipe1": "LYON 1 (13)",
    "equipe2": "LYON 1 (7)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "INSA (1)|M__LYON 1 (2)|F__VBMA1PA",
    "equipe1": "INSA (1)",
    "equipe2": "LYON 1 (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA1PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 96.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ENTPE (2)|F__LYON 1 (9)|M__VBFA3PA",
    "equipe1": "ENTPE (2)",
    "equipe2": "LYON 1 (9)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ENTPE",
    "institution2": "LYON 1",
    "poule": "VBFA3PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "ENTPE",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (1)|M__ENTPE (1)|M__VBMA1PA",
    "equipe1": "LYON 1 (1)",
    "equipe2": "ENTPE (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ENTPE",
    "poule": "VBMA1PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "ENTPE",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "INSA (4)|M__LYON 1 (8)|F__VBMA2PA",
    "equipe1": "INSA (4)",
    "equipe2": "LYON 1 (8)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA2PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 48.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ECL (2)|F__ISARA (1)|M__VBMA2PB",
    "equipe1": "ECL (2)",
    "equipe2": "ISARA (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ECL",
    "institution2": "ISARA",
    "poule": "VBMA2PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (13)|F__LYON 1 (24)|M__VBMA3PA",
    "equipe1": "LYON 1 (13)",
    "equipe2": "LYON 1 (24)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA3PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ECL (3)|M__LYON 1 (10)|F__VBMA3PB",
    "equipe1": "ECL (3)",
    "equipe2": "LYON 1 (10)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBMA3PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ISARA (2)|M__LYON 1 (22)|M__VBMA3PC",
    "equipe1": "ISARA (2)",
    "equipe2": "LYON 1 (22)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ISARA",
    "institution2": "LYON 1",
    "poule": "VBMA3PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (14)|M__LYON 1 (20)|M__VBMA4PA",
    "equipe1": "LYON 1 (14)",
    "equipe2": "LYON 1 (20)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PA",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ESSCA (1)|M__ESME (2)|M__VBMA4PB",
    "equipe1": "ESSCA (1)",
    "equipe2": "ESME (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ESSCA",
    "institution2": "ESME",
    "poule": "VBMA4PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": Infinity,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ESSCA (1)|M__LYON 2 (8)|F__VBFA4PB",
    "equipe1": "ESSCA (1)",
    "equipe2": "LYON 2 (8)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESSCA",
    "institution2": "LYON 2",
    "poule": "VBFA4PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ENS (2)|F__LYON 1 (8)|F__VBFA4PB",
    "equipe1": "ENS (2)",
    "equipe2": "LYON 1 (8)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ENS",
    "institution2": "LYON 1",
    "poule": "VBFA4PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ECL (1)|F__LYON 2 (1)|M__VBMA1PB",
    "equipe1": "ECL (1)",
    "equipe2": "LYON 2 (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 2",
    "poule": "VBMA1PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (6)|F__ESME (1)|M__VBMA2PD",
    "equipe1": "LYON 1 (6)",
    "equipe2": "ESME (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ESME",
    "poule": "VBMA2PD",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": Infinity,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (4)|M__LYON 2 (2)|M__VBMA2PD",
    "equipe1": "LYON 1 (4)",
    "equipe2": "LYON 2 (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "VBMA2PD",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (15)|M__LYON 2 (3)|M__VBMA3PD",
    "equipe1": "LYON 1 (15)",
    "equipe2": "LYON 2 (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "VBMA3PD",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (11)|M__LYON 2 (5)|M__VBMA4PB",
    "equipe1": "LYON 1 (11)",
    "equipe2": "LYON 2 (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "VBMA4PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (23)|M__LYON 1 (19)|M__VBMA4PC",
    "equipe1": "LYON 1 (23)",
    "equipe2": "LYON 1 (19)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 3 (6)|M__SANTE (5)|M__VBMA4PD",
    "equipe1": "LYON 3 (6)",
    "equipe2": "SANTE (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBMA4PD",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "penalty": 120.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (3)|M__ENS (1)|F__VBFA2PB",
    "equipe1": "LYON 1 (3)",
    "equipe2": "ENS (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ENS",
    "poule": "VBFA2PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "19:00",
    "gymnase": "DESCARTES",
    "penalty": 10.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 2 (2)|M__LYON 2 (1)|M__VBFA1PB",
    "equipe1": "LYON 2 (2)",
    "equipe2": "LYON 2 (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 2",
    "poule": "VBFA1PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 3 (3)|M__LYON 2 (3)|M__VBFA2PC",
    "equipe1": "LYON 3 (3)",
    "equipe2": "LYON 2 (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 2",
    "poule": "VBFA2PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 3 (2)|M__SANTE (2)|M__VBFA2PC",
    "equipe1": "LYON 3 (2)",
    "equipe2": "SANTE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBFA2PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "SANTE (4)|M__LYON 3 (4)|M__VBFA3PB",
    "equipe1": "SANTE (4)",
    "equipe2": "LYON 3 (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "LYON 3",
    "poule": "VBFA3PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ESA (1)|F__CPE (1)|F__VBFA3PB",
    "equipe1": "ESA (1)",
    "equipe2": "CPE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ESA",
    "institution2": "CPE",
    "poule": "VBFA3PB",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 3 (6)|M__SANTE (5)|M__VBFA4PC",
    "equipe1": "LYON 3 (6)",
    "equipe2": "SANTE (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBFA4PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "SANTE (6)|F__LYON 3 (5)|M__VBFA4PC",
    "equipe1": "SANTE (6)",
    "equipe2": "LYON 3 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "LYON 3",
    "poule": "VBFA4PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "SANTE (1)|M__ESA (1)|F__VBMA2PC",
    "equipe1": "SANTE (1)",
    "equipe2": "ESA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "ESA",
    "poule": "VBMA2PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (7)|F__LYON 1 (12)|F__VBMA3PE",
    "equipe1": "LYON 1 (7)",
    "equipe2": "LYON 1 (12)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA3PE",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 72.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ENS (1)|F__LYON 3 (1)|M__VBMA1PC",
    "equipe1": "ENS (1)",
    "equipe2": "LYON 3 (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ENS",
    "institution2": "LYON 3",
    "poule": "VBMA1PC",
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:30",
    "gymnase": "DESCARTES",
    "penalty": 6.25,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (26)|M__ECL (1)|M__VBMA1PB",
    "equipe1": "LYON 1 (26)",
    "equipe2": "ECL (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ECL",
    "poule": "VBMA1PB",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (2)|M__LYON 1 (8)|M__VBMA2PA",
    "equipe1": "ENTPE (2)",
    "equipe2": "LYON 1 (8)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ENTPE",
    "institution2": "LYON 1",
    "poule": "VBMA2PA",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (5)|M__LYON 1 (13)|M__VBMA3PA",
    "equipe1": "INSA (5)",
    "equipe2": "LYON 1 (13)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA3PA",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|F__EML (1)|M__nan",
    "equipe1": "ECL (1)",
    "equipe2": "EML (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ECL",
    "institution2": "EML",
    "poule": "nan",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 120.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ENTPE (1)|M__INSA (1)|M__nan",
    "equipe1": "ENTPE (1)",
    "equipe2": "INSA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ENTPE",
    "institution2": "INSA",
    "poule": "nan",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "15:30",
    "gymnase": "ENTPE",
    "penalty": 4.5,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "INSA (3)|F__LYON 1 (5)|F__VBFA2PA",
    "equipe1": "INSA (3)",
    "equipe2": "LYON 1 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBFA2PA",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (3)|M__ISARA (1)|M__VBMA2PB",
    "equipe1": "LYON 1 (3)",
    "equipe2": "ISARA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ISARA",
    "poule": "VBMA2PB",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECAM (1)|F__ENTPE (2)|F__VBFA3PA",
    "equipe1": "ECAM (1)",
    "equipe2": "ENTPE (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECAM",
    "institution2": "ENTPE",
    "poule": "VBFA3PA",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ISARA (2)|M__CPE (2)|M__VBMA3PC",
    "equipe1": "ISARA (2)",
    "equipe2": "CPE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ISARA",
    "institution2": "CPE",
    "poule": "VBMA3PC",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|F__EML (1)|M__nan",
    "equipe1": "ECL (1)",
    "equipe2": "EML (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ECL",
    "institution2": "EML",
    "poule": "nan",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "penalty": 120.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (4)|F__ECL (1)|F__VBFA2PA",
    "equipe1": "LYON 1 (4)",
    "equipe2": "ECL (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ECL",
    "poule": "VBFA2PA",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (5)|M__INSA (4)|M__VBMA2PA",
    "equipe1": "LYON 1 (5)",
    "equipe2": "INSA (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBMA2PA",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "EML (2)|M__LYON 1 (4)|M__VBMA2PD",
    "equipe1": "EML (2)",
    "equipe2": "LYON 1 (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "EML",
    "institution2": "LYON 1",
    "poule": "VBMA2PD",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (5)|F__LYON 1 (9)|F__VBFA3PA",
    "equipe1": "LYON 2 (5)",
    "equipe2": "LYON 1 (9)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 1",
    "poule": "VBFA3PA",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESME (2)|F__LYON 1 (8)|F__VBFA4PB",
    "equipe1": "ESME (2)",
    "equipe2": "LYON 1 (8)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESME",
    "institution2": "LYON 1",
    "poule": "VBFA4PB",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (8)|F__ENS (2)|F__VBFA4PB",
    "equipe1": "LYON 2 (8)",
    "equipe2": "ENS (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "ENS",
    "poule": "VBFA4PB",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (5)|M__ESSCA (1)|M__VBMA4PB",
    "equipe1": "LYON 2 (5)",
    "equipe2": "ESSCA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 2",
    "institution2": "ESSCA",
    "poule": "VBMA4PB",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (3)|F__VETO (1)|F__VBFA2PC",
    "equipe1": "LYON 3 (3)",
    "equipe2": "VETO (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "VETO",
    "poule": "VBFA2PC",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (21)|M__LYON 3 (3)|M__VBMA2PE",
    "equipe1": "LYON 1 (21)",
    "equipe2": "LYON 3 (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 3",
    "poule": "VBMA2PE",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (2)|M__ESA (1)|M__VBMA2PC",
    "equipe1": "LYON 3 (2)",
    "equipe2": "ESA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "ESA",
    "poule": "VBMA2PC",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CPE (1)|F__LYON 1 (6)|F__VBFA3PB",
    "equipe1": "CPE (1)",
    "equipe2": "LYON 1 (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "CPE",
    "institution2": "LYON 1",
    "poule": "VBFA3PB",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "VETO (1)|M__SANTE (3)|M__VBMA3PG",
    "equipe1": "VETO (1)",
    "equipe2": "SANTE (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "VETO",
    "institution2": "SANTE",
    "poule": "VBMA3PG",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESA (2)|F__LYON 3 (5)|F__VBFA4PC",
    "equipe1": "ESA (2)",
    "equipe2": "LYON 3 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ESA",
    "institution2": "LYON 3",
    "poule": "VBFA4PC",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CESI (2)|M__LYON 1 (17)|M__VBMA4PD",
    "equipe1": "CESI (2)",
    "equipe2": "LYON 1 (17)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "CESI",
    "institution2": "LYON 1",
    "poule": "VBMA4PD",
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (1)|M__LYON 1 (2)|M__VBMA1PA",
    "equipe1": "ENTPE (1)",
    "equipe2": "LYON 1 (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ENTPE",
    "institution2": "LYON 1",
    "poule": "VBMA1PA",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (9)|M__ECL (3)|M__VBMA3PB",
    "equipe1": "LYON 1 (9)",
    "equipe2": "ECL (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ECL",
    "poule": "VBMA3PB",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (1)|M__EML (1)|M__nan",
    "equipe1": "INSA (1)",
    "equipe2": "EML (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "INSA",
    "institution2": "EML",
    "poule": "nan",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 120.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "INSA (1)|M__EML (1)|M__nan",
    "equipe1": "INSA (1)",
    "equipe2": "EML (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "INSA",
    "institution2": "EML",
    "poule": "nan",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 120.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 2 (1)|M__INSA (2)|M__VBMA1PB",
    "equipe1": "LYON 2 (1)",
    "equipe2": "INSA (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 2",
    "institution2": "INSA",
    "poule": "VBMA1PB",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (5)|M__ENTPE (2)|M__VBMA2PA",
    "equipe1": "LYON 1 (5)",
    "equipe2": "ENTPE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ENTPE",
    "poule": "VBMA2PA",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (5)|F__ECAM (1)|F__VBFA3PA",
    "equipe1": "LYON 2 (5)",
    "equipe2": "ECAM (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 2",
    "institution2": "ECAM",
    "poule": "VBFA3PA",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (6)|F__LYON 1 (9)|F__VBFA3PA",
    "equipe1": "LYON 2 (6)",
    "equipe2": "LYON 1 (9)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 1",
    "poule": "VBFA3PA",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (1)|F__LYON 2 (2)|F__VBFA1PB",
    "equipe1": "LYON 3 (1)",
    "equipe2": "LYON 2 (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 2",
    "poule": "VBFA1PB",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (2)|F__SANTE (1)|F__VBFA2PB",
    "equipe1": "LYON 1 (2)",
    "equipe2": "SANTE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 1",
    "institution2": "SANTE",
    "poule": "VBFA2PB",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (4)|F__ESA (1)|F__VBFA3PB",
    "equipe1": "LYON 3 (4)",
    "equipe2": "ESA (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "ESA",
    "poule": "VBFA3PB",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (3)|F__EML (2)|F__VBFA3PC",
    "equipe1": "SANTE (3)",
    "equipe2": "EML (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "EML",
    "poule": "VBFA3PC",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (16)|M__SANTE (4)|M__VBMA3PF",
    "equipe1": "LYON 1 (16)",
    "equipe2": "SANTE (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 1",
    "institution2": "SANTE",
    "poule": "VBMA3PF",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (5)|M__SANTE (5)|M__VBMA4PD",
    "equipe1": "LYON 3 (5)",
    "equipe2": "SANTE (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBMA4PD",
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (10)|M__INSA (6)|M__VBMA3PB",
    "equipe1": "LYON 1 (10)",
    "equipe2": "INSA (6)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBMA3PB",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (12)|F__LYON 1 (13)|F__VBFA4PA",
    "equipe1": "LYON 1 (12)",
    "equipe2": "LYON 1 (13)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|F__ENTPE (1)|M__nan",
    "equipe1": "ECL (1)",
    "equipe2": "ENTPE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "ENTPE",
    "poule": "nan",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ENS (1)|F__ENTPE (1)|M__nan",
    "equipe1": "ENS (1)",
    "equipe2": "ENTPE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ENS",
    "institution2": "ENTPE",
    "poule": "nan",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "15:00",
    "gymnase": "DESCARTES",
    "penalty": 60.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "ECL (2)|M__LYON 1 (3)|M__VBMA2PB",
    "equipe1": "ECL (2)",
    "equipe2": "LYON 1 (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBMA2PB",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (1)|M__ECL (1)|F__nan",
    "equipe1": "INSA (1)",
    "equipe2": "ECL (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "ECL",
    "poule": "nan",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "LYON 1 (6)|M__LYON 2 (2)|M__VBMA2PD",
    "equipe1": "LYON 1 (6)",
    "equipe2": "LYON 2 (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "VBMA2PD",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (6)|M__LYON 1 (25)|M__VBMA4PC",
    "equipe1": "LYON 2 (6)",
    "equipe2": "LYON 1 (25)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CESI (1)|M__LYON 1 (19)|M__VBMA4PC",
    "equipe1": "CESI (1)",
    "equipe2": "LYON 1 (19)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "CESI",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (2)|F__LYON 2 (3)|F__VBFA2PC",
    "equipe1": "LYON 3 (2)",
    "equipe2": "LYON 2 (3)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 2",
    "poule": "VBFA2PC",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (6)|F__SANTE (6)|F__VBFA4PC",
    "equipe1": "LYON 3 (6)",
    "equipe2": "SANTE (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBFA4PC",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (6)|M__LYON 1 (17)|M__VBMA4PD",
    "equipe1": "LYON 3 (6)",
    "equipe2": "LYON 1 (17)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 1",
    "poule": "VBMA4PD",
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (1)|M__EML (1)|M__nan",
    "equipe1": "ENTPE (1)",
    "equipe2": "EML (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ENTPE",
    "institution2": "EML",
    "poule": "nan",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "15:30",
    "gymnase": "ENTPE",
    "penalty": 135.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "EML (1)|F__LYON 2 (1)|F__VBFA1PB",
    "equipe1": "EML (1)",
    "equipe2": "LYON 2 (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "EML",
    "institution2": "LYON 2",
    "poule": "VBFA1PB",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (1)|M__LYON 1 (26)|M__VBMA1PB",
    "equipe1": "LYON 2 (1)",
    "equipe2": "LYON 1 (26)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 1",
    "poule": "VBMA1PB",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (6)|F__ENTPE (2)|F__VBFA3PA",
    "equipe1": "LYON 2 (6)",
    "equipe2": "ENTPE (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 2",
    "institution2": "ENTPE",
    "poule": "VBFA3PA",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (9)|F__LYON 2 (5)|F__VBFA3PA",
    "equipe1": "LYON 1 (9)",
    "equipe2": "LYON 2 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "VBFA3PA",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESSCA (1)|F__LYON 1 (8)|F__VBFA4PB",
    "equipe1": "ESSCA (1)",
    "equipe2": "LYON 1 (8)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESSCA",
    "institution2": "LYON 1",
    "poule": "VBFA4PB",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESSCA (1)|M__LYON 2 (5)|M__VBMA4PB",
    "equipe1": "ESSCA (1)",
    "equipe2": "LYON 2 (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESSCA",
    "institution2": "LYON 2",
    "poule": "VBMA4PB",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (7)|F__LYON 2 (IEP) (4)|F__VBFA3PC",
    "equipe1": "LYON 2 (7)",
    "equipe2": "LYON 2 (IEP) (4)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 2 (IEP)",
    "poule": "VBFA3PC",
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (2)|F__INSA (1)|F__VBFA1PA",
    "equipe1": "INSA (2)",
    "equipe2": "INSA (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "INSA",
    "poule": "VBFA1PA",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (2)|M__ECL (1)|M__VBMA1PB",
    "equipe1": "INSA (2)",
    "equipe2": "ECL (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "ECL",
    "poule": "VBMA1PB",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (2)|M__INSA (4)|M__VBMA2PA",
    "equipe1": "ENTPE (2)",
    "equipe2": "INSA (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ENTPE",
    "institution2": "INSA",
    "poule": "VBMA2PA",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|F__INSA (1)|M__nan",
    "equipe1": "ECL (1)",
    "equipe2": "INSA (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "INSA",
    "poule": "nan",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": true
  },
  {
    "match_id": "INSA (3)|F__ECL (1)|F__VBFA2PA",
    "equipe1": "INSA (3)",
    "equipe2": "ECL (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "ECL",
    "poule": "VBFA2PA",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ISARA (1)|M__INSA (3)|M__VBMA2PB",
    "equipe1": "ISARA (1)",
    "equipe2": "INSA (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ISARA",
    "institution2": "INSA",
    "poule": "VBMA2PB",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (2)|F__ECAM (1)|F__VBFA3PA",
    "equipe1": "ENTPE (2)",
    "equipe2": "ECAM (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ENTPE",
    "institution2": "ECAM",
    "poule": "VBFA3PA",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CPE (2)|M__ISARA (2)|M__VBMA3PC",
    "equipe1": "CPE (2)",
    "equipe2": "ISARA (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "CPE",
    "institution2": "ISARA",
    "poule": "VBMA3PC",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESME (1)|M__EML (2)|M__VBMA2PD",
    "equipe1": "ESME (1)",
    "equipe2": "EML (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESME",
    "institution2": "EML",
    "poule": "VBMA2PD",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESME (2)|F__ENS (2)|F__VBFA4PB",
    "equipe1": "ESME (2)",
    "equipe2": "ENS (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESME",
    "institution2": "ENS",
    "poule": "VBFA4PB",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECAM (1)|M__EML (1)|M__VBMA1PC",
    "equipe1": "ECAM (1)",
    "equipe2": "EML (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ECAM",
    "institution2": "EML",
    "poule": "VBMA1PC",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENS (1)|F__SANTE (1)|F__VBFA2PB",
    "equipe1": "ENS (1)",
    "equipe2": "SANTE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ENS",
    "institution2": "SANTE",
    "poule": "VBFA2PB",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (2)|F__VETO (1)|F__VBFA2PC",
    "equipe1": "SANTE (2)",
    "equipe2": "VETO (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "VETO",
    "poule": "VBFA2PC",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (1)|M__CPE (1)|M__VBMA2PC",
    "equipe1": "SANTE (1)",
    "equipe2": "CPE (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "CPE",
    "poule": "VBMA2PC",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (4)|F__CPE (1)|F__VBFA3PB",
    "equipe1": "SANTE (4)",
    "equipe2": "CPE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "CPE",
    "poule": "VBFA3PB",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (3)|F__CATHO (1)|F__VBFA3PC",
    "equipe1": "SANTE (3)",
    "equipe2": "CATHO (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "CATHO",
    "poule": "VBFA3PC",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECAM (2)|M__VETO (1)|M__VBMA3PG",
    "equipe1": "ECAM (2)",
    "equipe2": "VETO (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ECAM",
    "institution2": "VETO",
    "poule": "VBMA3PG",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (5)|F__ESA (2)|F__VBFA4PC",
    "equipe1": "SANTE (5)",
    "equipe2": "ESA (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "ESA",
    "poule": "VBFA4PC",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CESI (2)|M__SANTE (5)|M__VBMA4PD",
    "equipe1": "CESI (2)",
    "equipe2": "SANTE (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "CESI",
    "institution2": "SANTE",
    "poule": "VBMA4PD",
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (2)|M__INSA (3)|M__VBMA2PB",
    "equipe1": "ECL (2)",
    "equipe2": "INSA (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "INSA",
    "poule": "VBMA2PB",
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (3)|M__INSA (6)|M__VBMA3PB",
    "equipe1": "ECL (3)",
    "equipe2": "INSA (6)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "INSA",
    "poule": "VBMA3PB",
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENS (2)|M__SANTE (2)|M__VBMA2PE",
    "equipe1": "ENS (2)",
    "equipe2": "SANTE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ENS",
    "institution2": "SANTE",
    "poule": "VBMA2PE",
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "EML (2)|F__CATHO (1)|F__VBFA3PC",
    "equipe1": "EML (2)",
    "equipe2": "CATHO (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "EML",
    "institution2": "CATHO",
    "poule": "VBFA3PC",
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CATHO (2)|M__SANTE (4)|M__VBMA3PF",
    "equipe1": "CATHO (2)",
    "equipe2": "SANTE (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "CATHO",
    "institution2": "SANTE",
    "poule": "VBMA3PF",
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (2)|F__ENTPE (1)|F__VBFA1PA",
    "equipe1": "INSA (2)",
    "equipe2": "ENTPE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "ENTPE",
    "poule": "VBFA1PA",
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|M__INSA (2)|M__VBMA1PB",
    "equipe1": "ECL (1)",
    "equipe2": "INSA (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "INSA",
    "poule": "VBMA1PB",
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (4)|M__ENTPE (2)|M__VBMA2PA",
    "equipe1": "INSA (4)",
    "equipe2": "ENTPE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "ENTPE",
    "poule": "VBMA2PA",
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (5)|F__SANTE (6)|F__VBFA4PC",
    "equipe1": "SANTE (5)",
    "equipe2": "SANTE (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "SANTE",
    "poule": "VBFA4PC",
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (1)|F__INSA (1)|F__VBFA1PA",
    "equipe1": "LYON 1 (1)",
    "equipe2": "INSA (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBFA1PA",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (1)|M__INSA (1)|M__VBMA1PA",
    "equipe1": "LYON 1 (1)",
    "equipe2": "INSA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBMA1PA",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (5)|M__LYON 1 (24)|M__VBMA3PA",
    "equipe1": "INSA (5)",
    "equipe2": "LYON 1 (24)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA3PA",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (2)|F__LYON 1 (13)|F__VBFA4PA",
    "equipe1": "ECL (2)",
    "equipe2": "LYON 1 (13)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|F__INSA (3)|F__VBFA2PA",
    "equipe1": "ECL (1)",
    "equipe2": "INSA (3)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ECL",
    "institution2": "INSA",
    "poule": "VBFA2PA",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (3)|M__ECL (2)|M__VBMA2PB",
    "equipe1": "LYON 1 (3)",
    "equipe2": "ECL (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ECL",
    "poule": "VBMA2PB",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (22)|M__CPE (2)|M__VBMA3PC",
    "equipe1": "LYON 1 (22)",
    "equipe2": "CPE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 1",
    "institution2": "CPE",
    "poule": "VBMA3PC",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "EML (2)|M__LYON 2 (2)|M__VBMA2PD",
    "equipe1": "EML (2)",
    "equipe2": "LYON 2 (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "EML",
    "institution2": "LYON 2",
    "poule": "VBMA2PD",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (2)|F__LYON 2 (6)|F__VBFA3PA",
    "equipe1": "ENTPE (2)",
    "equipe2": "LYON 2 (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ENTPE",
    "institution2": "LYON 2",
    "poule": "VBFA3PA",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECAM (1)|F__LYON 2 (5)|F__VBFA3PA",
    "equipe1": "ECAM (1)",
    "equipe2": "LYON 2 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ECAM",
    "institution2": "LYON 2",
    "poule": "VBFA3PA",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CATHO (1)|M__LYON 1 (15)|M__VBMA3PD",
    "equipe1": "CATHO (1)",
    "equipe2": "LYON 1 (15)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "CATHO",
    "institution2": "LYON 1",
    "poule": "VBMA3PD",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENS (3)|M__LYON 1 (7)|M__VBMA3PE",
    "equipe1": "ENS (3)",
    "equipe2": "LYON 1 (7)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ENS",
    "institution2": "LYON 1",
    "poule": "VBMA3PE",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (5)|M__ESME (2)|M__VBMA4PB",
    "equipe1": "LYON 2 (5)",
    "equipe2": "ESME (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 2",
    "institution2": "ESME",
    "poule": "VBMA4PB",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (6)|M__LYON 1 (23)|M__VBMA4PC",
    "equipe1": "LYON 2 (6)",
    "equipe2": "LYON 1 (23)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CESI (1)|M__LYON 1 (25)|M__VBMA4PC",
    "equipe1": "CESI (1)",
    "equipe2": "LYON 1 (25)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "CESI",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (3)|F__LYON 3 (2)|F__VBFA2PC",
    "equipe1": "LYON 3 (3)",
    "equipe2": "LYON 3 (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 3",
    "poule": "VBFA2PC",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESA (1)|F__LYON 1 (6)|F__VBFA3PB",
    "equipe1": "ESA (1)",
    "equipe2": "LYON 1 (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ESA",
    "institution2": "LYON 1",
    "poule": "VBFA3PB",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (3)|F__LYON 2 (7)|F__VBFA3PC",
    "equipe1": "SANTE (3)",
    "equipe2": "LYON 2 (7)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "LYON 2",
    "poule": "VBFA3PC",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "EML (2)|F__LYON 2 (IEP) (4)|F__VBFA3PC",
    "equipe1": "EML (2)",
    "equipe2": "LYON 2 (IEP) (4)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "EML",
    "institution2": "LYON 2 (IEP)",
    "poule": "VBFA3PC",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (16)|M__LYON 3 (4)|M__VBMA3PF",
    "equipe1": "LYON 1 (16)",
    "equipe2": "LYON 3 (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 3",
    "poule": "VBMA3PF",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (IEP) (4)|M__SANTE (3)|M__VBMA3PG",
    "equipe1": "LYON 2 (IEP) (4)",
    "equipe2": "SANTE (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 2 (IEP)",
    "institution2": "SANTE",
    "poule": "VBMA3PG",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (6)|F__LYON 3 (5)|F__VBFA4PC",
    "equipe1": "LYON 3 (6)",
    "equipe2": "LYON 3 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 3",
    "poule": "VBFA4PC",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (5)|M__LYON 1 (17)|M__VBMA4PD",
    "equipe1": "LYON 3 (5)",
    "equipe2": "LYON 1 (17)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 1",
    "poule": "VBMA4PD",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CESI (2)|M__LYON 3 (6)|M__VBMA4PD",
    "equipe1": "CESI (2)",
    "equipe2": "LYON 3 (6)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "CESI",
    "institution2": "LYON 3",
    "poule": "VBMA4PD",
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (8)|M__ENTPE (2)|M__VBMA2PA",
    "equipe1": "LYON 1 (8)",
    "equipe2": "ENTPE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ENTPE",
    "poule": "VBMA2PA",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (13)|M__INSA (5)|M__VBMA3PA",
    "equipe1": "LYON 1 (13)",
    "equipe2": "INSA (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBMA3PA",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (3)|M__LYON 1 (9)|M__VBMA3PB",
    "equipe1": "ECL (3)",
    "equipe2": "LYON 1 (9)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBMA3PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (18)|M__LYON 1 (14)|M__VBMA4PA",
    "equipe1": "LYON 1 (18)",
    "equipe2": "LYON 1 (14)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PA",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (3)|M__ISARA (1)|M__VBMA2PB",
    "equipe1": "INSA (3)",
    "equipe2": "ISARA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "INSA",
    "institution2": "ISARA",
    "poule": "VBMA2PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (11)|M__ESSCA (1)|M__VBMA4PB",
    "equipe1": "LYON 1 (11)",
    "equipe2": "ESSCA (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ESSCA",
    "poule": "VBMA4PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (26)|M__LYON 2 (1)|M__VBMA1PB",
    "equipe1": "LYON 1 (26)",
    "equipe2": "LYON 2 (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "VBMA1PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (3)|F__LYON 1 (2)|F__VBFA2PB",
    "equipe1": "LYON 1 (3)",
    "equipe2": "LYON 1 (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA2PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESME (1)|M__LYON 1 (4)|M__VBMA2PD",
    "equipe1": "ESME (1)",
    "equipe2": "LYON 1 (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESME",
    "institution2": "LYON 1",
    "poule": "VBMA2PD",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENS (2)|M__LYON 1 (21)|M__VBMA2PE",
    "equipe1": "ENS (2)",
    "equipe2": "LYON 1 (21)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ENS",
    "institution2": "LYON 1",
    "poule": "VBMA2PE",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (5)|F__ENTPE (2)|F__VBFA3PA",
    "equipe1": "LYON 2 (5)",
    "equipe2": "ENTPE (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 2",
    "institution2": "ENTPE",
    "poule": "VBFA3PA",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECAM (1)|F__LYON 2 (6)|F__VBFA3PA",
    "equipe1": "ECAM (1)",
    "equipe2": "LYON 2 (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ECAM",
    "institution2": "LYON 2",
    "poule": "VBFA3PA",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (8)|F__LYON 1 (8)|F__VBFA4PB",
    "equipe1": "LYON 2 (8)",
    "equipe2": "LYON 1 (8)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 1",
    "poule": "VBFA4PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "EML (1)|F__LYON 2 (2)|F__VBFA1PB",
    "equipe1": "EML (1)",
    "equipe2": "LYON 2 (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "EML",
    "institution2": "LYON 2",
    "poule": "VBFA1PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENS (1)|M__EML (1)|M__VBMA1PC",
    "equipe1": "ENS (1)",
    "equipe2": "EML (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ENS",
    "institution2": "EML",
    "poule": "VBMA1PC",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (3)|F__SANTE (2)|F__VBFA2PC",
    "equipe1": "LYON 3 (3)",
    "equipe2": "SANTE (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBFA2PC",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (3)|F__VETO (1)|F__VBFA2PC",
    "equipe1": "LYON 2 (3)",
    "equipe2": "VETO (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 2",
    "institution2": "VETO",
    "poule": "VBFA2PC",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (2)|M__SANTE (1)|M__VBMA2PC",
    "equipe1": "LYON 3 (2)",
    "equipe2": "SANTE (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBMA2PC",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (4)|F__CPE (1)|F__VBFA3PB",
    "equipe1": "LYON 3 (4)",
    "equipe2": "CPE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "CPE",
    "poule": "VBFA3PB",
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (2)|M__ENTPE (1)|M__VBMA1PA",
    "equipe1": "LYON 1 (2)",
    "equipe2": "ENTPE (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ENTPE",
    "poule": "VBMA1PA",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|M__LYON 1 (26)|M__VBMA1PB",
    "equipe1": "ECL (1)",
    "equipe2": "LYON 1 (26)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBMA1PB",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (24)|M__INSA (5)|M__VBMA3PA",
    "equipe1": "LYON 1 (24)",
    "equipe2": "INSA (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBMA3PA",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (6)|M__LYON 1 (10)|M__VBMA3PB",
    "equipe1": "INSA (6)",
    "equipe2": "LYON 1 (10)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA3PB",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (10)|F__LYON 1 (12)|F__VBFA4PA",
    "equipe1": "LYON 1 (10)",
    "equipe2": "LYON 1 (12)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (2)|F__LYON 1 (11)|F__VBFA1PA",
    "equipe1": "INSA (2)",
    "equipe2": "LYON 1 (11)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBFA1PA",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 8.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (5)|F__INSA (3)|F__VBFA2PA",
    "equipe1": "LYON 1 (5)",
    "equipe2": "INSA (3)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 1",
    "institution2": "INSA",
    "poule": "VBFA2PA",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (2)|M__LYON 2 (1)|M__VBMA1PB",
    "equipe1": "INSA (2)",
    "equipe2": "LYON 2 (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 2",
    "poule": "VBMA1PB",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (4)|M__LYON 1 (5)|M__VBMA2PA",
    "equipe1": "INSA (4)",
    "equipe2": "LYON 1 (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA2PA",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (6)|M__EML (2)|M__VBMA2PD",
    "equipe1": "LYON 1 (6)",
    "equipe2": "EML (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "EML",
    "poule": "VBMA2PD",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (9)|F__LYON 2 (6)|F__VBFA3PA",
    "equipe1": "LYON 1 (9)",
    "equipe2": "LYON 2 (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 2",
    "poule": "VBFA3PA",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESSCA (1)|F__ENS (2)|F__VBFA4PB",
    "equipe1": "ESSCA (1)",
    "equipe2": "ENS (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESSCA",
    "institution2": "ENS",
    "poule": "VBFA4PB",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESME (2)|F__LYON 2 (8)|F__VBFA4PB",
    "equipe1": "ESME (2)",
    "equipe2": "LYON 2 (8)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESME",
    "institution2": "LYON 2",
    "poule": "VBFA4PB",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (6)|M__LYON 1 (19)|M__VBMA4PC",
    "equipe1": "LYON 2 (6)",
    "equipe2": "LYON 1 (19)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (1)|F__LYON 3 (1)|F__VBFA1PB",
    "equipe1": "LYON 2 (1)",
    "equipe2": "LYON 3 (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 2",
    "institution2": "LYON 3",
    "poule": "VBFA1PB",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (3)|M__SANTE (2)|M__VBMA2PE",
    "equipe1": "LYON 3 (3)",
    "equipe2": "SANTE (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "SANTE",
    "poule": "VBMA2PE",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (4)|F__ESA (1)|F__VBFA3PB",
    "equipe1": "SANTE (4)",
    "equipe2": "ESA (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "ESA",
    "poule": "VBFA3PB",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CATHO (1)|F__LYON 2 (IEP) (4)|F__VBFA3PC",
    "equipe1": "CATHO (1)",
    "equipe2": "LYON 2 (IEP) (4)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "CATHO",
    "institution2": "LYON 2 (IEP)",
    "poule": "VBFA3PC",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (IEP) (4)|M__VETO (1)|M__VBMA3PG",
    "equipe1": "LYON 2 (IEP) (4)",
    "equipe2": "VETO (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 2 (IEP)",
    "institution2": "VETO",
    "poule": "VBMA3PG",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (5)|M__CESI (2)|M__VBMA4PD",
    "equipe1": "LYON 3 (5)",
    "equipe2": "CESI (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "CESI",
    "poule": "VBMA4PD",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (5)|M__LYON 1 (17)|M__VBMA4PD",
    "equipe1": "SANTE (5)",
    "equipe2": "LYON 1 (17)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "LYON 1",
    "poule": "VBMA4PD",
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (1)|M__LYON 1 (1)|M__VBMA1PA",
    "equipe1": "INSA (1)",
    "equipe2": "LYON 1 (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "LYON 1",
    "poule": "VBMA1PA",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (3)|M__ECL (2)|M__VBMA2PB",
    "equipe1": "INSA (3)",
    "equipe2": "ECL (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "ECL",
    "poule": "VBMA2PB",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "INSA (6)|M__ECL (3)|M__VBMA3PB",
    "equipe1": "INSA (6)",
    "equipe2": "ECL (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "INSA",
    "institution2": "ECL",
    "poule": "VBMA3PB",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (2)|F__LYON 1 (7)|F__VBFA4PA",
    "equipe1": "ECL (2)",
    "equipe2": "LYON 1 (7)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (18)|M__LYON 1 (20)|M__VBMA4PA",
    "equipe1": "LYON 1 (18)",
    "equipe2": "LYON 1 (20)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PA",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ISARA (1)|M__LYON 1 (3)|M__VBMA2PB",
    "equipe1": "ISARA (1)",
    "equipe2": "LYON 1 (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ISARA",
    "institution2": "LYON 1",
    "poule": "VBMA2PB",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CPE (2)|M__LYON 1 (22)|M__VBMA3PC",
    "equipe1": "CPE (2)",
    "equipe2": "LYON 1 (22)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "CPE",
    "institution2": "LYON 1",
    "poule": "VBMA3PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESSCA (1)|M__LYON 1 (11)|M__VBMA4PB",
    "equipe1": "ESSCA (1)",
    "equipe2": "LYON 1 (11)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "ESSCA",
    "institution2": "LYON 1",
    "poule": "VBMA4PB",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECL (1)|F__LYON 1 (4)|F__VBFA2PA",
    "equipe1": "ECL (1)",
    "equipe2": "LYON 1 (4)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ECL",
    "institution2": "LYON 1",
    "poule": "VBFA2PA",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (2)|M__LYON 1 (5)|M__VBMA2PA",
    "equipe1": "ENTPE (2)",
    "equipe2": "LYON 1 (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ENTPE",
    "institution2": "LYON 1",
    "poule": "VBMA2PA",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESME (1)|M__LYON 2 (2)|M__VBMA2PD",
    "equipe1": "ESME (1)",
    "equipe2": "LYON 2 (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESME",
    "institution2": "LYON 2",
    "poule": "VBMA2PD",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENTPE (2)|F__LYON 2 (5)|F__VBFA3PA",
    "equipe1": "ENTPE (2)",
    "equipe2": "LYON 2 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ENTPE",
    "institution2": "LYON 2",
    "poule": "VBFA3PA",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 16.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (6)|F__ECAM (1)|F__VBFA3PA",
    "equipe1": "LYON 2 (6)",
    "equipe2": "ECAM (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "16:00"
    ],
    "institution1": "LYON 2",
    "institution2": "ECAM",
    "poule": "VBFA3PA",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (15)|M__CATHO (1)|M__VBMA3PD",
    "equipe1": "LYON 1 (15)",
    "equipe2": "CATHO (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "CATHO",
    "poule": "VBMA3PD",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (7)|M__ENS (3)|M__VBMA3PE",
    "equipe1": "LYON 1 (7)",
    "equipe2": "ENS (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "ENS",
    "poule": "VBMA3PE",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESME (2)|M__LYON 2 (5)|M__VBMA4PB",
    "equipe1": "ESME (2)",
    "equipe2": "LYON 2 (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "16:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "ESME",
    "institution2": "LYON 2",
    "poule": "VBMA4PB",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "CESI (1)|M__LYON 1 (23)|M__VBMA4PC",
    "equipe1": "CESI (1)",
    "equipe2": "LYON 1 (23)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "CESI",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ENS (1)|M__ECAM (1)|M__VBMA1PC",
    "equipe1": "ENS (1)",
    "equipe2": "ECAM (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ENS",
    "institution2": "ECAM",
    "poule": "VBMA1PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (3)|F__SANTE (1)|F__VBFA2PB",
    "equipe1": "LYON 1 (3)",
    "equipe2": "SANTE (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 1",
    "institution2": "SANTE",
    "poule": "VBFA2PB",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 4.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (2)|F__VETO (1)|F__VBFA2PC",
    "equipe1": "LYON 3 (2)",
    "equipe2": "VETO (1)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "VETO",
    "poule": "VBFA2PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 2 (3)|F__SANTE (2)|F__VBFA2PC",
    "equipe1": "LYON 2 (3)",
    "equipe2": "SANTE (2)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 2",
    "institution2": "SANTE",
    "poule": "VBFA2PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (4)|F__LYON 1 (6)|F__VBFA3PB",
    "equipe1": "LYON 3 (4)",
    "equipe2": "LYON 1 (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 1",
    "poule": "VBFA3PB",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (3)|F__LYON 2 (IEP) (4)|F__VBFA3PC",
    "equipe1": "SANTE (3)",
    "equipe2": "LYON 2 (IEP) (4)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "LYON 2 (IEP)",
    "poule": "VBFA3PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "EML (2)|F__LYON 2 (7)|F__VBFA3PC",
    "equipe1": "EML (2)",
    "equipe2": "LYON 2 (7)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "EML",
    "institution2": "LYON 2",
    "poule": "VBFA3PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 1 (16)|M__CATHO (2)|M__VBMA3PF",
    "equipe1": "LYON 1 (16)",
    "equipe2": "CATHO (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 1",
    "institution2": "CATHO",
    "poule": "VBMA3PF",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ECAM (2)|M__SANTE (3)|M__VBMA3PG",
    "equipe1": "ECAM (2)",
    "equipe2": "SANTE (3)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ECAM",
    "institution2": "SANTE",
    "poule": "VBMA3PG",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "SANTE (5)|F__LYON 3 (5)|F__VBFA4PC",
    "equipe1": "SANTE (5)",
    "equipe2": "LYON 3 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "SANTE",
    "institution2": "LYON 3",
    "poule": "VBFA4PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "ESA (2)|F__SANTE (6)|F__VBFA4PC",
    "equipe1": "ESA (2)",
    "equipe2": "SANTE (6)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "ESA",
    "institution2": "SANTE",
    "poule": "VBFA4PC",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  },
  {
    "match_id": "LYON 3 (5)|M__LYON 3 (6)|M__VBMA4PD",
    "equipe1": "LYON 3 (5)",
    "equipe2": "LYON 3 (6)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "20:00"
    ],
    "equipe2_horaires_preferes": [
      "20:00"
    ],
    "institution1": "LYON 3",
    "institution2": "LYON 3",
    "poule": "VBMA4PD",
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "penalty": 0.0,
    "score": null,
    "has_score": false,
    "is_fixed": false
  }
];
        const rawUnscheduledData = [
  {
    "match_id": "LYON 1 (1)|F__LYON 1 (11)|F__VBFA1PA",
    "equipe1": "LYON 1 (1)",
    "equipe2": "LYON 1 (11)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA1PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (2)|M__LYON 1 (1)|M__VBMA1PA",
    "equipe1": "LYON 1 (2)",
    "equipe2": "LYON 1 (1)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA1PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (1)|M__LYON 1 (2)|M__VBMA1PA",
    "equipe1": "LYON 1 (1)",
    "equipe2": "LYON 1 (2)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA1PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (5)|F__LYON 1 (4)|F__VBFA2PA",
    "equipe1": "LYON 1 (5)",
    "equipe2": "LYON 1 (4)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA2PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (4)|F__LYON 1 (5)|F__VBFA2PA",
    "equipe1": "LYON 1 (4)",
    "equipe2": "LYON 1 (5)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA2PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (8)|M__LYON 1 (5)|M__VBMA2PA",
    "equipe1": "LYON 1 (8)",
    "equipe2": "LYON 1 (5)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA2PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (5)|M__LYON 1 (8)|M__VBMA2PA",
    "equipe1": "LYON 1 (5)",
    "equipe2": "LYON 1 (8)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA2PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (6)|M__LYON 1 (4)|M__VBMA2PD",
    "equipe1": "LYON 1 (6)",
    "equipe2": "LYON 1 (4)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA2PD",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (10)|M__LYON 1 (9)|M__VBMA3PB",
    "equipe1": "LYON 1 (10)",
    "equipe2": "LYON 1 (9)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA3PB",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (9)|M__LYON 1 (10)|M__VBMA3PB",
    "equipe1": "LYON 1 (9)",
    "equipe2": "LYON 1 (10)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA3PB",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (10)|F__LYON 1 (13)|F__VBFA4PA",
    "equipe1": "LYON 1 (10)",
    "equipe2": "LYON 1 (13)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (10)|F__LYON 1 (7)|F__VBFA4PA",
    "equipe1": "LYON 1 (10)",
    "equipe2": "LYON 1 (7)",
    "equipe1_genre": "F",
    "equipe2_genre": "F",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBFA4PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (14)|M__LYON 1 (18)|M__VBMA4PA",
    "equipe1": "LYON 1 (14)",
    "equipe2": "LYON 1 (18)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (20)|M__LYON 1 (18)|M__VBMA4PA",
    "equipe1": "LYON 1 (20)",
    "equipe2": "LYON 1 (18)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "14:00"
    ],
    "equipe2_horaires_preferes": [
      "14:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PA",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (25)|M__LYON 1 (23)|M__VBMA4PC",
    "equipe1": "LYON 1 (25)",
    "equipe2": "LYON 1 (23)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "score": null,
    "has_score": false
  },
  {
    "match_id": "LYON 1 (25)|M__LYON 1 (19)|M__VBMA4PC",
    "equipe1": "LYON 1 (25)",
    "equipe2": "LYON 1 (19)",
    "equipe1_genre": "M",
    "equipe2_genre": "M",
    "equipe1_horaires_preferes": [
      "18:00"
    ],
    "equipe2_horaires_preferes": [
      "18:00"
    ],
    "institution1": "LYON 1",
    "institution2": "LYON 1",
    "poule": "VBMA4PC",
    "score": null,
    "has_score": false
  }
];
        const rawAvailableSlotsData = [
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_14:00_DESCARTES"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_16:00_DESCARTES"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (3)|M__LYON 1 (12)|F__VBMA3PE",
    "slot_id": "1_18:00_DESCARTES"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (2)|F__LYON 3 (3)|M__VBMA2PE",
    "slot_id": "1_20:00_DESCARTES"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (2)|F__LYON 1 (12)|F__VBFA4PA",
    "slot_id": "1_14:00_ECL"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_16:00_ECL"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_18:00_ECL"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_20:00_ECL"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "occupé",
    "match_id": "LYON 3 (6)|M__ESA (2)|F__VBFA4PC",
    "slot_id": "1_20:00_ESA"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (6)|M__CESI (1)|M__VBMA4PC",
    "slot_id": "1_18:00_LYON 2 HC"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (IEP) (4)|M__ECAM (2)|M__VBMA3PG",
    "slot_id": "1_20:00_LYON 2 HC"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 1 (15)|M__CPE (2)|M__nan",
    "slot_id": "1_16:00_LAENNEC"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 2 (3)|M__CATHO (1)|M__VBMA3PD",
    "slot_id": "1_18:00_LAENNEC"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 3 (4)|M__CATHO (2)|M__VBMA3PF",
    "slot_id": "1_20:00_LAENNEC"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (6)|M__LYON 1 (9)|M__VBMA3PB",
    "slot_id": "1_14:00_BESSON"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (3)|M__LYON 1 (3)|M__VBMA2PB",
    "slot_id": "1_16:00_BESSON"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (25)|M__LYON 2 (5)|M__nan",
    "slot_id": "1_18:00_BESSON"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 3 (2)|M__CPE (1)|F__VBMA2PC",
    "slot_id": "1_20:00_BESSON"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_14:00_L. J. HAUT"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "LYON 1 (11)|M__ESME (2)|M__VBMA4PB",
    "slot_id": "1_16:00_L. J. HAUT"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_18:00_L. J. HAUT"
  },
  {
    "semaine": 1,
    "semaine_display": "Semaine 1 (16/10)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "1_20:00_L. J. HAUT"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_14:00_DESCARTES"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_16:00_DESCARTES"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_18:00_DESCARTES"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_20:00_DESCARTES"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "LYON 1 (10)|F__ECL (2)|F__VBFA4PA",
    "slot_id": "2_14:00_ECL"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (3)|M__LYON 1 (10)|F__VBMA3PB",
    "slot_id": "2_16:00_ECL"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_18:00_ECL"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_20:00_ECL"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_20:00_ESA"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 1 (11)|M__LYON 2 (5)|M__VBMA4PB",
    "slot_id": "2_18:00_LYON 2 HC"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 3 (3)|M__LYON 2 (3)|M__VBFA2PC",
    "slot_id": "2_20:00_LYON 2 HC"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 1 (14)|M__LYON 1 (20)|M__VBMA4PA",
    "slot_id": "2_16:00_LAENNEC"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 3 (6)|M__SANTE (5)|M__VBMA4PD",
    "slot_id": "2_18:00_LAENNEC"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "SANTE (1)|M__ESA (1)|F__VBMA2PC",
    "slot_id": "2_20:00_LAENNEC"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (1)|M__LYON 1 (2)|F__VBMA1PA",
    "slot_id": "2_14:00_BESSON"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ESSCA (1)|M__ESME (2)|M__VBMA4PB",
    "slot_id": "2_16:00_BESSON"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (6)|F__ESME (1)|M__VBMA2PD",
    "slot_id": "2_18:00_BESSON"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (7)|F__LYON 1 (12)|F__VBMA3PE",
    "slot_id": "2_20:00_BESSON"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "LYON 1 (13)|F__LYON 1 (7)|F__VBFA4PA",
    "slot_id": "2_14:00_L. J. HAUT"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "2_16:00_L. J. HAUT"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ESSCA (1)|M__LYON 2 (8)|F__VBFA4PB",
    "slot_id": "2_18:00_L. J. HAUT"
  },
  {
    "semaine": 2,
    "semaine_display": "Semaine 2 (23/10)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ESA (1)|F__CPE (1)|F__VBFA3PB",
    "slot_id": "2_20:00_L. J. HAUT"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_14:00_DESCARTES"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_16:00_DESCARTES"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_18:00_DESCARTES"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_20:00_DESCARTES"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_14:00_ECL"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_16:00_ECL"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_18:00_ECL"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_20:00_ECL"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_20:00_ESA"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_18:00_LYON 2 HC"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_20:00_LYON 2 HC"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_16:00_LAENNEC"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_18:00_LAENNEC"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_20:00_LAENNEC"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_14:00_BESSON"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_16:00_BESSON"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_18:00_BESSON"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_20:00_BESSON"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_14:00_L. J. HAUT"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_16:00_L. J. HAUT"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_18:00_L. J. HAUT"
  },
  {
    "semaine": 3,
    "semaine_display": "Semaine 3 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "3_20:00_L. J. HAUT"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "4_14:00_DESCARTES"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "4_16:00_DESCARTES"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "LYON 2 (8)|F__ENS (2)|F__VBFA4PB",
    "slot_id": "4_18:00_DESCARTES"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "4_20:00_DESCARTES"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (1)|F__EML (1)|M__nan",
    "slot_id": "4_14:00_ECL"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (1)|F__EML (1)|M__nan",
    "slot_id": "4_16:00_ECL"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "LYON 1 (4)|F__ECL (1)|F__VBFA2PA",
    "slot_id": "4_18:00_ECL"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "4_20:00_ECL"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "4_20:00_ESA"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "4_18:00_LYON 2 HC"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "4_20:00_LYON 2 HC"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "ECAM (1)|F__ENTPE (2)|F__VBFA3PA",
    "slot_id": "4_16:00_LAENNEC"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 2 (5)|F__LYON 1 (9)|F__VBFA3PA",
    "slot_id": "4_18:00_LAENNEC"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "ESA (2)|F__LYON 3 (5)|F__VBFA4PC",
    "slot_id": "4_20:00_LAENNEC"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (5)|M__LYON 1 (13)|M__VBMA3PA",
    "slot_id": "4_14:00_BESSON"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (3)|M__ISARA (1)|M__VBMA2PB",
    "slot_id": "4_16:00_BESSON"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ESME (2)|F__LYON 1 (8)|F__VBFA4PB",
    "slot_id": "4_18:00_BESSON"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "CESI (2)|M__LYON 1 (17)|M__VBMA4PD",
    "slot_id": "4_20:00_BESSON"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "LYON 1 (26)|M__ECL (1)|M__VBMA1PB",
    "slot_id": "4_14:00_L. J. HAUT"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ISARA (2)|M__CPE (2)|M__VBMA3PC",
    "slot_id": "4_16:00_L. J. HAUT"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "LYON 2 (5)|M__ESSCA (1)|M__VBMA4PB",
    "slot_id": "4_18:00_L. J. HAUT"
  },
  {
    "semaine": 4,
    "semaine_display": "Semaine 4 (06/11)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "VETO (1)|M__SANTE (3)|M__VBMA3PG",
    "slot_id": "4_20:00_L. J. HAUT"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_14:00_DESCARTES"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_16:00_DESCARTES"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_18:00_DESCARTES"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_20:00_DESCARTES"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "LYON 1 (9)|M__ECL (3)|M__VBMA3PB",
    "slot_id": "5_14:00_ECL"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_16:00_ECL"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_18:00_ECL"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_20:00_ECL"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_20:00_ESA"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_18:00_LYON 2 HC"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_20:00_LYON 2 HC"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_16:00_LAENNEC"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_18:00_LAENNEC"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 3 (5)|M__SANTE (5)|M__VBMA4PD",
    "slot_id": "5_20:00_LAENNEC"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (1)|M__EML (1)|M__nan",
    "slot_id": "5_14:00_BESSON"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (1)|M__EML (1)|M__nan",
    "slot_id": "5_16:00_BESSON"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 2 (6)|F__LYON 1 (9)|F__VBFA3PA",
    "slot_id": "5_18:00_BESSON"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (16)|M__SANTE (4)|M__VBMA3PF",
    "slot_id": "5_20:00_BESSON"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ENTPE (1)|M__LYON 1 (2)|M__VBMA1PA",
    "slot_id": "5_14:00_L. J. HAUT"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "5_16:00_L. J. HAUT"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "LYON 2 (5)|F__ECAM (1)|F__VBFA3PA",
    "slot_id": "5_18:00_L. J. HAUT"
  },
  {
    "semaine": 5,
    "semaine_display": "Semaine 5 (13/11)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "SANTE (3)|F__EML (2)|F__VBFA3PC",
    "slot_id": "5_20:00_L. J. HAUT"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_14:00_DESCARTES"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_16:00_DESCARTES"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_18:00_DESCARTES"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_20:00_DESCARTES"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (1)|F__ENTPE (1)|M__nan",
    "slot_id": "6_14:00_ECL"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "INSA (1)|M__ECL (1)|F__nan",
    "slot_id": "6_16:00_ECL"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_18:00_ECL"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_20:00_ECL"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_20:00_ESA"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_18:00_LYON 2 HC"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_20:00_LYON 2 HC"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_16:00_LAENNEC"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_18:00_LAENNEC"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 3 (6)|F__SANTE (6)|F__VBFA4PC",
    "slot_id": "6_20:00_LAENNEC"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (12)|F__LYON 1 (13)|F__VBFA4PA",
    "slot_id": "6_14:00_BESSON"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ECL (2)|M__LYON 1 (3)|M__VBMA2PB",
    "slot_id": "6_16:00_BESSON"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "CESI (1)|M__LYON 1 (19)|M__VBMA4PC",
    "slot_id": "6_18:00_BESSON"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 3 (6)|M__LYON 1 (17)|M__VBMA4PD",
    "slot_id": "6_20:00_BESSON"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_14:00_L. J. HAUT"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_16:00_L. J. HAUT"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_18:00_L. J. HAUT"
  },
  {
    "semaine": 6,
    "semaine_display": "Semaine 6 (20/11)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "6_20:00_L. J. HAUT"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_14:00_DESCARTES"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_16:00_DESCARTES"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_18:00_DESCARTES"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_20:00_DESCARTES"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_14:00_ECL"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_16:00_ECL"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_18:00_ECL"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_20:00_ECL"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_20:00_ESA"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "ESSCA (1)|M__LYON 2 (5)|M__VBMA4PB",
    "slot_id": "7_18:00_LYON 2 HC"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (7)|F__LYON 2 (IEP) (4)|F__VBFA3PC",
    "slot_id": "7_20:00_LYON 2 HC"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_16:00_LAENNEC"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_18:00_LAENNEC"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_20:00_LAENNEC"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_14:00_BESSON"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_16:00_BESSON"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ESSCA (1)|F__LYON 1 (8)|F__VBFA4PB",
    "slot_id": "7_18:00_BESSON"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_20:00_BESSON"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_14:00_L. J. HAUT"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_16:00_L. J. HAUT"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_18:00_L. J. HAUT"
  },
  {
    "semaine": 7,
    "semaine_display": "Semaine 7 (27/11)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "7_20:00_L. J. HAUT"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_14:00_DESCARTES"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_16:00_DESCARTES"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ESME (2)|F__ENS (2)|F__VBFA4PB",
    "slot_id": "8_18:00_DESCARTES"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (1)|F__SANTE (1)|F__VBFA2PB",
    "slot_id": "8_20:00_DESCARTES"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (1)|F__INSA (1)|M__nan",
    "slot_id": "8_14:00_ECL"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_16:00_ECL"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_18:00_ECL"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_20:00_ECL"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "occupé",
    "match_id": "SANTE (5)|F__ESA (2)|F__VBFA4PC",
    "slot_id": "8_20:00_ESA"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_18:00_LYON 2 HC"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_20:00_LYON 2 HC"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_16:00_LAENNEC"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_18:00_LAENNEC"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "CESI (2)|M__SANTE (5)|M__VBMA4PD",
    "slot_id": "8_20:00_LAENNEC"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ENTPE (2)|M__INSA (4)|M__VBMA2PA",
    "slot_id": "8_14:00_BESSON"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "CPE (2)|M__ISARA (2)|M__VBMA3PC",
    "slot_id": "8_16:00_BESSON"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_18:00_BESSON"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "SANTE (4)|F__CPE (1)|F__VBFA3PB",
    "slot_id": "8_20:00_BESSON"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "8_14:00_L. J. HAUT"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ENTPE (2)|F__ECAM (1)|F__VBFA3PA",
    "slot_id": "8_16:00_L. J. HAUT"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ESME (1)|M__EML (2)|M__VBMA2PD",
    "slot_id": "8_18:00_L. J. HAUT"
  },
  {
    "semaine": 8,
    "semaine_display": "Semaine 8 (04/12)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "SANTE (2)|F__VETO (1)|F__VBFA2PC",
    "slot_id": "8_20:00_L. J. HAUT"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_14:00_DESCARTES"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_16:00_DESCARTES"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_18:00_DESCARTES"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (2)|M__SANTE (2)|M__VBMA2PE",
    "slot_id": "9_20:00_DESCARTES"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_14:00_ECL"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_16:00_ECL"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_18:00_ECL"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_20:00_ECL"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_20:00_ESA"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_18:00_LYON 2 HC"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_20:00_LYON 2 HC"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_16:00_LAENNEC"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_18:00_LAENNEC"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_20:00_LAENNEC"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ECL (3)|M__INSA (6)|M__VBMA3PB",
    "slot_id": "9_14:00_BESSON"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_16:00_BESSON"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_18:00_BESSON"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "CATHO (2)|M__SANTE (4)|M__VBMA3PF",
    "slot_id": "9_20:00_BESSON"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_14:00_L. J. HAUT"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_16:00_L. J. HAUT"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "9_18:00_L. J. HAUT"
  },
  {
    "semaine": 9,
    "semaine_display": "Semaine 9 (11/12)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "EML (2)|F__CATHO (1)|F__VBFA3PC",
    "slot_id": "9_20:00_L. J. HAUT"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_14:00_DESCARTES"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_16:00_DESCARTES"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_18:00_DESCARTES"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_20:00_DESCARTES"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_14:00_ECL"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_16:00_ECL"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_18:00_ECL"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_20:00_ECL"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_20:00_ESA"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_18:00_LYON 2 HC"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_20:00_LYON 2 HC"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_16:00_LAENNEC"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_18:00_LAENNEC"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_20:00_LAENNEC"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (4)|M__ENTPE (2)|M__VBMA2PA",
    "slot_id": "10_14:00_BESSON"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_16:00_BESSON"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_18:00_BESSON"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "SANTE (5)|F__SANTE (6)|F__VBFA4PC",
    "slot_id": "10_20:00_BESSON"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_14:00_L. J. HAUT"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_16:00_L. J. HAUT"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_18:00_L. J. HAUT"
  },
  {
    "semaine": 10,
    "semaine_display": "Semaine 10 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "10_20:00_L. J. HAUT"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_14:00_DESCARTES"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_16:00_DESCARTES"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (3)|M__LYON 1 (7)|M__VBMA3PE",
    "slot_id": "11_18:00_DESCARTES"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_20:00_DESCARTES"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (2)|F__LYON 1 (13)|F__VBFA4PA",
    "slot_id": "11_14:00_ECL"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_16:00_ECL"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_18:00_ECL"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_20:00_ECL"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_20:00_ESA"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "ECAM (1)|F__LYON 2 (5)|F__VBFA3PA",
    "slot_id": "11_18:00_LYON 2 HC"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (IEP) (4)|M__SANTE (3)|M__VBMA3PG",
    "slot_id": "11_20:00_LYON 2 HC"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_16:00_LAENNEC"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 2 (5)|M__ESME (2)|M__VBMA4PB",
    "slot_id": "11_18:00_LAENNEC"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "CESI (2)|M__LYON 3 (6)|M__VBMA4PD",
    "slot_id": "11_20:00_LAENNEC"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "INSA (5)|M__LYON 1 (24)|M__VBMA3PA",
    "slot_id": "11_14:00_BESSON"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (22)|M__CPE (2)|M__VBMA3PC",
    "slot_id": "11_16:00_BESSON"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "CESI (1)|M__LYON 1 (25)|M__VBMA4PC",
    "slot_id": "11_18:00_BESSON"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 3 (5)|M__LYON 1 (17)|M__VBMA4PD",
    "slot_id": "11_20:00_BESSON"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_14:00_L. J. HAUT"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_16:00_L. J. HAUT"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_18:00_L. J. HAUT"
  },
  {
    "semaine": 11,
    "semaine_display": "Semaine 11 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "11_20:00_L. J. HAUT"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_14:00_DESCARTES"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_16:00_DESCARTES"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (2)|M__LYON 1 (21)|M__VBMA2PE",
    "slot_id": "12_18:00_DESCARTES"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (1)|M__EML (1)|M__VBMA1PC",
    "slot_id": "12_20:00_DESCARTES"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (3)|M__LYON 1 (9)|M__VBMA3PB",
    "slot_id": "12_14:00_ECL"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_16:00_ECL"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_18:00_ECL"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_20:00_ECL"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_20:00_ESA"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (8)|F__LYON 1 (8)|F__VBFA4PB",
    "slot_id": "12_18:00_LYON 2 HC"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (3)|F__VETO (1)|F__VBFA2PC",
    "slot_id": "12_20:00_LYON 2 HC"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_16:00_LAENNEC"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_18:00_LAENNEC"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 3 (4)|F__CPE (1)|F__VBFA3PB",
    "slot_id": "12_20:00_LAENNEC"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (18)|M__LYON 1 (14)|M__VBMA4PA",
    "slot_id": "12_14:00_BESSON"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (11)|M__ESSCA (1)|M__VBMA4PB",
    "slot_id": "12_16:00_BESSON"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ESME (1)|M__LYON 1 (4)|M__VBMA2PD",
    "slot_id": "12_18:00_BESSON"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_20:00_BESSON"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_14:00_L. J. HAUT"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_16:00_L. J. HAUT"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_18:00_L. J. HAUT"
  },
  {
    "semaine": 12,
    "semaine_display": "Semaine 12 (Banalisée)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "12_20:00_L. J. HAUT"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_14:00_DESCARTES"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_16:00_DESCARTES"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ESSCA (1)|F__ENS (2)|F__VBFA4PB",
    "slot_id": "13_18:00_DESCARTES"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_20:00_DESCARTES"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (1)|M__LYON 1 (26)|M__VBMA1PB",
    "slot_id": "13_14:00_ECL"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_16:00_ECL"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_18:00_ECL"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_20:00_ECL"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "occupé",
    "match_id": "SANTE (4)|F__ESA (1)|F__VBFA3PB",
    "slot_id": "13_20:00_ESA"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (6)|M__LYON 1 (19)|M__VBMA4PC",
    "slot_id": "13_18:00_LYON 2 HC"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "LYON 2 (IEP) (4)|M__VETO (1)|M__VBMA3PG",
    "slot_id": "13_20:00_LYON 2 HC"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_16:00_LAENNEC"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_18:00_LAENNEC"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 3 (5)|M__CESI (2)|M__VBMA4PD",
    "slot_id": "13_20:00_LAENNEC"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (10)|F__LYON 1 (12)|F__VBFA4PA",
    "slot_id": "13_14:00_BESSON"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (5)|F__INSA (3)|F__VBFA2PA",
    "slot_id": "13_16:00_BESSON"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (6)|M__EML (2)|M__VBMA2PD",
    "slot_id": "13_18:00_BESSON"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "SANTE (5)|M__LYON 1 (17)|M__VBMA4PD",
    "slot_id": "13_20:00_BESSON"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "LYON 1 (2)|M__ENTPE (1)|M__VBMA1PA",
    "slot_id": "13_14:00_L. J. HAUT"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_16:00_L. J. HAUT"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_18:00_L. J. HAUT"
  },
  {
    "semaine": 13,
    "semaine_display": "Semaine 13 (08/01)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "13_20:00_L. J. HAUT"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "14_14:00_DESCARTES"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "DESCARTES",
    "statut": "libre",
    "match_id": null,
    "slot_id": "14_16:00_DESCARTES"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "LYON 1 (7)|M__ENS (3)|M__VBMA3PE",
    "slot_id": "14_18:00_DESCARTES"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "DESCARTES",
    "statut": "occupé",
    "match_id": "ENS (1)|M__ECAM (1)|M__VBMA1PC",
    "slot_id": "14_20:00_DESCARTES"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (2)|F__LYON 1 (7)|F__VBFA4PA",
    "slot_id": "14_14:00_ECL"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "14_16:00_ECL"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "ECL",
    "statut": "occupé",
    "match_id": "ECL (1)|F__LYON 1 (4)|F__VBFA2PA",
    "slot_id": "14_18:00_ECL"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "ECL",
    "statut": "libre",
    "match_id": null,
    "slot_id": "14_20:00_ECL"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "ESA",
    "statut": "occupé",
    "match_id": "ESA (2)|F__SANTE (6)|F__VBFA4PC",
    "slot_id": "14_20:00_ESA"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "ESME (2)|M__LYON 2 (5)|M__VBMA4PB",
    "slot_id": "14_18:00_LYON 2 HC"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LYON 2 HC",
    "statut": "occupé",
    "match_id": "EML (2)|F__LYON 2 (7)|F__VBFA3PC",
    "slot_id": "14_20:00_LYON 2 HC"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "14_16:00_LAENNEC"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "LAENNEC",
    "statut": "libre",
    "match_id": null,
    "slot_id": "14_18:00_LAENNEC"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "LAENNEC",
    "statut": "occupé",
    "match_id": "LYON 3 (5)|M__LYON 3 (6)|M__VBMA4PD",
    "slot_id": "14_20:00_LAENNEC"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (18)|M__LYON 1 (20)|M__VBMA4PA",
    "slot_id": "14_14:00_BESSON"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "ESSCA (1)|M__LYON 1 (11)|M__VBMA4PB",
    "slot_id": "14_16:00_BESSON"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "CESI (1)|M__LYON 1 (23)|M__VBMA4PC",
    "slot_id": "14_18:00_BESSON"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "BESSON",
    "statut": "occupé",
    "match_id": "LYON 1 (16)|M__CATHO (2)|M__VBMA3PF",
    "slot_id": "14_20:00_BESSON"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "14:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "INSA (6)|M__ECL (3)|M__VBMA3PB",
    "slot_id": "14_14:00_L. J. HAUT"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "16:00",
    "gymnase": "L. J. HAUT",
    "statut": "libre",
    "match_id": null,
    "slot_id": "14_16:00_L. J. HAUT"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "18:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ESME (1)|M__LYON 2 (2)|M__VBMA2PD",
    "slot_id": "14_18:00_L. J. HAUT"
  },
  {
    "semaine": 14,
    "semaine_display": "Semaine 14 (15/01)",
    "horaire": "20:00",
    "gymnase": "L. J. HAUT",
    "statut": "occupé",
    "match_id": "ECAM (2)|M__SANTE (3)|M__VBMA3PG",
    "slot_id": "14_20:00_L. J. HAUT"
  }
];
        const penaltyConfig = {
  "weight": 1.0,
  "penaltyBeforeOne": 6.0,
  "penaltyBeforeBoth": 15.0,
  "divisor": 60.0,
  "tolerance": 30.0,
  "penaltyList": [
    5.0,
    2.0,
    1.0
  ],
  "minSpacing": 2
};
        
        // ==================== INITIALISATION ====================
        class PyCalendarApp {
            constructor() {
                // ============ SYSTÈME CENTRALISÉ DE DONNÉES ============
                // DataManager est la SEULE source de vérité
                this.dataManager = new DataManager(
                    rawMatchsData,
                    rawAvailableSlotsData,
                    rawUnscheduledData
                );
                
                // ============ PENALTY CALCULATOR ============
                // Recalcul dynamique des pénalités après modifications
                this.penaltyCalculator = new PenaltyCalculator(penaltyConfig);
                console.log('🧮 PenaltyCalculator initialized with config:', penaltyConfig);
                
                // Rendre accessible globalement pour compatibilité
                window.dataManager = this.dataManager;
                window.matchsData = this.dataManager.getCurrentMatches(); // Pour compatibilité
                window.allMatches = this.dataManager.getCurrentMatches(); // Pour edit-modal
                window.unscheduledData = rawUnscheduledData;
                window.availableSlotsData = rawAvailableSlotsData;
                
                // ============ AUTRES SYSTÈMES ============
                this.filterManager = new FilterManager();
                this.calendarGridView = new CalendarGridView();
                this.currentTab = 'grid';
                
                // Initialize slot manager (synchronisé avec DataManager)
                this.slotManager = new SlotManager(rawAvailableSlotsData);
                window.slotManager = this.slotManager;
                
                // Initialize systems
                this.conflictDetector = new ConflictDetector();
                this.autoResolver = new AutoResolver(this.conflictDetector);
                this.historyManager = new HistoryManager();
                
                // ============ SYNCHRONISATION ============
                // Quand DataManager change, mettre à jour les références globales
                this.dataManager.subscribe((event) => {
                    console.log('📡 DataManager event:', event.type);
                    console.log('  Event data:', event);
                    
                    window.matchsData = this.dataManager.getCurrentMatches();
                    window.allMatches = this.dataManager.getCurrentMatches();
                    
                    console.log('  Updated matchsData:', window.matchsData.length, 'matches');
                    
                    // Re-render si nécessaire
                    if (event.type === 'MODIFICATION_SAVED' || 
                        event.type === 'MODIFICATION_UNDONE' || 
                        event.type === 'ALL_MODIFICATIONS_RESET') {
                        console.log('  🔄 Triggering reload and render...');
                        this.reloadAndRender();
                    }
                });
            }
            
            /**
             * Reload match data and re-render current view
             * SIMPLIFIÉ: DataManager gère tout automatiquement
             */
            reloadAndRender() {
                console.log('🔄 reloadAndRender() called');
                console.log('  Current tab:', this.currentTab);
                
                // Reload slot state from localStorage
                if (this.slotManager) {
                    console.log('  📋 Reloading SlotManager state...');
                    this.slotManager.loadFromLocalStorage();
                }
                
                // DataManager recalcule automatiquement l'état actuel
                // Pas besoin de reset/apply manuel - DataManager le fait déjà!
                let currentMatches = this.dataManager.getCurrentMatches();
                console.log('  📊 Current matches from DataManager:', currentMatches.length);
                
                // ============ RECALCULER LES PÉNALITÉS ============
                console.log('  🧮 Recalculating penalties...');
                currentMatches = this.penaltyCalculator.recalculateAllPenalties(currentMatches);
                
                window.matchsData = currentMatches;
                window.allMatches = currentMatches;
                
                // ============ ACTUALISER LES MATCHS NON PLANIFIÉS ============
                // Recalculer les matchs non planifiés depuis les matchs actuels
                const updatedUnscheduled = currentMatches.filter(m => !m.semaine || !m.horaire || !m.gymnase);
                window.rawUnscheduledData = updatedUnscheduled;
                window.unscheduledData = updatedUnscheduled;
                console.log('  ⚠️ Updated unscheduled matches:', updatedUnscheduled.length);
                
                // Mettre à jour le compteur et le label du tab
                const unscheduledCount = updatedUnscheduled.length;
                const totalUnscheduledEl = document.getElementById('totalUnscheduled');
                const unscheduledTabEl = document.getElementById('unscheduledTab');
                
                if (totalUnscheduledEl) {
                    totalUnscheduledEl.textContent = unscheduledCount;
                }
                if (unscheduledTabEl) {
                    unscheduledTabEl.textContent = unscheduledCount > 0 
                        ? `⚠️ Non Planifiés (${unscheduledCount})` 
                        : '✅ Tous Planifiés';
                }
                
                // ============ ACTUALISER LES STATS GÉNÉRALES ============
                const stats = Utils.calculateStats(currentMatches);
                
                const totalMatchesEl = document.getElementById('totalMatches');
                const totalWeeksEl = document.getElementById('totalWeeks');
                const totalPoolsEl = document.getElementById('totalPools');
                const totalVenuesEl = document.getElementById('totalVenues');
                
                if (totalMatchesEl) totalMatchesEl.textContent = stats.totalMatches;
                if (totalWeeksEl) totalWeeksEl.textContent = stats.totalWeeks;
                if (totalPoolsEl) totalPoolsEl.textContent = stats.totalPools;
                if (totalVenuesEl) totalVenuesEl.textContent = stats.totalVenues;
                
                console.log('  📈 Updated stats:', stats);
                
                // Afficher les statistiques de pénalités
                const penaltyStats = this.penaltyCalculator.getPenaltyStats(currentMatches);
                console.log('  💰 Penalty stats:', penaltyStats);
                
                // Re-render current view
                console.log('  🎨 Re-rendering current view...');
                this.render(this.filterManager.filters, this.filterManager.preferences);
                
                // Update conflicts after reload
                setTimeout(() => {
                    console.log('  ⚔️ Updating conflicts...');
                    this.updateConflicts();
                }, 200);
                
                console.log('✅ reloadAndRender() completed');
            }
            
            init() {
                console.log('🚀 Initialisation PyCalendar Pro V2');
                console.log('  Matchs planifiés:', this.dataManager.getCurrentMatches().length);
                console.log('  Matchs non planifiés:', rawUnscheduledData.length);
                console.log('  Créneaux disponibles:', rawAvailableSlotsData.length);
                
                const currentMatches = this.dataManager.getCurrentMatches();
                const stats = Utils.calculateStats(currentMatches);
                
                // Update header stats
                document.getElementById('totalMatches').textContent = stats.totalMatches;
                document.getElementById('totalUnscheduled').textContent = rawUnscheduledData.length;
                document.getElementById('totalWeeks').textContent = stats.totalWeeks;
                document.getElementById('totalPools').textContent = stats.totalPools;
                document.getElementById('totalVenues').textContent = stats.totalVenues;
                document.getElementById('totalAvailableSlots').textContent = rawAvailableSlotsData.length;
                
                // Update unscheduled tab
                if (rawUnscheduledData.length > 0) {
                    document.getElementById('unscheduledTab').textContent = `⚠️ Non Planifiés (${rawUnscheduledData.length})`;
                }
                
                // Initialize filter manager
                this.filterManager.initializeUI(stats);
                
                // Listen to filter changes
                this.filterManager.onChange((filters, preferences) => {
                    this.render(filters, preferences);
                });
                
                // Setup tabs
                this.setupTabs();
                
                // Update display options visibility for initial tab
                this.filterManager.updateDisplayOptionsVisibility(this.currentTab);
                
                // Initial render
                this.render(this.filterManager.filters, this.filterManager.preferences);
                
                // Initialize UI panels
                this.initializePanels();
                
                // Setup drag-and-drop history tracking
                this.setupDragAndDropHistory();
                
                console.log('✅ Initialisation terminée');
            }
            
            initializePanels() {
                // Create UI panels
                window.conflictPanel = new ConflictPanel(this.conflictDetector);
                window.historyPanel = new HistoryPanel(this.historyManager);
                window.resolverPanel = new ResolverPanel(this.autoResolver);
                
                // Expose managers globally
                window.conflictDetector = this.conflictDetector;
                window.autoResolver = this.autoResolver;
                window.historyManager = this.historyManager;
                
                // Initial conflict detection
                this.updateConflicts();
                
                console.log('✅ Panels initialized');
            }
            
            setupDragAndDropHistory() {
                // Override the saveModification function to track history
                if (window.editModal) {
                    const originalSaveModification = window.editModal.saveModification.bind(window.editModal);
                    
                    window.editModal.saveModification = (modification) => {
                        // Save modification as usual
                        originalSaveModification(modification);
                        
                        // Track in history
                        window.historyManager.pushAction({
                            type: 'move',
                            description: `Déplacé match vers ${modification.new.venue} à ${modification.new.time}`,
                            data: {
                                matchId: modification.match_id,
                                from: modification.original,
                                to: modification.new
                            }
                        });
                        
                        // Update conflicts after modification
                        setTimeout(() => this.updateConflicts(), 300);
                    };
                }
            }
            
            updateConflicts() {
                if (!window.conflictPanel) return;
                
                // Detect conflicts
                window.conflictPanel.update(matchsData);
                
                // Add badges to match cards
                window.conflictPanel.addConflictBadges(matchsData);
                
                // Update conflict count badge
                const stats = this.conflictDetector.getConflictStats();
                const badge = document.getElementById('conflictBadge');
                if (badge) {
                    badge.textContent = stats.critical;
                    badge.style.display = stats.critical > 0 ? 'inline-block' : 'none';
                }
                
                // Update resolver suggestions
                if (window.resolverPanel) {
                    window.resolverPanel.update(matchsData, availableSlotsData);
                }
            }
            
            setupTabs() {
                const tabs = document.querySelectorAll('.tab-btn');
                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Remove active
                        tabs.forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        // Add active
                        tab.classList.add('active');
                        this.currentTab = tab.dataset.tab;
                        const contentId = tab.dataset.tab + 'Content';
                        document.getElementById(contentId).classList.add('active');
                        
                        // Update display options visibility based on active tab
                        this.filterManager.updateDisplayOptionsVisibility(this.currentTab);
                        
                        // Re-render current tab
                        this.render(this.filterManager.filters, this.filterManager.preferences);
                    });
                });
            }
            
            render(filters, preferences) {
                // Utiliser les données actuelles du DataManager
                const currentMatches = this.dataManager.getCurrentMatches();
                const filtered = this.filterManager.getFilteredMatches(currentMatches);
                const unscheduledFiltered = this.filterManager.getFilteredUnscheduled(rawUnscheduledData);
                
                // Update filter info
                CalendarView.updateFilterInfo(filtered, unscheduledFiltered, filters);
                
                // Render based on current tab
                switch (this.currentTab) {
                    case 'calendar':
                        // Vue calendrier originale (par semaine avec cartes)
                        CalendarView.renderByWeek(filtered, filters, preferences);
                        break;
                    case 'grid':
                        // Nouvelle vue grille type Google Calendar
                        // Utiliser UNIQUEMENT les matchs planifiés (avec gymnase et horaire)
                        const scheduledMatches = currentMatches.filter(m => m.gymnase && m.horaire);
                        const container = document.getElementById('gridContent');
                        console.log('🔄 Render grid - Tab actif:', this.currentTab);
                        console.log('  Total matchs planifiés:', scheduledMatches.length, '(sur', currentMatches.length, 'total)');
                        console.log('  Container:', container);
                        this.calendarGridView.render(container, scheduledMatches, rawAvailableSlotsData, filters, preferences);
                        break;
                    case 'pools':
                        CalendarView.renderByPool(filtered, filters, preferences);
                        break;
                    case 'venues':
                        CalendarView.renderByVenue(filtered, filters, preferences);
                        break;
                    case 'penalized':
                        PenaltiesView.render(filtered, filters, preferences);
                        break;
                    case 'unscheduled':
                        CalendarView.renderUnscheduled(unscheduledFiltered, filters, preferences);
                        break;
                }
            }
        }
        
        // ==================== LANCEMENT ====================
        const app = new PyCalendarApp();
        window.app = app; // Expose globally for drag-and-drop callbacks
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => app.init());
        } else {
            app.init();
        }
    </script>

        <script>
            // Nettoyer le localStorage au chargement pour éviter la persistance
            // des modifications entre différentes générations de calendrier
            console.log('🧹 Nettoyage du localStorage pour nouvelle génération...');
            localStorage.removeItem('matchModifications');
            console.log('✅ localStorage nettoyé');
        </script>
        
</body>
</html>
